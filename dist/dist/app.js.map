{"version":3,"sources":["../app.js"],"names":["_slicedToArray","sliceIterator","arr","i","_arr","_n","_d","_e","undefined","_i","Symbol","iterator","_s","next","done","push","value","length","err","Array","isArray","Object","TypeError","_extends","assign","target","arguments","source","key","prototype","hasOwnProperty","call","_bot","require","bot","_interopRequireWildcard","_actionTypes","types","_index","Actions","_parseUtils","_localStore","_ParseModels","_config","_config2","_interopRequireDefault","_requestPromise","_requestPromise2","_promise","_promise2","_objectAssign","_objectAssign2","_geocoder","_geocoder2","_path","_path2","_datetimeConverterNodejs","_datetimeConverterNodejs2","_dateformat","_dateformat2","obj","__esModule","default","newObj","APP_SECRET","process","env","MESSENGER_APP_SECRET","get","PAGE_ACCESS_TOKEN","MESSENGER_PAGE_ACCESS_TOKEN","SERVER_URL","PARSE_APP_ID","PARSE_SERVER_URL","PARSE_CLIENT_KEY","FACEBOOK_APP_ID","REDIRECT_URI","BUSINESS_ID","GOOGLE_MAPS_URL","GOOGLE_MAPS_KEY","rules","set","sendMenu","sendAddressesWithTitle","sendCart","sendOrders","sendAddresses","newAddress","sendAccount","sendCreditCards","registerCreditCard","sendHelp","renderYouAreWelcome","payloadRules","setAddressComplement","confirmAddress","setAddress","editAddress","removeAddress","sendCategories","sendProducts","addProduct","addModifier","removeProduct","increaseOneProduct","decreaseOneProduct","sendProductDescription","sendContinueOrder","searchProducts","sendCartDetails","editCart","clearCart","clearAndSendCart","sendPurchaseOptions","checkout","checkPayment","checkAddress","checkOrder","registerCreditCardAndPay","sendRegisteredCreditCards","cancelRegisterCreditCard","payWithCreditCard","sendOrder","newOrder","cancelOrder","removeCreditCard","setScore","defaultSearch","initialState","userData","reducer","state","action","console","log","data","recipientId","type","APP_LOADED","app","CUSTOMER_LOADED","customer","extractParseAttributes","CONSUMER_LOADED","consumer","USER_LOADED","user","CONSUMER_ADDRESSES_LOADED","addresses","map","a","SET_CURRENT_ADDRESS","address","PAYMENT_METHODS_LOADED","paymentMethods","p","SET_PAYMENT_METHOD","paymentMethod","SET_ORDERS","ongoing","orders","delivered","CONSUMER_UPDATED","CONSUMER_NOT_FOUND","CONSUMER_ORDERS_LOADED","USER_CREDITCARDS_LOADED","creditCards","SET_CUSTOMER_POINT_SALE","pointSale","SET_ORDER","order","SET_USER","_user","SET_CONSUMER","_consumer","SET_CUSTOMER","_customer","SET_ORDER_STATE","_orderState","orderState","RENDER_MENU","renderMenu","RENDER_ADDRESS_MENU","renderAddress","createLocalStore","signUp","facebookId","conversationToken","User","createUser","store","then","userObject","getData","rawParseObject","createConsumer","resolve","reject","login","username","password","Parse","logIn","success","error","_error","message","authentication","getCustomer","getUser","getConsumer","Customer","loadInStore","userObj","consumerObj","Consumer","sendSignUp","sendTypingOn","renderSignUp","image_url","sendTypingOff","sendGenericMessage","image","url","first_name","name","renderAddressTitle","sendTextMessage","ConsumerAddress","elements","_iteratorNormalCompletion","_didIteratorError","_iteratorError","_iterator","_step","limit","description","city","location","lat","lng","objectId","return","CreditCard","renderCreditCards","userBuffer","buffer","creditCardImage","creditCardPayload","_iteratorNormalCompletion2","_didIteratorError2","_iteratorError2","_iterator2","_step2","creditCard","creditCardImages","has","lastFour","cardHolderName","setDataBuffer","writeAddress","setListener","addressCheck","setLocationCheck","sendQuickReplyMessage","renderMapMessage","renderNullMapMessage","sendMap","renderMap","sendMapConfirmation","sendImageMessage","renderMapConfirmation","geocode","status","setAddressComponetsInBuffer","results","formatted_address","geometry","_iteratorNormalCompletion3","_didIteratorError3","_iteratorError3","_iterator3","address_components","_step3","component","includes","route","long_name","street_number","short_name","locality","administrative_area","country","country_code","postal_code","addressPayload","saveAddress","startsWith","split","GeoPoint","latitude","parseFloat","longitude","Query","consumerAddress","complement","save","renderAddressUpdate","id","_error2","address_name","__type","className","result","renderAddressSave","_error3","setEmail","setEmailCheck","email","saveInStore","setTelephone","setTelephoneCheck","setPhone","telephone","reverseGeocode","dispatch","Cloud","run","businessId","setCustomerPointSale","renderAddressConfirmation","code","renderAddressOutOfCoverage","destroy","renderRemoveAddress","renderRemoveCreditCard","renderCategoriesInitialMessage","index","pointSaleIsOpen","parseInt","categories","sendScheduleRestriction","pointSaleSchedules","splitCategories","idx","forEach","item","title","buttons","payload","renderCategories","keys","catIni","catFin","subtitle","renderProductsInitialMessage","categoryId","Category","category","object","proIdx","products","renderEmptyProducts","renderProducts","splitProducts","product","createCart","items","Map","cart","productId","Product","productObject","promises","quantity","price","priceDefault","modifiers","array","Modifier","modifier","Promise","when","undefinedModifiers","checkModifiers","modifierItem","ModifierItem","modifierItems","renderModifierMenu","saveCart","renderAddProduct","renderContinueOrder","quick_replies","modifierId","itemId","orderItemModifier","OrderItemModifier","_error4","exist","itemModifier","checkModifiersComplete","OrderItem","orderItem","delete","itemsPointers","_iteratorNormalCompletion4","_didIteratorError4","_iteratorError4","_iterator4","_step4","_step4$value","size","_error5","_error6","_error7","consumerCart","Cart","_iteratorNormalCompletion5","_didIteratorError5","_iteratorError5","_iterator5","_step5","_step5$value","properties","saveAll","_iteratorNormalCompletion6","_didIteratorError6","_iteratorError6","_iterator6","_step6","_item","method","_error8","_error9","saveOrder","Order","state0","orderStates","total","deliveryCost","phone","setOrder","_error10","sendEmptyCartOptions","customer_image_url","element","orderLimit","ind","renderCartEmpty","renderCart","_error11","alert","cartId","payment_method","addressData","street_1","street_2","postalCode","countryCode","sendReceiptMessage","template_type","recipient_name","last_name","order_number","currency","timestamp","Math","trunc","Date","now","toString","summary","subtotal","shipping_cost","total_cost","renderCartDetails","renderEditCartOptions","minOrderPrice","sendMinOrderPriceRestriction","loadPaymentMethods","renderCheckPayment","substring","setPaymentMethod","paymentFunction","paymentTypes","renderMinOrderPriceRestriction","days","text","_iteratorNormalCompletion7","_didIteratorError7","_iteratorError7","_iterator7","_step7","pointSaleSchedule","daysActive","allDay","dayID","renderScheduleRestriction","sendCash","renderCash","orderConfirmation","renderCancelRegisterCreditCard","renderNoRegisteredCreditCards","renderRegisteredCreditCards","_iteratorNormalCompletion8","_didIteratorError8","_iteratorError8","_iterator8","_step8","card","creditCardId","renderOrderConfirmation","messagePush","renderOrderState","orderSent","renderOrderSent","serviceRating","sendOrderState","score","orderId","Number","comment","thank","query","q","renderSearchEmpty","renderSearchInitial","splitSearchResult","productObjects","renderHelp","sendContactUs","consumerId","setOrders","renderOrders","fail","_iteratorNormalCompletion9","_didIteratorError9","_iteratorError9","_iterator9","_step9","datetime","dateString","createdAt","orderNumber","currentOrder","_iteratorNormalCompletion10","_didIteratorError10","_iteratorError10","_iterator10","_step10","_iteratorNormalCompletion11","_didIteratorError11","_iteratorError11","_iterator11","_step11","amount","renderOrder","renderCancelOrder","renderAccount","addCreditCard","token","expiration","replace","uri","headers","json","body","catch","createOrder","checkSchedulesDeliveryPointSale","params","date","toJSON","slice","renderShoppingCartOptions","updateCart","localCart","setPayment","sendRegisterFacebookUser","req","res","sendFile","join","__dirname","post","psid","uid","accessToken","end","consumerID","getSessionToken","_error12","OrderState","setOrderState","PaymentMethod","find","methods","_iteratorNormalCompletion12","_didIteratorError12","_iteratorError12","_iterator12","_step12","tmpMethod","states","_iteratorNormalCompletion13","_didIteratorError13","_iteratorError13","_iterator13","_step13","module","exports"],"mappings":"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","file":"app.js","sourcesContent":["'use strict';var _slicedToArray=function(){function sliceIterator(arr,i){var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break;}}catch(err){_d=true;_e=err;}finally{try{if(!_n&&_i[\"return\"])_i[\"return\"]();}finally{if(_d)throw _e;}}return _arr;}return function(arr,i){if(Array.isArray(arr)){return arr;}else if(Symbol.iterator in Object(arr)){return sliceIterator(arr,i);}else{throw new TypeError(\"Invalid attempt to destructure non-iterable instance\");}};}();var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key];}}}return target;};var _bot=require('./bot');var bot=_interopRequireWildcard(_bot);var _actionTypes=require('./constants/actionTypes');var types=_interopRequireWildcard(_actionTypes);var _index=require('./actions/index');var Actions=_interopRequireWildcard(_index);var _parseUtils=require('./parseUtils');var _localStore=require('./localStore');var _ParseModels=require('./models/ParseModels');var _config=require('config');var _config2=_interopRequireDefault(_config);var _requestPromise=require('request-promise');var _requestPromise2=_interopRequireDefault(_requestPromise);var _promise=require('promise');var _promise2=_interopRequireDefault(_promise);var _objectAssign=require('object-assign');var _objectAssign2=_interopRequireDefault(_objectAssign);var _geocoder=require('geocoder');var _geocoder2=_interopRequireDefault(_geocoder);var _path=require('path');var _path2=_interopRequireDefault(_path);var _datetimeConverterNodejs=require('datetime-converter-nodejs');var _datetimeConverterNodejs2=_interopRequireDefault(_datetimeConverterNodejs);var _dateformat=require('dateformat');var _dateformat2=_interopRequireDefault(_dateformat);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj;}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key))newObj[key]=obj[key];}}newObj.default=obj;return newObj;}}var APP_SECRET=process.env.MESSENGER_APP_SECRET?process.env.MESSENGER_APP_SECRET:_config2.default.get('APP_SECRET');var PAGE_ACCESS_TOKEN=process.env.MESSENGER_PAGE_ACCESS_TOKEN?process.env.MESSENGER_PAGE_ACCESS_TOKEN:_config2.default.get('PAGE_ACCESS_TOKEN');var SERVER_URL=process.env.SERVER_URL?process.env.SERVER_URL:_config2.default.get('SERVER_URL');var PARSE_APP_ID=process.env.PARSE_APP_ID?process.env.PARSE_APP_ID:_config2.default.get('PARSE_APP_ID');var PARSE_SERVER_URL=process.env.PARSE_SERVER_URL?process.env.PARSE_SERVER_URL:_config2.default.get('PARSE_SERVER_URL');var PARSE_CLIENT_KEY=process.env.PARSE_CLIENT_KEY?process.env.PARSE_CLIENT_KEY:_config2.default.get('PARSE_CLIENT_KEY');var FACEBOOK_APP_ID=process.env.FACEBOOK_APP_ID?process.env.FACEBOOK_APP_ID:_config2.default.get('FACEBOOK_APP_ID');var REDIRECT_URI=process.env.REDIRECT_URI?process.env.REDIRECT_URI:_config2.default.get('REDIRECT_URI');var BUSINESS_ID=process.env.BUSINESS_ID?process.env.BUSINESS_ID:_config2.default.get('BUSINESS_ID');var GOOGLE_MAPS_URL=process.env.GOOGLE_MAPS_URL?process.env.GOOGLE_MAPS_URL:_config2.default.get('GOOGLE_MAPS_URL');var GOOGLE_MAPS_KEY=process.env.GOOGLE_MAPS_KEY?process.env.GOOGLE_MAPS_KEY:_config2.default.get('GOOGLE_MAPS_KEY');bot.rules.set('hola',sendMenu);bot.rules.set('iniciar',sendMenu);bot.rules.set('empezar',sendMenu);bot.rules.set('comenzar',sendMenu);bot.rules.set('buenos dias',sendMenu);bot.rules.set('buenas tardes',sendMenu);bot.rules.set('men',sendMenu);bot.rules.set('pedir domicilio',sendAddressesWithTitle);bot.rules.set('carrito',sendCart);bot.rules.set('cuenta',sendCart);bot.rules.set('mi orden',sendOrders);bot.rules.set('mis rdenes',sendOrders);bot.rules.set('mi direccin',sendAddresses);bot.rules.set('mis direcciones',sendAddresses);bot.rules.set('nueva direccin',newAddress);bot.rules.set('agregar direccin',newAddress);bot.rules.set('mi cuenta',sendAccount);bot.rules.set('mi tarjeta',sendCreditCards);bot.rules.set('mis tarjetas',sendCreditCards);bot.rules.set('nueva tarjeta',registerCreditCard);bot.rules.set('agregar tarjeta',registerCreditCard);bot.rules.set('ayuda',sendHelp);bot.rules.set('help',sendHelp);bot.rules.set('gracias',renderYouAreWelcome);bot.payloadRules.set('Greeting',sendMenu);bot.payloadRules.set('SendAddressesWithTitle',sendAddressesWithTitle);bot.payloadRules.set('SendAddresses',sendAddresses);bot.payloadRules.set('NewAddress',newAddress);bot.payloadRules.set('SetAddressComplement',setAddressComplement);bot.payloadRules.set('ConfirmAddress',confirmAddress);bot.payloadRules.set('SetAddress',setAddress);bot.payloadRules.set('EditAddress',editAddress);bot.payloadRules.set('RemoveAddress',removeAddress);bot.payloadRules.set('SendCategories',sendCategories);bot.payloadRules.set('SendProducts',sendProducts);bot.payloadRules.set('AddProduct',addProduct);bot.payloadRules.set('AddModifier',addModifier);bot.payloadRules.set('RemoveProduct',removeProduct);bot.payloadRules.set('IncreaseOneProduct',increaseOneProduct);bot.payloadRules.set('DecreaseOneProduct',decreaseOneProduct);bot.payloadRules.set('SendProductDescription',sendProductDescription);bot.payloadRules.set('SendContinueOrder',sendContinueOrder);bot.payloadRules.set('Search',searchProducts);bot.payloadRules.set('SendCart',sendCart);bot.payloadRules.set('SendCartDetails',sendCartDetails);bot.payloadRules.set('EditCart',editCart);bot.payloadRules.set('ClearCart',clearCart);bot.payloadRules.set('ClearAndSendCart',clearAndSendCart);bot.payloadRules.set('SendPurchaseOptions',sendPurchaseOptions);bot.payloadRules.set('Checkout',checkout);bot.payloadRules.set('CheckPayment',checkPayment);bot.payloadRules.set('CheckAddress',checkAddress);bot.payloadRules.set('CheckOrder',checkOrder);bot.payloadRules.set('RegisterCreditCard',registerCreditCard);bot.payloadRules.set('RegisterCreditCardAndPay',registerCreditCardAndPay);bot.payloadRules.set('SendRegisteredCreditCards',sendRegisteredCreditCards);bot.payloadRules.set('CancelRegisterCreditCard',cancelRegisterCreditCard);bot.payloadRules.set('PayWithCreditCard',payWithCreditCard);bot.payloadRules.set('SendOrders',sendOrders);bot.payloadRules.set('SendOrder',sendOrder);bot.payloadRules.set('NewOrder',newOrder);bot.payloadRules.set('CancelOrder',cancelOrder);bot.payloadRules.set('SendCreditCards',sendCreditCards);bot.payloadRules.set('RemoveCreditCard',removeCreditCard);bot.payloadRules.set('SetScore',setScore);bot.payloadRules.set('SendAccount',sendAccount);bot.payloadRules.set('SendHelp',sendHelp);bot.payloadRules.set('CustomerService',sendHelp);bot.defaultSearch=searchProducts;var initialState={userData:{}};var reducer=function reducer(){var state=arguments.length>0&&arguments[0]!==undefined?arguments[0]:initialState;var action=arguments[1];console.log('ACTION');console.log(action);var data=action.data;if(data&&data.hasOwnProperty('recipientId')){if(typeof state.userData[data.recipientId]=='undefined'){state.userData[data.recipientId]={};}}switch(action.type){case types.APP_LOADED:{console.log('Application is running on port',bot.app.get('port'));return _extends({},state);}case types.CUSTOMER_LOADED:{var customer=(0,_parseUtils.extractParseAttributes)(data.customer);(0,_objectAssign2.default)(state.userData[data.recipientId],{customer:customer});return _extends({},state);}case types.CONSUMER_LOADED:{var consumer=(0,_parseUtils.extractParseAttributes)(data.consumer);(0,_objectAssign2.default)(state.userData[data.recipientId],{consumer:consumer});return _extends({},state);}case types.USER_LOADED:{var user=(0,_parseUtils.extractParseAttributes)(data.user);(0,_objectAssign2.default)(state.userData[data.recipientId],{user:user});return _extends({},state);}case types.CONSUMER_ADDRESSES_LOADED:{var addresses=data.addresses.map(function(a){return(0,_parseUtils.extractParseAttributes)(a);});(0,_objectAssign2.default)(state.userData[data.recipientId],{addresses:addresses});return _extends({},state);}case types.SET_CURRENT_ADDRESS:{var address=(0,_parseUtils.extractParseAttributes)(data.address);(0,_objectAssign2.default)(state.userData[data.recipientId],{address:address});return _extends({},state);}case types.PAYMENT_METHODS_LOADED:{var paymentMethods=data.paymentMethods.map(function(p){return(0,_parseUtils.extractParseAttributes)(p);});(0,_objectAssign2.default)(state.userData[data.recipientId],{paymentMethods:paymentMethods});return _extends({},state);}case types.SET_PAYMENT_METHOD:{var paymentMethod=(0,_parseUtils.extractParseAttributes)(data.paymentMethod);(0,_objectAssign2.default)(state.userData[data.recipientId],{paymentMethod:paymentMethod});return _extends({},state);}case types.SET_ORDERS:{var ongoing=data.orders.ongoing.map(function(a){return(0,_parseUtils.extractParseAttributes)(a);});var delivered=data.orders.delivered.map(function(a){return(0,_parseUtils.extractParseAttributes)(a);});(0,_objectAssign2.default)(state.userData[data.recipientId],{orders:{ongoing:ongoing,delivered:delivered}});return _extends({},state);}case types.CONSUMER_UPDATED:{return _extends({},state);}case types.CONSUMER_NOT_FOUND:{return _extends({},state);}case types.CONSUMER_ORDERS_LOADED:{var orders=data.orders.map(function(a){return(0,_parseUtils.extractParseAttributes)(a);});(0,_objectAssign2.default)(state.userData[data.recipientId],{orders:orders});return _extends({},state);}case types.USER_CREDITCARDS_LOADED:{var creditCards=data.creditCards.map(function(a){return(0,_parseUtils.extractParseAttributes)(a);});(0,_objectAssign2.default)(state.userData[data.recipientId],{creditCards:creditCards});return _extends({},state);}case types.SET_CUSTOMER_POINT_SALE:{var pointSale=(0,_parseUtils.extractParseAttributes)(data.pointSale);(0,_objectAssign2.default)(state.userData[data.recipientId],{pointSale:pointSale});return _extends({},state);}case types.SET_ORDER:{var order=(0,_parseUtils.extractParseAttributes)(data.order);(0,_objectAssign2.default)(state.userData[data.recipientId],{order:order});return _extends({},state);}case types.SET_USER:{var _user=(0,_parseUtils.extractParseAttributes)(data.user);(0,_objectAssign2.default)(state.userData[data.recipientId],{user:_user});return _extends({},state);}case types.SET_CONSUMER:{var _consumer=(0,_parseUtils.extractParseAttributes)(data.consumer);(0,_objectAssign2.default)(state.userData[data.recipientId],{consumer:_consumer});return _extends({},state);}case types.SET_CUSTOMER:{var _customer=(0,_parseUtils.extractParseAttributes)(data.customer);(0,_objectAssign2.default)(state.userData[data.recipientId],{customer:_customer});return _extends({},state);}case types.SET_ORDER_STATE:{var _orderState=(0,_parseUtils.extractParseAttributes)(data.orderState);(0,_objectAssign2.default)(state.userData[data.recipientId],{orderState:_orderState});return _extends({},state);}case types.RENDER_MENU:{renderMenu();return state;}case types.RENDER_ADDRESS_MENU:{renderAddress();return state;}default:return state;}};(0,_localStore.createLocalStore)(reducer);function signUp(recipientId,facebookId,conversationToken){return _ParseModels.User.createUser(store,recipientId,facebookId,conversationToken).then(function(){var userObject=(0,_localStore.getData)(recipientId,'user');var user=userObject.rawParseObject;return user.createConsumer(store,recipientId,conversationToken).then(function(consumer){return new _promise2.default(function(resolve,reject){resolve(userObject);});});});}function login(username,password){return Parse.User.logIn(username,password,{success:function success(user){//let val = JSON.stringify({sessionToken: user.getSessionToken()});\n//console.log(val);\nreturn user;},error:function error(user,_error){console.log('Failed to create new object, with error code: '+_error.message);}});}function authentication(recipientId){return getCustomer(recipientId).then(function(customer){return getUser(recipientId).then(function(user){if(typeof user=='undefined'){//sendSignUp(recipientId)\nreturn _ParseModels.User.createUser(store,recipientId,recipientId,PAGE_ACCESS_TOKEN).then(function(){var userObject=(0,_localStore.getData)(recipientId,'user');var user=userObject.rawParseObject;return user.createConsumer(store,recipientId,PAGE_ACCESS_TOKEN).then(function(consumer){return new _promise2.default(function(resolve,reject){resolve(userObject);});});});}else{return getConsumer(recipientId,user.rawParseObject).then(function(consumer){return new _promise2.default(function(resolve,reject){resolve(user);});/*Parse.Promise.as().then(() => {\n                        return user;\n                    });*/});}//return login(user.username, user.username).then(()=>{\n//});\n});});}function getCustomer(recipientId){var customer=(0,_localStore.getData)(recipientId,'customer');if(typeof customer=='undefined'){return _ParseModels.Customer.loadInStore(store,recipientId,BUSINESS_ID).then(function(){return(0,_localStore.getData)(recipientId,'customer');});}else{return new _promise2.default(function(resolve,reject){resolve(customer);});}}function getUser(recipientId){var userObj=(0,_localStore.getData)(recipientId,'user');if(typeof userObj=='undefined'){return _ParseModels.User.loadInStore(store,recipientId).then(function(){return(0,_localStore.getData)(recipientId,'user');});}else{return new _promise2.default(function(resolve,reject){resolve(userObj);});}}function getConsumer(recipientId,user){var consumerObj=(0,_localStore.getData)(recipientId,'consumer');if(typeof consumerObj=='undefined'){return _ParseModels.Consumer.loadInStore(store,recipientId,user).then(function(){consumerObj=(0,_localStore.getData)(recipientId,'consumer');if(typeof consumerObj!='undefined'){return new _promise2.default(function(resolve,reject){resolve(consumerObj);});}else{console.log('create consumer');/*return createConsumer(recipientId, user).then( () => {\n                    return getData(recipientId, 'consumer');\n                });*/}});}else{return new _promise2.default(function(resolve,reject){resolve(consumerObj);});}}function sendSignUp(recipientId){bot.sendTypingOn(recipientId);renderSignUp(recipientId);}function renderSignUp(recipientId){var image_url=SERVER_URL+\"assets/images/love.jpg\";bot.sendTypingOff(recipientId);return bot.sendGenericMessage(recipientId,[{\"title\":\"Hola, soy un Bot\",\"subtitle\":\"Soy tu asistente virtual. Quieres registrarte en nuestro sistema?\",\"image_url\":image_url,\"buttons\":[{\"type\":\"web_url\",\"url\":SERVER_URL+\"login?psid=\"+recipientId,\"title\":\"Registrarme\",\"webview_height_ratio\":\"full\",\"messenger_extensions\":true}]}]);}function sendMenu(recipientId){bot.sendTypingOn(recipientId);authentication(recipientId).then(function(){renderMenu(recipientId);});}function renderMenu(recipientId){var customer=(0,_localStore.getData)(recipientId,'customer');var user=(0,_localStore.getData)(recipientId,'user');var image_url=customer.image.url;bot.sendTypingOff(recipientId);return bot.sendGenericMessage(recipientId,[{\"title\":\"Hola \"+user.first_name+\", Bienvenido a \"+customer.name,\"subtitle\":\"Aqu puedes pedir un domicilio, escribe o selecciona alguna de las opciones:\",\"image_url\":image_url,\"buttons\":[{\"type\":\"postback\",\"title\":\"Pedir domicilio\",\"payload\":\"SendAddressesWithTitle\"},{\"type\":\"postback\",\"title\":\"Servicio al cliente\",\"payload\":\"CustomerService\"}]}]);}function sendAddressesWithTitle(recipientId){renderAddressTitle(recipientId).then(function(){sendAddresses(recipientId);});}function renderAddressTitle(recipientId){bot.sendTypingOff(recipientId);return bot.sendTextMessage(recipientId,\"A cual direccin vas hacer tu pedido?\\n\\nPuedes escoger entre agregar una nueva direccin o seleccionar una de tus direcciones guardadas\");}function sendAddresses(recipientId){bot.sendTypingOn(recipientId);authentication(recipientId).then(function(){var consumer=(0,_localStore.getData)(recipientId,'consumer');_ParseModels.ConsumerAddress.loadInStore(store,recipientId,consumer).then(function(){renderAddress(recipientId);});});}function renderAddress(recipientId){var addresses=(0,_localStore.getData)(recipientId,'addresses');var elements=[];elements.push({\"title\":\"Nueva direccin\",\"subtitle\":\"Puedes agregar una nueva direccin\",\"image_url\":SERVER_URL+\"assets/images/addAddress.jpg\",\"buttons\":[{\"type\":\"postback\",\"title\":\"Nueva direccin\",\"payload\":\"NewAddress\"}]});var _iteratorNormalCompletion=true;var _didIteratorError=false;var _iteratorError=undefined;try{for(var _iterator=addresses[Symbol.iterator](),_step;!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=true){var address=_step.value;if(elements.length<bot.limit){elements.push({\"title\":address.name,\"subtitle\":address.address+\", \"+address.description+\", \"+address.city+\", \"+address.state,\"image_url\":GOOGLE_MAPS_URL+\"?center=\"+address.location.lat+\",\"+address.location.lng+\"&zoom=16&size=400x400&markers=color:red%7C\"+address.location.lat+\",\"+address.location.lng+\"&key=\"+GOOGLE_MAPS_KEY,\"buttons\":[{\"type\":\"postback\",\"title\":\"Seleccionar\",\"payload\":\"SetAddress-\"+address.objectId},{\"type\":\"postback\",\"title\":\"Modificar\",\"payload\":\"EditAddress-\"+address.objectId},{\"type\":\"postback\",\"title\":\"Quitar\",\"payload\":\"RemoveAddress-\"+address.objectId}]});}}}catch(err){_didIteratorError=true;_iteratorError=err;}finally{try{if(!_iteratorNormalCompletion&&_iterator.return){_iterator.return();}}finally{if(_didIteratorError){throw _iteratorError;}}}bot.sendTypingOff(recipientId);return bot.sendGenericMessage(recipientId,elements);}function sendCreditCards(recipientId){bot.sendTypingOn(recipientId).then(function(){authentication(recipientId).then(function(){var user=(0,_localStore.getData)(recipientId,'user');_ParseModels.CreditCard.loadInStore(store,recipientId,user).then(function(){renderCreditCards(recipientId);});});});}function renderCreditCards(recipientId){var creditCards=(0,_localStore.getData)(recipientId,'creditCards');var elements=[];var userBuffer=bot.buffer[recipientId];var creditCardImage=void 0;if(typeof userBuffer!='undefined'&&userBuffer.hasOwnProperty('creditCardPayload')){delete userBuffer.creditCardPayload;}elements.push({\"title\":\"Registro de tarjeta\",\"subtitle\":\"Puedes agregar una tarjeta\",\"image_url\":SERVER_URL+\"assets/images/creditCards.jpg\",\"buttons\":[{\"type\":\"postback\",\"title\":\"Nueva tarjeta\",\"payload\":\"RegisterCreditCard\"}]});var _iteratorNormalCompletion2=true;var _didIteratorError2=false;var _iteratorError2=undefined;try{for(var _iterator2=creditCards[Symbol.iterator](),_step2;!(_iteratorNormalCompletion2=(_step2=_iterator2.next()).done);_iteratorNormalCompletion2=true){var creditCard=_step2.value;if(elements.length<bot.limit){creditCardImage=creditCardImages.has(creditCard.type)?creditCardImages.get(creditCard.type):creditCardImages.get('DEFAULT');elements.push({\"title\":creditCard.type+' '+creditCard.lastFour,\"subtitle\":creditCard.cardHolderName,\"image_url\":SERVER_URL+creditCardImage,\"buttons\":[{\"type\":\"postback\",\"title\":\"Quitar\",\"payload\":\"RemoveCreditCard-\"+creditCard.objectId}]});}}}catch(err){_didIteratorError2=true;_iteratorError2=err;}finally{try{if(!_iteratorNormalCompletion2&&_iterator2.return){_iterator2.return();}}finally{if(_didIteratorError2){throw _iteratorError2;}}}return bot.sendTypingOff(recipientId).then(function(){return bot.sendGenericMessage(recipientId,elements);});}function newAddress(recipientId){bot.sendTypingOff(recipientId);bot.setDataBuffer(recipientId,'addressPayload','NewAddress');writeAddress(recipientId);}function writeAddress(recipientId){bot.setListener(recipientId,'address','text',addressCheck);bot.setListener(recipientId,'location','attachment',setLocationCheck);return bot.sendQuickReplyMessage(recipientId,\"Puedes escribir o compartir tu ubicacin actual?\\n\\nEjemplo: Calle 67 #52-20, Medelln.\\n\\nNo olvides escribir la ciudad al final de la direccin.\",[{\"content_type\":\"location\",\"title\":\"Enviar ubicacin\"}]);}function renderMapMessage(recipientId){var userBuffer=bot.buffer[recipientId];return bot.sendTypingOff(recipientId).then(function(){return bot.sendTextMessage(recipientId,\"Encontr esta direccin en Google Maps:\\n\\n\"+userBuffer.address);});}function renderNullMapMessage(recipientId){return bot.sendTypingOff(recipientId).then(function(){return bot.sendTextMessage(recipientId,\"La direccin no ha sido encontrada en Google Maps, por favor intenta de nuevo\");});}function sendMap(recipientId){renderMap(recipientId).then(function(){sendMapConfirmation(recipientId);});}function renderMap(recipientId){bot.sendTypingOff(recipientId);var userBuffer=bot.buffer[recipientId];return bot.sendImageMessage(recipientId,GOOGLE_MAPS_URL+\"?center=\"+userBuffer.location.lat+\",\"+userBuffer.location.lng+\"&zoom=16&size=400x400&markers=color:red%7C\"+userBuffer.location.lat+\",\"+userBuffer.location.lng+\"&key=\"+GOOGLE_MAPS_KEY);}function sendMapConfirmation(recipientId){renderMapConfirmation(recipientId);}function renderMapConfirmation(recipientId){return bot.sendTypingOff(recipientId).then(function(){return bot.sendQuickReplyMessage(recipientId,\"Es correcta?\",[{\"content_type\":\"text\",\"title\":\"Si\",\"payload\":\"SetAddressComplement\"},{\"content_type\":\"text\",\"title\":\"No\",\"payload\":\"NewAddress\"}]);});}function addressCheck(recipientId){var userBuffer=bot.buffer[recipientId];_geocoder2.default.geocode(userBuffer.address,function(error,data){if(!error&&data.status=='OK'){setAddressComponetsInBuffer(recipientId,data.results[0]);}else{console.log('Geocode not found');console.log(error);renderNullMapMessage(recipientId).then(function(){newAddress(recipientId);});}});}function setAddressComponetsInBuffer(recipientId,data){var userBuffer=bot.buffer[recipientId];userBuffer.address=data.formatted_address;userBuffer.location=data.geometry.location;var _iteratorNormalCompletion3=true;var _didIteratorError3=false;var _iteratorError3=undefined;try{for(var _iterator3=data.address_components[Symbol.iterator](),_step3;!(_iteratorNormalCompletion3=(_step3=_iterator3.next()).done);_iteratorNormalCompletion3=true){var component=_step3.value;if(component.types.includes('route')){userBuffer.route=component.long_name;}else if(component.types.includes('street_number')){userBuffer.street_number=component.short_name;}else if(component.types.includes('locality')){userBuffer.locality=component.short_name;}else if(component.types.includes('administrative_area_level_1')){userBuffer.state=component.short_name;}else if(component.types.includes('administrative_area_level_2')){userBuffer.administrative_area=component.short_name;}else if(component.types.includes('country')){userBuffer.country=component.long_name;userBuffer.country_code=component.short_name;}else if(component.types.includes('postal_code')){userBuffer.postal_code=component.short_name;}}}catch(err){_didIteratorError3=true;_iteratorError3=err;}finally{try{if(!_iteratorNormalCompletion3&&_iterator3.return){_iterator3.return();}}finally{if(_didIteratorError3){throw _iteratorError3;}}}renderMapMessage(recipientId).then(function(){sendMap(recipientId);});}function setAddressComplement(recipientId){bot.setListener(recipientId,'complement','text',confirmAddress);return bot.sendTypingOff(recipientId).then(function(){return bot.sendTextMessage(recipientId,\"Por favor escribe el complemento de tu direccin actual.\\n\\nEjemplo: Apto 303, edificio el palmar.\\n\\nNo olvides colocar el nombre del edificio o del barrio\");});}function confirmAddress(recipientId){var userBuffer=bot.buffer[recipientId];var addressPayload=userBuffer['addressPayload'];if(addressPayload=='NewAddress'){bot.setListener(recipientId,'address_name','text',saveAddress);return bot.sendTypingOff(recipientId).then(function(){return bot.sendTextMessage(recipientId,\"Por favor coloca un nombre a esta direccin para guardarla. \\n\\nEjemplo: casa, apartamento o oficina\");});}else if(addressPayload.startsWith('EditAddress')){(function(){var data=addressPayload.split('-');var location=new Parse.GeoPoint({latitude:parseFloat(userBuffer.location.lat),longitude:parseFloat(userBuffer.location.lng)});new Parse.Query(_ParseModels.ConsumerAddress).get(data[1]).then(function(consumerAddress){consumerAddress.set('address',userBuffer.route+\" # \"+userBuffer.street_number);consumerAddress.set('location',location);consumerAddress.set('country',userBuffer.country);consumerAddress.set('countryCode',userBuffer.country_code);consumerAddress.set('postalCode',userBuffer.postal_code);consumerAddress.set('state',userBuffer.state);consumerAddress.set('description',userBuffer.complement);consumerAddress.save(undefined,{success:function success(address){delete userBuffer.address;delete userBuffer.location;delete userBuffer.complement;renderAddressUpdate(recipientId).then(function(){setAddress(recipientId,address.id);});},error:function error(user,_error2){console.log('Failed to create new object, with error code: '+_error2.message);}});});})();}}function renderAddressUpdate(recipientId){return bot.sendTypingOff(recipientId).then(function(){return bot.sendTextMessage(recipientId,\"La direccin ha sido actualizada.\");});}function saveAddress(recipientId){var consumer=(0,_localStore.getData)(recipientId,'consumer');var userBuffer=bot.buffer[recipientId];var location=new Parse.GeoPoint({latitude:parseFloat(userBuffer.location.lat),longitude:parseFloat(userBuffer.location.lng)});var consumerAddress=new _ParseModels.ConsumerAddress();consumerAddress.set('name',userBuffer.address_name);consumerAddress.set('address',userBuffer.route+\" # \"+userBuffer.street_number);consumerAddress.set('consumer',{__type:\"Pointer\",className:\"Consumer\",objectId:consumer.objectId});consumerAddress.set('location',location);consumerAddress.set('city',userBuffer.locality);consumerAddress.set('country',userBuffer.country);consumerAddress.set('countryCode',userBuffer.country_code);consumerAddress.set('postalCode',userBuffer.postal_code);consumerAddress.set('state',userBuffer.state);consumerAddress.set('description',userBuffer.complement);consumerAddress.save(undefined,{success:function success(result){delete userBuffer.address;delete userBuffer.location;delete userBuffer.complement;delete userBuffer['address_name'];renderAddressSave(recipientId).then(function(){setAddress(recipientId,result.id);});},error:function error(user,_error3){console.log('Failed to create new object, with error code: '+_error3.message);}});}function renderAddressSave(recipientId){return bot.sendTypingOff(recipientId).then(function(){return bot.sendTextMessage(recipientId,\"La direccin ha sido almacenada.\");});}function setEmail(recipientId){bot.setListener(recipientId,'email','text',setEmailCheck);return bot.sendTypingOff(recipientId).then(function(){return bot.sendTextMessage(recipientId,\"Por favor escribe tu email:\");});}function setEmailCheck(recipientId,value){var userBuffer=bot.buffer[recipientId];var consumer=(0,_localStore.getData)(recipientId,'consumer').rawParseObject;consumer.setEmail(userBuffer.email);consumer.saveInStore(store,recipientId).then(function(){delete userBuffer.email;checkOrder(recipientId);});}function setTelephone(recipientId){bot.setListener(recipientId,'telephone','text',setTelephoneCheck);return bot.sendTypingOff(recipientId).then(function(){return bot.sendTextMessage(recipientId,\"Por favor escribe tu nmero telefnico:\");});}function setTelephoneCheck(recipientId){var userBuffer=bot.buffer[recipientId];var consumer=(0,_localStore.getData)(recipientId,'consumer').rawParseObject;consumer.setPhone(userBuffer.telephone);consumer.saveInStore(store,recipientId).then(function(){delete userBuffer.telephone;checkOrder(recipientId);});}function setLocationCheck(recipientId){var userBuffer=bot.buffer[recipientId];_geocoder2.default.reverseGeocode(userBuffer.location.lat,userBuffer.location.lng,function(error,data){if(!error&&data.status=='OK'){setAddressComponetsInBuffer(recipientId,data.results[0]);}else{console.log('Geocode not found');console.log(error);renderNullMapMessage(recipientId).then(function(){newAddress(recipientId);});}});}function setAddress(recipientId,id){bot.sendTypingOn(recipientId);store.dispatch(Actions.setAddress(recipientId,id)).then(function(){var address=(0,_localStore.getData)(recipientId,'address');Parse.Cloud.run('getProducts',{businessId:BUSINESS_ID,lat:address.location.lat,lng:address.location.lng}).then(function(result){var pointSale=result.pointSale;store.dispatch(Actions.setCustomerPointSale(recipientId,pointSale.id)).then(function(){renderAddressConfirmation(recipientId).then(function(){sendCategories(recipientId,0);});});},function(error){if(error.code=='141'){renderAddressOutOfCoverage(recipientId).then(function(){sendAddressesWithTitle(recipientId);});}else{console.log('error');console.log(error);}});});}function editAddress(recipientId,id){bot.sendTypingOff(recipientId);bot.setDataBuffer(recipientId,'addressPayload','EditAddress-'+id);writeAddress(recipientId);}function removeAddress(recipientId,id){new Parse.Query(_ParseModels.ConsumerAddress).get(id).then(function(consumerAddress){consumerAddress.destroy().then(function(){renderRemoveAddress(recipientId).then(function(){sendAddresses(recipientId);});});});}function renderRemoveAddress(recipientId){return bot.sendTypingOff(recipientId).then(function(){return bot.sendTextMessage(recipientId,\"La direccin ha sido eliminada.\");});}function removeCreditCard(recipientId,id){new Parse.Query(_ParseModels.CreditCard).get(id).then(function(creditCard){creditCard.destroy().then(function(){renderRemoveCreditCard(recipientId).then(function(){sendCreditCards(recipientId);});});});}function renderRemoveCreditCard(recipientId){return bot.sendTypingOff(recipientId).then(function(){return bot.sendTextMessage(recipientId,\"La tarjeta de credito ha sido eliminada.\");});}function renderAddressOutOfCoverage(recipientId){return bot.sendTypingOff(recipientId).then(function(){return bot.sendTextMessage(recipientId,\"La direccin seleccionada no est dentro de la cobertura de nuestras sedes, por favor intenta con otra direccin\");});}function renderAddressConfirmation(recipientId){return bot.sendTypingOff(recipientId).then(function(){bot.sendTextMessage(recipientId,\"Perfecto, ya seleccion tu direccin para este pedido\");});}function renderCategoriesInitialMessage(recipientId){return bot.sendTypingOff(recipientId).then(function(){return bot.sendTextMessage(recipientId,\"A continuacin te presentamos las categoras de productos disponibles.\");});}function sendCategories(recipientId,index){bot.sendTypingOn(recipientId);authentication(recipientId).then(function(){Parse.Cloud.run('getProducts',{businessId:BUSINESS_ID}).then(function(result){if(result.pointSaleIsOpen){if(typeof index=='undefined')index=0;else if(typeof index=='string')index=parseInt(index);if(index==0){renderCategoriesInitialMessage(recipientId);bot.sendTypingOn(recipientId);}renderCategories(recipientId,result.categories,index);}else{sendScheduleRestriction(recipientId,result.pointSaleSchedules);}},function(error){console.log('error');console.log(error);});});}function splitCategories(recipientId,categories,index){var customer=(0,_localStore.getData)(recipientId,'customer');var image_url=void 0;var idx=0;var elements=[];categories.forEach(function(item){if(item&&item.get('name')){if(idx>=index*bot.limit&&idx<(index+1)*bot.limit){var image=item.get('image');image_url=typeof image!='undefined'?image.url():customer.image.url;elements.push({title:item.get('name'),image_url:image_url,buttons:[{type:\"postback\",title:'Ver categora',payload:\"SendProducts-\"+item.id+\"-0\"}]});}idx=idx+1;}});return elements;}function renderCategories(recipientId,categories,index){var elements=splitCategories(recipientId,categories,index);var idx=Object.keys(categories).length;var buttons=[];var catIni=(index+1)*bot.limit;var catFin=idx>catIni+bot.limit?catIni+bot.limit:idx;if(idx>(index+1)*bot.limit){buttons.push({type:\"postback\",title:\"Categoras \"+(catIni+1)+\"-\"+catFin,payload:\"SendCategories-\"+(index+1)});elements.push({title:\"Ver ms categorias \",subtitle:\"Categoras disponibles\",buttons:buttons});}return bot.sendTypingOff(recipientId).then(function(){return bot.sendGenericMessage(recipientId,elements);});}function renderProductsInitialMessage(recipientId,categoryId){return new Parse.Query(_ParseModels.Category).get(categoryId).then(function(category){return bot.sendTypingOff(recipientId).then(function(){return bot.sendTextMessage(recipientId,\"Selecciona \"+category.get('name')+\":\");});},function(object,error){console.log(error);});}function sendProducts(recipientId,categoryId,proIdx){bot.sendTypingOn(recipientId);proIdx=parseInt(proIdx);if(proIdx==0){renderProductsInitialMessage(recipientId,categoryId);bot.sendTypingOn(recipientId);}Parse.Cloud.run('getProducts',{businessId:BUSINESS_ID,category:categoryId}).then(function(result){if(result.hasOwnProperty('categories')){renderCategories(recipientId,result.categories,0);}else{if(result.products.length==0){renderEmptyProducts(recipientId);}else{renderProducts(recipientId,categoryId,result.products,proIdx);}}},function(error){console.log('error');console.log(error);});}function splitProducts(recipientId,products,proIdx){var customer=(0,_localStore.getData)(recipientId,'customer');var image_url=void 0;var idx=0;var elements=[];products.forEach(function(product){if(product&&product.get('name')){if(idx>=proIdx*bot.limit&&idx<(proIdx+1)*bot.limit){var image=product.get('image');image_url=typeof image!='undefined'?image.url():customer.image.url;elements.push({title:product.get('name')+\": $\"+product.get('priceDefault'),subtitle:product.get('description'),image_url:image_url,buttons:[{type:\"postback\",title:\"Agregar\",payload:\"AddProduct-\"+product.id},{type:\"postback\",title:'Ver descripcin',payload:\"SendProductDescription-\"+product.id}]});}idx=idx+1;}});return elements;}function renderProducts(recipientId,categoryId,products,index){var elements=splitProducts(recipientId,products,index);var idx=Object.keys(products).length;var buttons=[];var catIni=(index+1)*bot.limit;var catFin=idx>catIni+bot.limit?catIni+bot.limit:idx;if(idx>(index+1)*bot.limit){buttons.push({type:\"postback\",title:\"Productos \"+(catIni+1)+\"-\"+catFin,payload:\"SendProducts-\"+categoryId+\"-\"+(index+1)});elements.push({title:\"Ver ms productos \",subtitle:\"Productos disponibles\",buttons:buttons});}return bot.sendTypingOff(recipientId).then(function(){return bot.sendGenericMessage(recipientId,elements);});}function renderEmptyProducts(recipientId){return bot.sendTypingOff(recipientId).then(function(){return bot.sendQuickReplyMessage(recipientId,\"No existen productos en esta categora\",[{\"content_type\":\"text\",\"title\":\"Seguir pidiendo\",\"payload\":\"SendContinueOrder\"},{\"content_type\":\"text\",\"title\":\"Ver carrito\",\"payload\":\"SendCart\"}]);});}function createCart(recipientId){var userData=(0,_localStore.getData)(recipientId);Object.assign(userData,{'cart':{items:new Map()}});return userData.cart;}function addProduct(recipientId,productId){var cart=(0,_localStore.getData)(recipientId,'cart');if(typeof cart=='undefined'){cart=createCart(recipientId);}var items=cart.items;new Parse.Query(_ParseModels.Product).get(productId).then(function(product){var productObject=(0,_parseUtils.extractParseAttributes)(product);var item=items.get(productId);var promises=[];if(typeof item=='undefined'){items.set(productId,{quantity:1,price:productObject.priceDefault});item=items.get(productId);}else{item.quantity+=1;}if(typeof item.modifiers=='undefined'){item.modifiers=[];}if(typeof productObject.modifiers!='undefined'){productObject.modifiers.forEach(function(obj,index,array){promises.push(new Parse.Query(_ParseModels.Modifier).get(obj.objectId).then(function(modifier){return(0,_parseUtils.extractParseAttributes)(modifier);}));});}Parse.Promise.when(promises).then(function(modifiers){var undefinedModifiers=checkModifiers(recipientId,productId,modifiers);console.log(undefinedModifiers);//checkModifiersComplete(recipientId, productId, modifiers).then(result =>{\n//    console.log('result: '+result);\n//});\nif(undefinedModifiers.length>0){//Show multiples modifiers\npromises=[];undefinedModifiers[0].items.forEach(function(modifierItem){promises.push(new Parse.Query(_ParseModels.ModifierItem).get(modifierItem.objectId).then(function(modifierItem){return(0,_parseUtils.extractParseAttributes)(modifierItem);}));});Parse.Promise.when(promises).then(function(modifierItems){renderModifierMenu(recipientId,productId,undefinedModifiers[0],modifierItems);});}else{saveCart(recipientId);renderAddProduct(recipientId,productId);}});},function(object,error){console.log(error);});}function renderAddProduct(recipientId,productId){return new Parse.Query(_ParseModels.Product).get(productId).then(function(product){return bot.sendTypingOff(recipientId).then(function(){return bot.sendQuickReplyMessage(recipientId,\"El producto \"+product.get('name')+\" ha sido agregado.\\n\\nDeseas seguir pidiendo o ver tu carrito?\",[{\"content_type\":\"text\",\"title\":\"Seguir pidiendo\",\"payload\":\"SendContinueOrder\"},{\"content_type\":\"text\",\"title\":\"Ver carrito\",\"payload\":\"SendCart\"}]);});},function(object,error){console.log(error);});}function sendContinueOrder(recipientId){renderContinueOrder(recipientId).then(function(){sendCategories(recipientId,0);});}function renderContinueOrder(recipientId){return bot.sendTypingOff(recipientId).then(function(){bot.sendTextMessage(recipientId,\"Puedes escribir el nombre de un producto, ej: Ensalada mediterranea, o seleccionarlo en el siguiente men:\");});}function renderModifierMenu(recipientId,productId,modifier,items){var quick_replies=[];items.forEach(function(item){if(quick_replies.length<=bot.limit){quick_replies.push({\"content_type\":\"text\",\"title\":item.name,\"payload\":\"AddModifier-\"+productId+\"-\"+modifier.objectId+\"-\"+item.objectId});}});return bot.sendTypingOff(recipientId).then(function(){return bot.sendQuickReplyMessage(recipientId,\"Escoge \"+modifier.name+\":\",quick_replies);});}function addModifier(recipientId,productId,modifierId,itemId){var cart=(0,_localStore.getData)(recipientId,'cart');var items=cart.items;var item=items.get(productId);var orderItemModifier=new _ParseModels.OrderItemModifier();orderItemModifier.set('modifier',{__type:\"Pointer\",className:\"Modifier\",objectId:modifierId});orderItemModifier.set('modifierItem',{__type:\"Pointer\",className:\"ModifierItem\",objectId:itemId});//orderItemModifier.set('price', itemId.price)\norderItemModifier.save(undefined,{success:function success(result){item.modifiers.push({__type:\"Pointer\",className:\"OrderItemModifier\",objectId:result.id});saveCart(recipientId);renderAddProduct(recipientId,productId);},error:function error(user,_error4){console.log('Failed to create new object, with error code: '+_error4.message);}});}function checkModifiers(recipientId,productId,modifiers){var cart=(0,_localStore.getData)(recipientId,'cart');var items=cart.items;var item=items.get(productId);var exist=false;var result=[];modifiers.forEach(function(modifier){exist=false;item.modifiers.forEach(function(itemModifier){console.log(itemModifier.objectId);//exist true\n});if(!exist){result.push(modifier);}});return result;}function checkModifiersComplete(recipientId,productId,modifiers){var cart=(0,_localStore.getData)(recipientId,'cart');var items=cart.items;var item=items.get(productId);var promises=[];console.log(modifiers);console.log(modifiers.length);console.log(cart.items);console.log(item);console.log(item.modifiers.length);if(modifiers.length!=item.modifiers.length){promises=[];modifiers.forEach(function(modifier){modifier.items.forEach(function(modifierItem){promises.push(new Parse.Query(_ParseModels.ModifierItem).get(modifierItem.objectId).then(function(modifierItem){return(0,_parseUtils.extractParseAttributes)(modifierItem);}));});return Parse.Promise.when(promises).then(function(elements){renderModifierMenu(recipientId,productId,modifier,elements);return true;});});}}function removeProduct(recipientId,productId){var cart=(0,_localStore.getData)(recipientId,'cart');if(cart==undefined){cart=createCart(recipientId);}var items=cart.items;var item=items.get(productId);new Parse.Query(_ParseModels.OrderItem).get(item.id,{success:function success(orderItem){orderItem.destroy({});items.delete(productId);var itemsPointers=[];var _iteratorNormalCompletion4=true;var _didIteratorError4=false;var _iteratorError4=undefined;try{for(var _iterator4=items[Symbol.iterator](),_step4;!(_iteratorNormalCompletion4=(_step4=_iterator4.next()).done);_iteratorNormalCompletion4=true){var _step4$value=_slicedToArray(_step4.value,2),key=_step4$value[0],value=_step4$value[1];itemsPointers.push({\"__type\":\"Pointer\",\"className\":\"OrderItem\",\"objectId\":value.id});}}catch(err){_didIteratorError4=true;_iteratorError4=err;}finally{try{if(!_iteratorNormalCompletion4&&_iterator4.return){_iterator4.return();}}finally{if(_didIteratorError4){throw _iteratorError4;}}}cart.itemsPointers=itemsPointers;if(items.size==0){sendCart(recipientId);}else{sendCartDetails(recipientId);}},error:function error(orderItem,_error5){console.log('error');console.log(_error5);}});}function increaseOneProduct(recipientId,productId){var cart=(0,_localStore.getData)(recipientId,'cart');if(cart==undefined){cart=createCart(recipientId);}var items=cart.items;var item=items.get(productId);item.quantity++;new Parse.Query(_ParseModels.OrderItem).get(item.id,{success:function success(orderItem){orderItem.set('amount',item.quantity);orderItem.save();sendCartDetails(recipientId);},error:function error(orderItem,_error6){console.log('error');console.log(_error6);}});}function decreaseOneProduct(recipientId,productId){var cart=(0,_localStore.getData)(recipientId,'cart');if(cart==undefined){cart=createCart(recipientId);}var items=cart.items;var item=items.get(productId);item.quantity--;if(item.quantity>0){new Parse.Query(_ParseModels.OrderItem).get(item.id,{success:function success(orderItem){orderItem.set('amount',item.quantity);orderItem.save();sendCartDetails(recipientId);},error:function error(orderItem,_error7){console.log('error');console.log(_error7);}});}else{removeProduct(recipientId,productId);}}function sendProductDescription(recipientId,productId){var product=new _ParseModels.Product();new Parse.Query(product).get(productId).then(function(product){return bot.sendTypingOff(recipientId).then(function(){return bot.sendQuickReplyMessage(recipientId,product.get('name')+\": \"+product.get('description'),[{\"content_type\":\"text\",\"title\":\"Agregar\",\"payload\":\"AddProduct-\"+productId},{\"content_type\":\"text\",\"title\":\"Seguir pidiendo\",\"payload\":\"SendContinueOrder\"},{\"content_type\":\"text\",\"title\":\"Ver carrito\",\"payload\":\"SendCart\"}]);});},function(object,error){console.log(error);});}function saveCart(recipientId){var consumerCart=new _ParseModels.Cart();var consumer=(0,_localStore.getData)(recipientId,'consumer');var address=(0,_localStore.getData)(recipientId,'address');var cart=(0,_localStore.getData)(recipientId,'cart');var paymentMethod=(0,_localStore.getData)(recipientId,'paymentMethod');var items=[];var item=void 0;var _iteratorNormalCompletion5=true;var _didIteratorError5=false;var _iteratorError5=undefined;try{for(var _iterator5=cart.items[Symbol.iterator](),_step5;!(_iteratorNormalCompletion5=(_step5=_iterator5.next()).done);_iteratorNormalCompletion5=true){var _step5$value=_slicedToArray(_step5.value,2),id=_step5$value[0],properties=_step5$value[1];item=new _ParseModels.OrderItem();if(properties.hasOwnProperty('id')){item.set('id',properties.id);}item.set('product',{__type:\"Pointer\",className:\"Product\",objectId:id});item.set('price',properties.price);item.set('amount',properties.quantity);item.set('modifiers',properties.modifiers);item.set('modifiersGroups',[]);items.push(item);}}catch(err){_didIteratorError5=true;_iteratorError5=err;}finally{try{if(!_iteratorNormalCompletion5&&_iterator5.return){_iterator5.return();}}finally{if(_didIteratorError5){throw _iteratorError5;}}}Parse.Object.saveAll(items,{success:function success(result){var itemsPointers=[];var _iteratorNormalCompletion6=true;var _didIteratorError6=false;var _iteratorError6=undefined;try{for(var _iterator6=result[Symbol.iterator](),_step6;!(_iteratorNormalCompletion6=(_step6=_iterator6.next()).done);_iteratorNormalCompletion6=true){var _item=_step6.value;var itemId=_item.get('product').objectId;cart.items.get(itemId).id=_item.id;itemsPointers.push({\"__type\":\"Pointer\",\"className\":\"OrderItem\",\"objectId\":_item.id});}}catch(err){_didIteratorError6=true;_iteratorError6=err;}finally{try{if(!_iteratorNormalCompletion6&&_iterator6.return){_iterator6.return();}}finally{if(_didIteratorError6){throw _iteratorError6;}}}if(cart.hasOwnProperty('id')){consumerCart.set('id',cart.id);}if(typeof paymentMethod!='undefined'){consumerCart.set('paymentMethod',paymentMethod.method);}consumerCart.set('consumerAddress',{__type:\"Pointer\",className:\"ConsumerAddress\",objectId:address.objectId});consumerCart.set('consumer',{__type:\"Pointer\",className:\"Consumer\",objectId:consumer.objectId});consumerCart.set('items',itemsPointers);consumerCart.save(undefined,{success:function success(result){cart['id']=result.id;cart['rawParseObject']=result;cart['itemsPointers']=itemsPointers;},error:function error(user,_error8){console.log('Failed to create new object, with error code: '+_error8.message);}});},error:function error(user,_error9){console.log('Failed to create new object, with error code: '+_error9.message);}});}function saveOrder(recipientId){var order=new _ParseModels.Order();var consumer=(0,_localStore.getData)(recipientId,'consumer');var customer=(0,_localStore.getData)(recipientId,'customer');var cart=(0,_localStore.getData)(recipientId,'cart');var address=(0,_localStore.getData)(recipientId,'address');var paymentMethod=(0,_localStore.getData)(recipientId,'paymentMethod');var pointSale=(0,_localStore.getData)(recipientId,'pointSale');var state0=orderStates.get(0);var total=0;cart.items.forEach(function(value,key){total+=value.quantity*value.price;});order.set('consumer',{__type:'Pointer',className:'Consumer',objectId:consumer.objectId});order.set('consumerAddress',{__type:'Pointer',className:'ConsumerAddress',objectId:address.objectId});order.set('pointSale',{__type:'Pointer',className:'CustomerPointSale',objectId:pointSale.objectId});order.set('state',{__type:'Pointer',className:'OrderState',objectId:state0.objectId});order.set('items',cart.itemsPointers);order.set('deliveryCost',pointSale.deliveryCost);order.set('total',total);order.set('paymentMethod',paymentMethod.method);order.set('name',consumer.name);order.set('email',consumer.email);order.set('phone',consumer.phone);order.set('platform','Bot');order.save(undefined,{success:function success(order){store.dispatch(Actions.setOrder(recipientId,order)).then(function(){clearCart(recipientId);});},error:function error(user,_error10){console.log('Failed to create new object, with error code: '+_error10.message);console.log(_error10);}});}function sendPurchaseOptions(recipientId){return bot.sendTypingOn(recipientId).then(function(){return bot.sendTypingOff(recipientId).then(function(){return bot.sendQuickReplyMessage(recipientId,\"Tenemos las siguientes opciones disponibles:\",[{\"content_type\":\"text\",\"title\":\"Ver categorias\",\"payload\":\"SendCategories-0\"},{\"content_type\":\"text\",\"title\":\"Ver carrito\",\"payload\":\"SendCart\"}]);});});}function sendEmptyCartOptions(recipientId){return bot.sendTypingOn(recipientId).then(function(){return bot.sendTypingOff(recipientId).then(function(){return bot.sendQuickReplyMessage(recipientId,\"Tenemos las siguientes opciones disponibles:\",[{\"content_type\":\"text\",\"title\":\"Ver categorias\",\"payload\":\"SendCategories-0\"},{\"content_type\":\"text\",\"title\":\"Mis rdenes\",\"payload\":\"SendOrders\"}]);});});}function sendCart(recipientId){authentication(recipientId).then(function(){var user=(0,_localStore.getData)(recipientId,'user');var customer=(0,_localStore.getData)(recipientId,'customer');var consumer=(0,_localStore.getData)(recipientId,'consumer');var cart=(0,_localStore.getData)(recipientId,'cart');var address=(0,_localStore.getData)(recipientId,'address');var customer_image_url=void 0;if(typeof customer!='undefined'){customer_image_url=customer.image.url;}if(cart==undefined){cart=createCart(recipientId);}var items=cart.items;bot.sendTypingOn(recipientId);var elements=[];var element={};var total=0;var orderLimit=items.size;var ind=0;var image=void 0;var image_url=void 0;if(orderLimit==0){renderCartEmpty(recipientId).then(function(){sendEmptyCartOptions(recipientId);});}else{items.forEach(function(value,key){var product=new Parse.Query(_ParseModels.Product);product.get(key,{success:function success(item){image=item.get('image');image_url=customer_image_url;if(image){image_url=image.url();}element={};element['title']=item.get('name');element['subtitle']=item.get('description');element['quantity']=value.quantity;element['price']=parseInt(item.get('priceDefault'));element['currency']=\"COP\";element['image_url']=image_url;elements.push(element);total+=element['quantity']*element['price'];ind++;if(ind==orderLimit){renderCart(recipientId,cart.id,elements,total);}},error:function error(_error11){alert(\"Error: \"+_error11.code+\" \"+_error11.message);}});});}});}function renderCart(recipientId,cartId,elements,total){var user=(0,_localStore.getData)(recipientId,'user');var consumer=(0,_localStore.getData)(recipientId,'consumer');var address=(0,_localStore.getData)(recipientId,'address');var pointSale=(0,_localStore.getData)(recipientId,'pointSale');var payment_method=(0,_localStore.getData)(recipientId,'payment_method');var addressData=undefined;if(typeof payment_method=='undefined'){payment_method={name:'Sin definir'};}if(typeof address!='undefined'){addressData={street_1:address.address?address.address:'Direccin no definida',street_2:address.description?address.description:'Sin complemento',city:address.city?address.city:'No definida',postal_code:address.postalCode?address.postalCode:'No definido',state:address.state?address.state:'No definido',country:address.countryCode?address.countryCode:'No definido'};}return bot.sendTypingOff(recipientId).then(function(){return bot.sendReceiptMessage(recipientId,{template_type:\"receipt\",recipient_name:user.first_name+\" \"+user.last_name,order_number:cartId,currency:\"COP\",payment_method:payment_method.name,timestamp:Math.trunc(Date.now()/1000).toString(),elements:elements,address:addressData,summary:{subtotal:total,shipping_cost:pointSale.deliveryCost,total_cost:total+pointSale.deliveryCost}},[{\"content_type\":\"text\",\"title\":\"Finalizar pedido\",\"payload\":\"CheckOrder\"},{\"content_type\":\"text\",\"title\":\"Seguir Pidiendo\",\"payload\":\"SendContinueOrder\"},{\"content_type\":\"text\",\"title\":\"Modificar carrito\",\"payload\":\"SendCartDetails\"},{\"content_type\":\"text\",\"title\":\"Borrar carrito\",\"payload\":\"ClearAndSendCart\"}]);});}function sendCartDetails(recipientId){bot.sendTypingOn(recipientId);renderCartDetails(recipientId).then(function(){renderEditCartOptions(recipientId);});}function renderCartDetails(recipientId){var cart=(0,_localStore.getData)(recipientId,'cart');var customer=(0,_localStore.getData)(recipientId,'customer');var consumer=(0,_localStore.getData)(recipientId,'consumer');var image_url=customer.image.url;var items=cart.items;var promises=[];items.forEach(function(value,key){if(promises.length<=bot.limit){promises.push(new Parse.Query(_ParseModels.Product).get(key).then(function(product){var image=product.get('image');if(image){image_url=image.url();}return{\"title\":product.get('name')+\": $\"+value.price,\"subtitle\":\"Cantidad solicitada: \"+value.quantity,\"image_url\":image_url,\"buttons\":[{\"type\":\"postback\",\"title\":\"Quitar\",\"payload\":\"RemoveProduct-\"+key},{\"type\":\"postback\",\"title\":\"Aumentar 1\",\"payload\":\"IncreaseOneProduct-\"+key},{\"type\":\"postback\",\"title\":\"Disminuir 1\",\"payload\":\"DecreaseOneProduct-\"+key}]};}));}});return Parse.Promise.when(promises).then(function(elements){return bot.sendTypingOff(recipientId).then(function(){return bot.sendGenericMessage(recipientId,elements);});});}function renderEditCartOptions(recipientId){return bot.sendQuickReplyMessage(recipientId,\"Opciones del carrito:\",[{\"content_type\":\"text\",\"title\":\"Finalizar pedido\",\"payload\":\"CheckOrder\"},{\"content_type\":\"text\",\"title\":\"Seguir pidiendo\",\"payload\":\"SendContinueOrder\"}]);}function renderCartEmpty(recipientId){return bot.sendTypingOff(recipientId).then(function(){return bot.sendTextMessage(recipientId,\"Tu carrito de compras est vaco.\");});}function editCart(recipientId){var cart=(0,_localStore.getData)(recipientId,'cart');bot.sendTypingOn(recipientId);return bot.sendTypingOff(recipientId).then(function(){return bot.sendGenericMessage(recipientId,[{\"title\":\"Opciones\",\"image_url\":SERVER_URL+\"assets/thinking.jpg\",\"buttons\":[{\"type\":\"web_url\",\"url\":SERVER_URL+\"cart?\"+cart.id,\"title\":\"Remover producto\",\"webview_height_ratio\":\"full\",\"messenger_extensions\":true}]}]);});}function clearCart(recipientId){var cart=(0,_localStore.getData)(recipientId,'cart');if(typeof cart!='undefined'){(function(){var items=cart.items;cart.itemsPointers=[];items.forEach(function(value,key){items.delete(key);});})();}return new _promise2.default(function(resolve,reject){resolve();});}function clearAndSendCart(recipientId){clearCart(recipientId).then(function(){sendCart(recipientId);});}function checkOrder(recipientId){var cart=(0,_localStore.getData)(recipientId,'cart');var consumer=(0,_localStore.getData)(recipientId,'consumer');var pointSale=(0,_localStore.getData)(recipientId,'pointSale');var total=0;cart.items.forEach(function(value,key){total+=value.quantity*value.price;});if(pointSale.minOrderPrice&&pointSale.minOrderPrice>total){sendMinOrderPriceRestriction(recipientId);}else if(typeof consumer.phone=='undefined'||consumer.phone==''){setTelephone(recipientId);}else if(typeof consumer.email=='undefined'||consumer.email==''){setEmail(recipientId);}else{checkPayment(recipientId);}}function checkAddress(recipientId){}function checkPayment(recipientId){bot.sendTypingOn(recipientId);store.dispatch(Actions.loadPaymentMethods(recipientId)).then(function(){renderCheckPayment(recipientId);});}function renderCheckPayment(recipientId){var paymentMethods=(0,_localStore.getData)(recipientId,'paymentMethods');var quick_replies=[];for(var i in paymentMethods){quick_replies.push({\"content_type\":\"text\",\"title\":paymentMethods[i].name.substring(0,20),\"payload\":\"Checkout-\"+paymentMethods[i].objectId});}return bot.sendTypingOff(recipientId).then(function(){return bot.sendQuickReplyMessage(recipientId,\"Como vas a pagar tu pedido? (Tu pedido se cobra cuando lo recibes)\",quick_replies);});}function checkout(recipientId,id){bot.sendTypingOn(recipientId);store.dispatch(Actions.setPaymentMethod(recipientId,id)).then(function(){var paymentMethod=(0,_localStore.getData)(recipientId,'paymentMethod');var paymentFunction=paymentTypes.get(paymentMethod.method.objectId);paymentFunction(recipientId);});}function sendMinOrderPriceRestriction(recipientId){renderMinOrderPriceRestriction(recipientId).then(function(){sendPurchaseOptions(recipientId);});}function renderMinOrderPriceRestriction(recipientId){var pointSale=(0,_localStore.getData)(recipientId,'pointSale');return bot.sendTypingOff(recipientId).then(function(){return bot.sendTextMessage(recipientId,\"El valor minimo de una orden con domicilio es \"+pointSale.minOrderPrice+\", \\npor favor modifica tu pedido para cumplir este requisito\");});}function sendScheduleRestriction(recipientId,pointSaleSchedules){var pointSale=(0,_localStore.getData)(recipientId,'pointSale');var days=['Domingo','Lunes','Martes','Miercoles','Jueves','Viernes','Sabado','Domingo'];var text='En este momento nuestros puntos de venta estan cerrados, \\npor favor solicita tu domicilio en los siguientes horarios:\\n\\n';var _iteratorNormalCompletion7=true;var _didIteratorError7=false;var _iteratorError7=undefined;try{for(var _iterator7=pointSaleSchedules[Symbol.iterator](),_step7;!(_iteratorNormalCompletion7=(_step7=_iterator7.next()).done);_iteratorNormalCompletion7=true){var pointSaleSchedule=_step7.value;var daysActive=pointSaleSchedule.get('daysActive');var allDay=pointSaleSchedule.get('allDay');for(var dayID in daysActive){if(daysActive.length-1!=dayID){text+=days[daysActive[dayID]-1]+\", \";}else{text+=\"y \"+days[daysActive[dayID]-1]+\" \";}}if(allDay){text+='las 24 horas\\n';}else{text+=\"desde las \"+pointSaleSchedule.get('hourStart')+\" \";text+=\"hasta las \"+pointSaleSchedule.get('hourEnd');}text+=\"\\n\";}}catch(err){_didIteratorError7=true;_iteratorError7=err;}finally{try{if(!_iteratorNormalCompletion7&&_iterator7.return){_iterator7.return();}}finally{if(_didIteratorError7){throw _iteratorError7;}}}renderScheduleRestriction(recipientId,text).then(function(){sendMenu(recipientId);});}function renderScheduleRestriction(recipientId,text){return bot.sendTypingOff(recipientId).then(function(){return bot.sendTextMessage(recipientId,text);});}function sendCash(recipientId){saveCart(recipientId);renderCash(recipientId).then(function(){orderConfirmation(recipientId);});}function renderCash(recipientId){var paymentMethod=(0,_localStore.getData)(recipientId,'paymentMethod');return bot.sendTypingOff(recipientId).then(function(){return bot.sendTextMessage(recipientId,\"Se ha registrado el pago con \"+paymentMethod.name);});}function registerCreditCard(recipientId){bot.sendTypingOn(recipientId);authentication(recipientId).then(function(){var consumer=(0,_localStore.getData)(recipientId,'consumer');return bot.sendTypingOff(recipientId).then(function(){return bot.sendGenericMessage(recipientId,[{\"title\":\"Registro de tarjeta de credito y finalizacin de tu pedido.\\n\\nEstas de acuerdo?\",\"image_url\":SERVER_URL+\"assets/images/creditCards.jpg\",\"subtitle\":\"Por razones de seguridad te redireccionaremos a una pgina web segura.\",\"buttons\":[{\"type\":\"web_url\",\"title\":\"Si\",\"url\":SERVER_URL+\"creditCard?id=\"+consumer.objectId,\"webview_height_ratio\":\"full\",\"messenger_extensions\":true},{\"type\":\"postback\",\"title\":\"No\",\"payload\":\"CancelRegisterCreditCard\"}]}]);});});}function registerCreditCardAndPay(recipientId){bot.setDataBuffer(recipientId,'creditCardPayload','SendCreditCards');registerCreditCard(recipientId);}function cancelRegisterCreditCard(recipientId){bot.sendTypingOn(recipientId);var userBuffer=bot.buffer[recipientId];renderCancelRegisterCreditCard(recipientId).then(function(){if(typeof userBuffer!='undefined'&&userBuffer.hasOwnProperty('creditCardPayload')){checkPayment(recipientId);}else{sendAccount(recipientId);}});}function renderCancelRegisterCreditCard(recipientId){return bot.sendTypingOff(recipientId).then(function(){return bot.sendTextMessage(recipientId,\"Si no ingresas los datos de tu tarjeta en nuestro sitio seguro, no podras comprar con tarjeta online\");});}function sendRegisteredCreditCards(recipientId){bot.sendTypingOn(recipientId);var user=(0,_localStore.getData)(recipientId,'user');var consumer=(0,_localStore.getData)(recipientId,'consumer');_ParseModels.CreditCard.loadInStore(store,recipientId,user).then(function(){var creditCards=(0,_localStore.getData)(recipientId,'creditCards');if(creditCards.length==0){renderNoRegisteredCreditCards(recipientId);}else{renderRegisteredCreditCards(recipientId);}});}function renderNoRegisteredCreditCards(recipientId){return bot.sendTypingOff(recipientId).then(function(){return bot.sendQuickReplyMessage(recipientId,\"Aun no tienes tarjetas registradas, deseas registrar una tarjeta?\",[{\"content_type\":\"text\",\"title\":\"Si\",\"payload\":\"RegisterCreditCardAndPay\"},{\"content_type\":\"text\",\"title\":\"No\",\"payload\":\"CheckPayment\"}]);});}function renderRegisteredCreditCards(recipientId){var creditCards=(0,_localStore.getData)(recipientId,'creditCards');var quick_replies=[];quick_replies.push({\"content_type\":\"text\",\"title\":\"Agregar tarjeta\",\"payload\":\"RegisterCreditCardAndPay\"});var _iteratorNormalCompletion8=true;var _didIteratorError8=false;var _iteratorError8=undefined;try{for(var _iterator8=creditCards[Symbol.iterator](),_step8;!(_iteratorNormalCompletion8=(_step8=_iterator8.next()).done);_iteratorNormalCompletion8=true){var card=_step8.value;if(quick_replies.length<bot.limit){quick_replies.push({\"content_type\":\"text\",\"title\":card.type+\" \"+card.lastFour,\"payload\":\"PayWithCreditCard-\"+card.lastFour});}}}catch(err){_didIteratorError8=true;_iteratorError8=err;}finally{try{if(!_iteratorNormalCompletion8&&_iterator8.return){_iterator8.return();}}finally{if(_didIteratorError8){throw _iteratorError8;}}}return bot.sendTypingOff(recipientId).then(function(){return bot.sendQuickReplyMessage(recipientId,\"Con cual tarjeta quieres pagar?\",quick_replies);});}function payWithCreditCard(recipientId,creditCardId){bot.sendTypingOn(recipientId);orderConfirmation(recipientId);}function orderConfirmation(recipientId){bot.sendTypingOn(recipientId);saveOrder(recipientId);renderOrderConfirmation(recipientId).then(function(){bot.sendTypingOff(recipientId);});}function renderOrderConfirmation(recipientId){var state0=orderStates.get(0);return bot.sendTextMessage(recipientId,state0.messagePush+\"\\n\\nEn un momento te estaremos dando informacin en tiempo real sobre tu pedido\");}function orderState(recipientId){bot.sendTypingOn(recipientId);renderOrderState(recipientId).then(function(){orderSent(recipientId);});}function renderOrderState(recipientId){return bot.sendTypingOff(recipientId).then(function(){return bot.sendTextMessage(recipientId,\"Tu pedido ha sido Aceptado. \\n\\nLo estan preparando en nuestra sede y te lo enviaremos en aproximadamente 10 minutos\");});}function orderSent(recipientId){bot.sendTypingOn(recipientId);renderOrderSent(recipientId).then(function(){serviceRating(recipientId);});}function renderOrderSent(recipientId){return bot.sendTypingOff(recipientId).then(function(){return bot.sendTextMessage(recipientId,\"Buenas noticias, Tu pedido ha sido Enviado. \\n\\nHaz click en el mapa para vel tu pedido\");});}function sendOrderState(recipientId){var orderState=(0,_localStore.getData)(recipientId,'orderState');bot.sendTypingOn(recipientId);renderOrderState(recipientId).then(function(){if(orderState.order==5){serviceRating(recipientId);}});}function renderOrderState(recipientId){var orderState=(0,_localStore.getData)(recipientId,'orderState');if(orderState.order==6){return new _promise2.default(function(resolve,reject){resolve();});}else{return bot.sendTypingOff(recipientId).then(function(){return bot.sendTextMessage(recipientId,orderState.messagePush);});}}function serviceRating(recipientId){return bot.sendTypingOn(recipientId).then(function(){return bot.sendTypingOff(recipientId).then(function(){return bot.sendQuickReplyMessage(recipientId,\"Califica tu experiencia para ayudarnos a mejorar. \\n\\nDe 1 a 5 cuantas extrellas merece nuestro servicio?\",[{\"content_type\":\"text\",\"title\":\"5 (Excelente)\",\"payload\":\"SetScore-5\"},{\"content_type\":\"text\",\"title\":\"4 (Bien)\",\"payload\":\"SetScore-4\"},{\"content_type\":\"text\",\"title\":\"3 (Regular)\",\"payload\":\"SetScore-3\"},{\"content_type\":\"text\",\"title\":\"2 (Mal)\",\"payload\":\"SetScore-2\"},{\"content_type\":\"text\",\"title\":\"2 (Muy mal)\",\"payload\":\"SetScore-1\"}]);});});}function setScore(recipientId,score){var order=(0,_localStore.getData)(recipientId,'order');bot.sendTypingOn(recipientId);Parse.Cloud.run('rateOrder',{orderId:order.objectId,score:Number(score),comment:''}).then(function(result){thank(recipientId);},function(error){console.log('error');console.log(error);});}function thank(recipientId){return bot.sendTypingOn(recipientId).then(function(){return bot.sendTypingOff(recipientId).then(function(){return bot.sendTextMessage(recipientId,\"Gracias, esperamos tener el gusto de atenderle nuevamente\");});});}function searchProducts(recipientId,query,index){bot.sendTypingOn(recipientId);Parse.Cloud.run('search',{businessId:BUSINESS_ID,q:query}).then(function(result){if(result.length==0){renderSearchEmpty(recipientId);}else if(result.length==1&&result[0].type=='Category'){sendProducts(recipientId,result[0].id,0);}else{if(index==undefined)index=0;else if(typeof index=='string')index=parseInt(index);if(index==0){renderSearchInitial(recipientId);bot.sendTypingOn(recipientId);}splitSearchResult(recipientId,result,index).then(function(elements){var idx=Object.keys(result).length;var buttons=[];var catIni=(index+1)*bot.limit;var catFin=idx>catIni+bot.limit?catIni+bot.limit:idx;if(idx>(index+1)*bot.limit){buttons.push({type:\"postback\",title:\"Productos \"+(catIni+1)+\"-\"+catFin,payload:\"Search-\"+(index+1)});elements.push({title:\"Ver ms productos \",subtitle:\"Productos disponibles\",buttons:buttons});}return bot.sendTypingOff(recipientId).then(function(){return bot.sendGenericMessage(recipientId,elements);});});}},function(error){console.log('error');console.log(error);});}function renderSearchInitial(recipientId){return bot.sendTypingOff(recipientId).then(function(){return bot.sendTextMessage(recipientId,\"Se han encontrado los siguientes productos:\");});}function renderSearchEmpty(recipientId){return bot.sendTypingOff(recipientId).then(function(){return bot.sendTextMessage(recipientId,\"No se han encontrado productos que coincidan\");});}function splitSearchResult(recipientId,products,index){var customer=(0,_localStore.getData)(recipientId,'customer');var image_url=void 0;var idx=0;var elements=[];var promises=[];products.forEach(function(item){if(item&&item.name&&item.type=='Product'){if(idx>=index*bot.limit&&idx<(index+1)*bot.limit){promises.push(new Parse.Query(_ParseModels.Product).get(item.id).then(function(product){return(0,_parseUtils.extractParseAttributes)(product);}));idx=idx+1;}}});return Parse.Promise.when(promises).then(function(productObjects){productObjects.forEach(function(product){var image=product.image;image_url=typeof image!='undefined'?image.url:customer.image.url;elements.push({title:product.name+\": $\"+product.priceDefault,subtitle:product.description,image_url:image_url,buttons:[{type:\"postback\",title:'Agregar',payload:\"AddProduct-\"+product.objectId},{type:\"postback\",title:'Ver descripcin',payload:\"SendProductDescription-\"+product.objectId}]});});return elements;});//    subtitle: item.get('description'),\n}function sendHelp(recipientId){bot.sendTypingOn(recipientId);renderHelp(recipientId).then(function(){sendContactUs(recipientId);});}function renderHelp(recipientId){return bot.sendTypingOff(recipientId).then(function(){return bot.sendTextMessage(recipientId,\"InOut Bot.\\n\\nTe permite visualizar las opciones de productos, agregarlos al carrito y realizar tu compra por medio del chat de facebook.\\n\\nFuncionalidades disponibles: \\n\\n'Hola', para iniciar la conversacin\\n'Pedir Domicilio', si quieres realizar un domicilio\\n'Carrito', para ver el estado actual de tu carrito\");});}function sendContactUs(recipientId){return bot.sendTypingOn(recipientId).then(function(){return bot.sendTypingOff(recipientId).then(function(){return bot.sendTextMessage(recipientId,\" Para mayor informacin puedes contactarnos en:\\n\\n Web: http://www.inoutdelivery.com/\\n\\n Email: soporte@inoutdelivery.com\");});});}function sendOrders(recipientId){bot.sendTypingOn(recipientId);authentication(recipientId).then(function(){var consumer=(0,_localStore.getData)(recipientId,'consumer');Parse.Cloud.run('ordersBot',{businessId:BUSINESS_ID,consumerId:consumer.objectId}).then(function(orders){store.dispatch(Actions.setOrders(recipientId,orders)).then(function(){renderOrders(recipientId);});}).fail(function(error){console.log('error');console.log(error);});});}function renderOrders(recipientId){var customer=(0,_localStore.getData)(recipientId,'customer');var orders=(0,_localStore.getData)(recipientId,'orders');var elements=[];elements.push({\"title\":\"Nueva orden\",\"subtitle\":\"Puedes realizar una orden\",\"image_url\":SERVER_URL+\"assets/images/newOrden.jpg\",\"buttons\":[{\"type\":\"postback\",\"title\":\"Nueva orden\",\"payload\":\"NewOrder\"}]});var _iteratorNormalCompletion9=true;var _didIteratorError9=false;var _iteratorError9=undefined;try{for(var _iterator9=orders.ongoing[Symbol.iterator](),_step9;!(_iteratorNormalCompletion9=(_step9=_iterator9.next()).done);_iteratorNormalCompletion9=true){var order=_step9.value;if(elements.length<bot.limit){var datetime=_datetimeConverterNodejs2.default.dateString(order.createdAt);var image_url=customer.image.url;var title=order.orderNumber?'Orden: '+order.orderNumber:'Orden: '+(0,_dateformat2.default)(datetime,\"h:MM:ss TT dd/mm/yyyy\");elements.push({\"title\":title,\"subtitle\":'Estado: '+order.state.name+', Valor: $'+order.total,\"image_url\":image_url,\"buttons\":[{\"type\":\"postback\",\"title\":\"Ver orden\",\"payload\":\"SendOrder-\"+order.objectId},{\"type\":\"postback\",\"title\":\"Cancelar orden\",\"payload\":\"CancelOrder-\"+order.objectId}]});}}}catch(err){_didIteratorError9=true;_iteratorError9=err;}finally{try{if(!_iteratorNormalCompletion9&&_iterator9.return){_iterator9.return();}}finally{if(_didIteratorError9){throw _iteratorError9;}}}return bot.sendTypingOff(recipientId).then(function(){return bot.sendGenericMessage(recipientId,elements);});}function sendOrder(recipientId,id){bot.sendTypingOn(recipientId);authentication(recipientId).then(function(){var orders=(0,_localStore.getData)(recipientId,'orders');var customer=(0,_localStore.getData)(recipientId,'customer');var customer_image_url=customer.image.url;var currentOrder=void 0;var elements=[];var element=void 0;var image_url=void 0;var product=void 0;var _iteratorNormalCompletion10=true;var _didIteratorError10=false;var _iteratorError10=undefined;try{for(var _iterator10=orders.ongoing[Symbol.iterator](),_step10;!(_iteratorNormalCompletion10=(_step10=_iterator10.next()).done);_iteratorNormalCompletion10=true){var order=_step10.value;if(order.objectId==id){currentOrder=order;}}}catch(err){_didIteratorError10=true;_iteratorError10=err;}finally{try{if(!_iteratorNormalCompletion10&&_iterator10.return){_iterator10.return();}}finally{if(_didIteratorError10){throw _iteratorError10;}}}var _iteratorNormalCompletion11=true;var _didIteratorError11=false;var _iteratorError11=undefined;try{for(var _iterator11=currentOrder.items[Symbol.iterator](),_step11;!(_iteratorNormalCompletion11=(_step11=_iterator11.next()).done);_iteratorNormalCompletion11=true){var item=_step11.value;product=item.product;image_url=customer_image_url;if(product.image){image_url=product.image.url;}element={};element['title']=product.name;element['quantity']=item.amount;element['price']=item.price;element['currency']=\"COP\";element['image_url']=image_url;elements.push(element);}}catch(err){_didIteratorError11=true;_iteratorError11=err;}finally{try{if(!_iteratorNormalCompletion11&&_iterator11.return){_iterator11.return();}}finally{if(_didIteratorError11){throw _iteratorError11;}}}renderOrder(recipientId,currentOrder,elements);});}function renderOrder(recipientId,order,elements){var user=(0,_localStore.getData)(recipientId,'user');var consumer=(0,_localStore.getData)(recipientId,'consumer');var address=order.consumerAddress;var pointSale=order.pointSale;var payment_method=order.paymentMethod;var addressData=undefined;if(typeof payment_method=='undefined'){payment_method={name:'Sin definir'};}if(typeof address!='undefined'){addressData={street_1:address.address?address.address:'Direccin no definida',street_2:address.description?address.description:'Sin complemento',city:address.city?address.city:'No definida',postal_code:address.postalCode?address.postalCode:'No definido',state:address.state?address.state:'No definido',country:address.countryCode?address.countryCode:'No definido'};}return bot.sendTypingOff(recipientId).then(function(){return bot.sendReceiptMessage(recipientId,{template_type:\"receipt\",recipient_name:user.first_name+\" \"+user.last_name,order_number:order.objectId,currency:\"COP\",payment_method:payment_method.name,timestamp:Math.trunc(Date.now()/1000).toString(),elements:elements,address:addressData,summary:{subtotal:order.total,shipping_cost:pointSale.deliveryCost,total_cost:order.total+pointSale.deliveryCost}},[{\"content_type\":\"text\",\"title\":\"Nueva orden\",\"payload\":\"NewOrder\"},{\"content_type\":\"text\",\"title\":\"Ver rdenes\",\"payload\":\"SendOrders\"},{\"content_type\":\"text\",\"title\":\"Cancelar orden\",\"payload\":\"CancelOrder-\"+order.objectId}]);});}function newOrder(recipientId){clearCart(recipientId).then(function(){sendCart(recipientId);sendAddressesWithTitle(recipientId);});}function cancelOrder(recipientId,id){Parse.Cloud.run('changeStatusOrder',{status:\"canceledByUser\",orderId:id}).then(function(){renderCancelOrder(recipientId).then(function(){sendOrders(recipientId);});}).fail(function(error){console.log('error');console.log(error);});}function renderCancelOrder(recipientId){return bot.sendTypingOff(recipientId).then(function(){return bot.sendTextMessage(recipientId,\"La orden ha sido cancelada.\");});}function sendAccount(recipientId){bot.sendTypingOn(recipientId);authentication(recipientId).then(function(){renderAccount(recipientId);});}function renderAccount(recipientId){var user=(0,_localStore.getData)(recipientId,'user');var consumer=(0,_localStore.getData)(recipientId,'consumer');var elements=[{\"title\":'Ver direcciones',\"subtitle\":'Editar y eliminar direcciones',\"image_url\":SERVER_URL+\"assets/images/addresses.jpg\",\"buttons\":[{\"type\":\"postback\",\"title\":'Ver direcciones',\"payload\":\"SendAddresses\"}]},{\"title\":'Ver tarjetas de credito',\"subtitle\":'Editar y eliminar tarjetas de credito',\"image_url\":SERVER_URL+\"assets/images/creditCards.jpg\",\"buttons\":[{\"type\":\"postback\",\"title\":'Ver tarjetas',\"payload\":\"SendCreditCards\"}]}];return bot.sendTypingOff(recipientId).then(function(){return bot.sendGenericMessage(recipientId,elements);});}function renderYouAreWelcome(recipientId){return bot.sendTypingOff(recipientId).then(function(){return bot.sendTextMessage(recipientId,\"De nada, gracias por usar nuestros servicios\");});}function addCreditCard(recipientId,token,data){console.log('addCreditCard');var expiration=data['expiry'].replace(/\\s+/g,\"\").split('/');return(0,_requestPromise2.default)({uri:PARSE_SERVER_URL+'/functions/addCreditCard',headers:{'Content-Type':'text/plain;charset=UTF-8','X-Parse-Application-Id':PARSE_APP_ID,'X-Parse-Session-Token':token},method:'POST',json:{\"number\":data['number'].replace(/\\s+/g,\"\"),\"holderName\":data['holderName'],\"verificationNumber\":data['cvc'],\"expirationMonth\":expiration[0],\"expirationYear\":expiration[1]}}).then(function(body){(0,_requestPromise2.default)({uri:SERVER_URL+'creditCardRegistered',method:'POST',json:{\"recipientId\":recipientId}});}).catch(function(error){console.log('error');console.log(error);});}function createOrder(recipientId){var userData=(0,_localStore.getData)(recipientId);Object.assign(userData,{'order':new Map()});return(0,_localStore.getData)(recipientId,'order');}function checkSchedulesDeliveryPointSale(recipientId){var pointSale=(0,_localStore.getData)(recipientId,'pointSale');var params={pointSale:pointSale.objectId,date:new Date().toJSON().slice(0,10)};return Parse.Cloud.run('getSchedulesDeliveryPointSale',params).then(function(result){return result;}).fail(function(error){console.log('Error code: '+error.message);});}function renderShoppingCartOptions(recipientId){return bot.sendTypingOff(recipientId).then(function(){return bot.sendQuickReplyMessage(recipientId,\"Opciones del carrito\",[{\"content_type\":\"text\",\"title\":\"Finalizar pedido\",\"payload\":\"CheckOrder\"},{\"content_type\":\"text\",\"title\":\"Seguir pidiendo\",\"payload\":\"SendContinueOrder\"},{\"content_type\":\"text\",\"title\":\"Borrar carrito\",\"payload\":\"ClearAndSendCart\"}]);});}function updateCart(recipientId){var consumerCart=new _ParseModels.Cart();var localCart=(0,_localStore.getData)(recipientId,'cart');new Parse.Query(consumerCart).get(localCart.id).then(function(cart){console.log(cart);},function(object,error){console.log(error);});}function setPayment(recipientId,id){}function sendRegisterFacebookUser(recipientId){return bot.sendTypingOn(recipientId).then(function(){return bot.sendTypingOff(recipientId).then(function(){return bot.sendTextMessage(recipientId,\"Registro exitoso.\");});});}bot.app.get('/login',function(req,res){res.sendFile(_path2.default.join(__dirname+'/views/login.html'));});bot.app.post('/registerUser',function(req,res){var data=req.body;signUp(data.psid,data.uid,data.accessToken).then(function(user){sendMenu(data.psid);});res.status(200).end();});bot.app.get('/creditCard',function(req,res){console.log('creditCard');res.sendFile(_path2.default.join(__dirname+'/views/cardForm.html'));});bot.app.post('/registerCreditCard',function(req,res){console.log('registerCreditCard');var data=req.body;var consumerID=data['consumerID'];new Parse.Query(_ParseModels.Consumer).get(consumerID).then(function(consumer){if(consumer){new Parse.Query(_ParseModels.User).get(consumer.get('user').id).then(function(user){var username=user.get('username');var recipientId=consumer.get('conversationId');Parse.User.logIn(username,username,{success:function success(userData){addCreditCard(recipientId,userData.getSessionToken(),data);},error:function error(user,_error12){console.log('error');console.log(_error12);}});});res.sendFile(_path2.default.join(__dirname+'/views/cardRegistered.html'));}},function(object,error){console.log(error);});});bot.app.post('/creditCardRegistered',function(req,res){console.log('creditCardRegistered');var data=req.body;var userBuffer=bot.buffer[data.recipientId];if(typeof userBuffer!='undefined'){if(userBuffer.creditCardPayload=='SendCreditCards'){sendRegisteredCreditCards(data.recipientId);delete userBuffer.creditCardPayload;}else{sendCreditCards(data.recipientId);}}else{sendCreditCards(data.recipientId);}});bot.app.post('/changeOrderState',function(req,res){console.log('changeOrderState');var data=req.body;new Parse.Query(_ParseModels.Consumer).get(data['consumerID']).then(function(consumer){if(consumer){new Parse.Query(_ParseModels.User).get(consumer.get('user').id).then(function(user){var username=user.get('username');var recipientId=consumer.get('conversationId');new Parse.Query(_ParseModels.OrderState).get(data['stateID']).then(function(orderState){store.dispatch(Actions.setOrderState(recipientId,orderState)).then(function(){sendOrderState(recipientId);});}).fail(function(error){console.log('Error code: '+error.message);});});}},function(object,error){console.log(error);});res.json({result:'OK'});});var paymentTypes=new Map();new Parse.Query(_ParseModels.PaymentMethod).find().then(function(methods){var _iteratorNormalCompletion12=true;var _didIteratorError12=false;var _iteratorError12=undefined;try{for(var _iterator12=methods[Symbol.iterator](),_step12;!(_iteratorNormalCompletion12=(_step12=_iterator12.next()).done);_iteratorNormalCompletion12=true){var method=_step12.value;var tmpMethod=(0,_parseUtils.extractParseAttributes)(method);if(tmpMethod.objectId=='Nn0joKC5VK'){paymentTypes.set('Nn0joKC5VK',sendCash);}else if(tmpMethod.objectId=='UdK0Ifc4IF'){paymentTypes.set('UdK0Ifc4IF',sendCash);}else if(tmpMethod.objectId=='CHzoYrEtiY'){paymentTypes.set('CHzoYrEtiY',sendRegisteredCreditCards);}}}catch(err){_didIteratorError12=true;_iteratorError12=err;}finally{try{if(!_iteratorNormalCompletion12&&_iterator12.return){_iterator12.return();}}finally{if(_didIteratorError12){throw _iteratorError12;}}}},function(object,error){console.log(error);});var orderStates=new Map();orderStates.set('Nn0joKC5VK',sendCash);new Parse.Query(_ParseModels.OrderState).find().then(function(states){var _iteratorNormalCompletion13=true;var _didIteratorError13=false;var _iteratorError13=undefined;try{for(var _iterator13=states[Symbol.iterator](),_step13;!(_iteratorNormalCompletion13=(_step13=_iterator13.next()).done);_iteratorNormalCompletion13=true){var state=_step13.value;orderStates.set(state.get('order'),(0,_parseUtils.extractParseAttributes)(state));}}catch(err){_didIteratorError13=true;_iteratorError13=err;}finally{try{if(!_iteratorNormalCompletion13&&_iterator13.return){_iterator13.return();}}finally{if(_didIteratorError13){throw _iteratorError13;}}}},function(object,error){console.log(error);});var creditCardImages=new Map();creditCardImages.set('VISA','assets/images/visaCard.jpg');creditCardImages.set('MASTERCARD','assets/images/masterCard.jpg');creditCardImages.set('AMERICAN','assets/images/americanCard.jpg');creditCardImages.set('DEFAULT','assets/images/creditCards.jpg');store.dispatch({type:types.APP_LOADED});module.exports={store:store,getData:_localStore.getData};"]}