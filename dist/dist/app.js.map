{"version":3,"sources":["../app.js"],"names":["_typeof","Symbol","iterator","obj","constructor","prototype","_slicedToArray","sliceIterator","arr","i","_arr","_n","_d","_e","undefined","_i","_s","next","done","push","value","length","err","Array","isArray","Object","TypeError","_extends","assign","target","arguments","source","key","hasOwnProperty","call","_bot","require","bot","_interopRequireWildcard","_actionTypes","types","_index","Actions","_parseUtils","_localStore","_ParseModels","_config","_config2","_interopRequireDefault","_requestPromise","_requestPromise2","_promise","_promise2","_objectAssign","_objectAssign2","_geocoder","_geocoder2","_path","_path2","_datetimeConverterNodejs","_datetimeConverterNodejs2","_dateformat","_dateformat2","__esModule","default","newObj","SERVER_URL","process","env","get","PARSE_APP_ID","PARSE_SERVER_URL","PARSE_CLIENT_KEY","FACEBOOK_APP_ID","REDIRECT_URI","BUSINESS_ID","GOOGLE_MAPS_URL","GOOGLE_MAPS_KEY","COMMERCES","rules","set","sendMenu","sendAddressesWithTitle","sendCart","sendOrders","sendAddresses","newAddress","sendAccount","sendCreditCards","registerCreditCard","sendHelp","sendYouAreWelcome","payloadRules","setAddressComplement","confirmAddress","setAddress","editAddress","removeAddress","sendCategories","sendProducts","addProduct","addModifier","removeProduct","increaseOneProduct","decreaseOneProduct","sendProductDescription","sendContinueOrder","searchProducts","sendCartDetails","editCart","clearCart","clearAndSendCart","sendPurchaseOptions","checkout","checkPayment","checkAddress","checkOrder","registerCreditCardAndPay","sendRegisteredCreditCards","cancelRegisterCreditCard","payWithCreditCard","sendOrder","newOrder","cancelOrder","removeCreditCard","setScore","defaultSearch","initialState","userData","paymentTypes","sendCash","creditCardImages","reducer","state","action","console","log","data","recipientId","type","APP_LOADED","app","CUSTOMER_LOADED","customer","extractParseAttributes","CONSUMER_LOADED","consumer","USER_LOADED","user","CONSUMER_ADDRESSES_LOADED","addresses","map","a","SET_CURRENT_ADDRESS","address","PAYMENT_METHODS_LOADED","paymentMethods","p","SET_PAYMENT_METHOD","paymentMethod","SET_ORDERS","ongoing","orders","delivered","CONSUMER_UPDATED","CONSUMER_NOT_FOUND","CONSUMER_ORDERS_LOADED","USER_CREDITCARDS_LOADED","creditCards","SET_CUSTOMER_POINT_SALE","pointSale","SET_ORDER","order","SET_USER","_user","SET_CONSUMER","_consumer","SET_CUSTOMER","_customer","SET_ORDER_STATE","_orderState","orderState","createLocalStore","req","res","sendFile","join","__dirname","post","body","signUp","psid","uid","accessToken","then","status","end","consumerID","Parse","Query","Consumer","User","id","username","logIn","success","addCreditCard","getSessionToken","error","_error","object","userBuffer","buffer","creditCardPayload","OrderState","store","dispatch","setOrderState","sendOrderState","fail","message","json","result","facebookId","conversationToken","createUser","userObject","getData","rawParseObject","createConsumer","resolve","reject","login","password","_error2","authentication","senderId","getCustomer","getUser","PAGE_ACCESS_TOKEN","getConsumer","Customer","loadInStore","userObj","consumerObj","sendSignUp","image_url","sendTypingOn","sendTypingOff","sendGenericMessage","image","url","first_name","name","sendTextMessage","ConsumerAddress","elements","_iteratorNormalCompletion","_didIteratorError","_iteratorError","_iterator","_step","limit","description","city","location","lat","lng","objectId","return","getState","creditCardsImages","CreditCard","creditCardImage","_iteratorNormalCompletion2","_didIteratorError2","_iteratorError2","_iterator2","_step2","creditCard","lastFour","cardHolderName","setDataBuffer","writeAddress","setListener","addressCheck","setLocationCheck","sendQuickReplyMessage","sendNullMapMessage","sendMap","sendImageMessage","sendMapConfirmation","geocode","setAddressComponetsInBuffer","results","formatted_address","geometry","_iteratorNormalCompletion3","_didIteratorError3","_iteratorError3","_iterator3","address_components","_step3","component","includes","route","long_name","street_number","short_name","locality","administrative_area","country","country_code","postal_code","addressPayload","saveAddress","startsWith","split","GeoPoint","latitude","parseFloat","longitude","consumerAddress","complement","save","_error3","address_name","__type","className","_error4","setEmail","setEmailCheck","email","saveInStore","setTelephone","setTelephoneCheck","setPhone","telephone","reverseGeocode","Cloud","run","businessId","setCustomerPointSale","code","destroy","index","pointSaleIsOpen","parseInt","categories","sendScheduleRestriction","pointSaleSchedules","splitCategories","idx","forEach","item","title","buttons","payload","sendCategoriesDetail","keys","catIni","catFin","subtitle","categoryId","proIdx","Category","category","products","sendProductsDetail","splitProducts","product","createCart","items","Map","cart","productId","Product","productObject","promises","quantity","price","priceDefault","modifiers","array","Modifier","modifier","Promise","when","undefinedModifiers","checkModifiers","modifierItem","ModifierItem","modifierItems","sendModifierMenu","saveCart","sendAddProductNenu","quick_replies","modifierId","itemId","orderItemModifier","OrderItemModifier","_error5","exist","itemModifier","checkModifiersComplete","OrderItem","orderItem","delete","itemsPointers","_iteratorNormalCompletion4","_didIteratorError4","_iteratorError4","_iterator4","_step4","_step4$value","size","_error6","_error7","_error8","consumerCart","Cart","_iteratorNormalCompletion5","_didIteratorError5","_iteratorError5","_iterator5","_step5","_step5$value","properties","saveAll","_iteratorNormalCompletion6","_didIteratorError6","_iteratorError6","_iterator6","_step6","_item","method","_error9","_error10","saveOrder","getOrderState","Order","total","deliveryCost","phone","setOrder","_error11","sendEmptyCartOptions","customer_image_url","element","orderLimit","ind","sendCartReceipt","_error12","alert","cartId","payment_method","addressData","street_1","street_2","postalCode","countryCode","sendReceiptMessage","template_type","recipient_name","last_name","order_number","currency","timestamp","Math","trunc","Date","now","toString","summary","subtotal","shipping_cost","total_cost","sendEditCartOptions","minOrderPrice","sendMinOrderPriceRestriction","loadPaymentMethods","substring","setPaymentMethod","paymentFunction","days","text","_iteratorNormalCompletion7","_didIteratorError7","_iteratorError7","_iterator7","_step7","pointSaleSchedule","daysActive","allDay","dayID","orderConfirmation","_ret2","_iteratorNormalCompletion8","_didIteratorError8","_iteratorError8","_iterator8","_step8","card","v","creditCardId","messagePush","orderSent","sendserviceRating","deliveryTime","score","orderId","Number","comment","thank","query","q","renderSearchEmpty","renderSearchInitial","splitSearchResult","productObjects","renderHelp","sendContactUs","consumerId","setOrders","renderOrders","_iteratorNormalCompletion9","_didIteratorError9","_iteratorError9","_iterator9","_step9","datetime","dateString","createdAt","orderNumber","currentOrder","_iteratorNormalCompletion10","_didIteratorError10","_iteratorError10","_iterator10","_step10","_iteratorNormalCompletion11","_didIteratorError11","_iteratorError11","_iterator11","_step11","amount","renderOrder","renderCancelOrder","renderAccount","token","expiration","replace","uri","headers","catch","orderStateNumber","equalTo","find","exports"],"mappings":"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","file":"app.js","sourcesContent":["'use strict';var _typeof=typeof Symbol===\"function\"&&typeof Symbol.iterator===\"symbol\"?function(obj){return typeof obj;}:function(obj){return obj&&typeof Symbol===\"function\"&&obj.constructor===Symbol&&obj!==Symbol.prototype?\"symbol\":typeof obj;};var _slicedToArray=function(){function sliceIterator(arr,i){var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break;}}catch(err){_d=true;_e=err;}finally{try{if(!_n&&_i[\"return\"])_i[\"return\"]();}finally{if(_d)throw _e;}}return _arr;}return function(arr,i){if(Array.isArray(arr)){return arr;}else if(Symbol.iterator in Object(arr)){return sliceIterator(arr,i);}else{throw new TypeError(\"Invalid attempt to destructure non-iterable instance\");}};}();var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key];}}}return target;};var _bot=require('./bot');var bot=_interopRequireWildcard(_bot);var _actionTypes=require('./constants/actionTypes');var types=_interopRequireWildcard(_actionTypes);var _index=require('./actions/index');var Actions=_interopRequireWildcard(_index);var _parseUtils=require('./parseUtils');var _localStore=require('./localStore');var _ParseModels=require('./models/ParseModels');var _config=require('config');var _config2=_interopRequireDefault(_config);var _requestPromise=require('request-promise');var _requestPromise2=_interopRequireDefault(_requestPromise);var _promise=require('promise');var _promise2=_interopRequireDefault(_promise);var _objectAssign=require('object-assign');var _objectAssign2=_interopRequireDefault(_objectAssign);var _geocoder=require('geocoder');var _geocoder2=_interopRequireDefault(_geocoder);var _path=require('path');var _path2=_interopRequireDefault(_path);var _datetimeConverterNodejs=require('datetime-converter-nodejs');var _datetimeConverterNodejs2=_interopRequireDefault(_datetimeConverterNodejs);var _dateformat=require('dateformat');var _dateformat2=_interopRequireDefault(_dateformat);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj;}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key))newObj[key]=obj[key];}}newObj.default=obj;return newObj;}}var SERVER_URL=process.env.SERVER_URL?process.env.SERVER_URL:_config2.default.get('SERVER_URL');var PARSE_APP_ID=process.env.PARSE_APP_ID?process.env.PARSE_APP_ID:_config2.default.get('PARSE_APP_ID');var PARSE_SERVER_URL=process.env.PARSE_SERVER_URL?process.env.PARSE_SERVER_URL:_config2.default.get('PARSE_SERVER_URL');var PARSE_CLIENT_KEY=process.env.PARSE_CLIENT_KEY?process.env.PARSE_CLIENT_KEY:_config2.default.get('PARSE_CLIENT_KEY');var FACEBOOK_APP_ID=process.env.FACEBOOK_APP_ID?process.env.FACEBOOK_APP_ID:_config2.default.get('FACEBOOK_APP_ID');var REDIRECT_URI=process.env.REDIRECT_URI?process.env.REDIRECT_URI:_config2.default.get('REDIRECT_URI');var BUSINESS_ID=process.env.BUSINESS_ID?process.env.BUSINESS_ID:_config2.default.get('BUSINESS_ID');var GOOGLE_MAPS_URL=process.env.GOOGLE_MAPS_URL?process.env.GOOGLE_MAPS_URL:_config2.default.get('GOOGLE_MAPS_URL');var GOOGLE_MAPS_KEY=process.env.GOOGLE_MAPS_KEY?process.env.GOOGLE_MAPS_KEY:_config2.default.get('GOOGLE_MAPS_KEY');var COMMERCES=_config2.default.get('COMMERCES');bot.rules.set('hola',sendMenu);bot.rules.set('iniciar',sendMenu);bot.rules.set('empezar',sendMenu);bot.rules.set('comenzar',sendMenu);bot.rules.set('buenos dias',sendMenu);bot.rules.set('buenas tardes',sendMenu);bot.rules.set('men',sendMenu);bot.rules.set('pedir domicilio',sendAddressesWithTitle);bot.rules.set('carrito',sendCart);bot.rules.set('cuenta',sendCart);bot.rules.set('mi orden',sendOrders);bot.rules.set('mis rdenes',sendOrders);bot.rules.set('mi direccin',sendAddresses);bot.rules.set('mis direcciones',sendAddresses);bot.rules.set('nueva direccin',newAddress);bot.rules.set('agregar direccin',newAddress);bot.rules.set('mi cuenta',sendAccount);bot.rules.set('mi tarjeta',sendCreditCards);bot.rules.set('mis tarjetas',sendCreditCards);bot.rules.set('nueva tarjeta',registerCreditCard);bot.rules.set('agregar tarjeta',registerCreditCard);bot.rules.set('ayuda',sendHelp);bot.rules.set('help',sendHelp);bot.rules.set('gracias',sendYouAreWelcome);bot.payloadRules.set('Greeting',sendMenu);bot.payloadRules.set('SendAddressesWithTitle',sendAddressesWithTitle);bot.payloadRules.set('SendAddresses',sendAddresses);bot.payloadRules.set('NewAddress',newAddress);bot.payloadRules.set('SetAddressComplement',setAddressComplement);bot.payloadRules.set('ConfirmAddress',confirmAddress);bot.payloadRules.set('SetAddress',setAddress);bot.payloadRules.set('EditAddress',editAddress);bot.payloadRules.set('RemoveAddress',removeAddress);bot.payloadRules.set('SendCategories',sendCategories);bot.payloadRules.set('SendProducts',sendProducts);bot.payloadRules.set('AddProduct',addProduct);bot.payloadRules.set('AddModifier',addModifier);bot.payloadRules.set('RemoveProduct',removeProduct);bot.payloadRules.set('IncreaseOneProduct',increaseOneProduct);bot.payloadRules.set('DecreaseOneProduct',decreaseOneProduct);bot.payloadRules.set('SendProductDescription',sendProductDescription);bot.payloadRules.set('SendContinueOrder',sendContinueOrder);bot.payloadRules.set('Search',searchProducts);bot.payloadRules.set('SendCart',sendCart);bot.payloadRules.set('SendCartDetails',sendCartDetails);bot.payloadRules.set('EditCart',editCart);bot.payloadRules.set('ClearCart',clearCart);bot.payloadRules.set('ClearAndSendCart',clearAndSendCart);bot.payloadRules.set('SendPurchaseOptions',sendPurchaseOptions);bot.payloadRules.set('Checkout',checkout);bot.payloadRules.set('CheckPayment',checkPayment);bot.payloadRules.set('CheckAddress',checkAddress);bot.payloadRules.set('CheckOrder',checkOrder);bot.payloadRules.set('RegisterCreditCard',registerCreditCard);bot.payloadRules.set('RegisterCreditCardAndPay',registerCreditCardAndPay);bot.payloadRules.set('SendRegisteredCreditCards',sendRegisteredCreditCards);bot.payloadRules.set('CancelRegisterCreditCard',cancelRegisterCreditCard);bot.payloadRules.set('PayWithCreditCard',payWithCreditCard);bot.payloadRules.set('SendOrders',sendOrders);bot.payloadRules.set('SendOrder',sendOrder);bot.payloadRules.set('NewOrder',newOrder);bot.payloadRules.set('CancelOrder',cancelOrder);bot.payloadRules.set('SendCreditCards',sendCreditCards);bot.payloadRules.set('RemoveCreditCard',removeCreditCard);bot.payloadRules.set('SetScore',setScore);bot.payloadRules.set('SendAccount',sendAccount);bot.payloadRules.set('SendHelp',sendHelp);bot.payloadRules.set('CustomerService',sendHelp);bot.defaultSearch=searchProducts;var initialState={userData:{},paymentTypes:{'Nn0joKC5VK':sendCash,'UdK0Ifc4IF':sendCash,'CHzoYrEtiY':sendRegisteredCreditCards},creditCardImages:{'VISA':'assets/images/visaCard.jpg','MASTERCARD':'assets/images/masterCard.jpg','AMERICAN':'assets/images/americanCard.jpg','DEFAULT':'assets/images/creditCards.jpg'}};var reducer=function reducer(){var state=arguments.length>0&&arguments[0]!==undefined?arguments[0]:initialState;var action=arguments[1];console.log('ACTION');console.log(action);var data=action.data;if(data&&data.hasOwnProperty('recipientId')){if(typeof state.userData[data.recipientId]=='undefined'){state.userData[data.recipientId]={};}}switch(action.type){case types.APP_LOADED:{console.log('Application is running on port',bot.app.get('port'));return _extends({},state);}case types.CUSTOMER_LOADED:{var customer=(0,_parseUtils.extractParseAttributes)(data.customer);(0,_objectAssign2.default)(state.userData[data.recipientId],{customer:customer});return _extends({},state);}case types.CONSUMER_LOADED:{var consumer=(0,_parseUtils.extractParseAttributes)(data.consumer);(0,_objectAssign2.default)(state.userData[data.recipientId],{consumer:consumer});return _extends({},state);}case types.USER_LOADED:{var user=(0,_parseUtils.extractParseAttributes)(data.user);(0,_objectAssign2.default)(state.userData[data.recipientId],{user:user});return _extends({},state);}case types.CONSUMER_ADDRESSES_LOADED:{var addresses=data.addresses.map(function(a){return(0,_parseUtils.extractParseAttributes)(a);});(0,_objectAssign2.default)(state.userData[data.recipientId],{addresses:addresses});return _extends({},state);}case types.SET_CURRENT_ADDRESS:{var address=(0,_parseUtils.extractParseAttributes)(data.address);(0,_objectAssign2.default)(state.userData[data.recipientId],{address:address});return _extends({},state);}case types.PAYMENT_METHODS_LOADED:{var paymentMethods=data.paymentMethods.map(function(p){return(0,_parseUtils.extractParseAttributes)(p);});(0,_objectAssign2.default)(state.userData[data.recipientId],{paymentMethods:paymentMethods});return _extends({},state);}case types.SET_PAYMENT_METHOD:{var paymentMethod=(0,_parseUtils.extractParseAttributes)(data.paymentMethod);(0,_objectAssign2.default)(state.userData[data.recipientId],{paymentMethod:paymentMethod});return _extends({},state);}case types.SET_ORDERS:{var ongoing=data.orders.ongoing.map(function(a){return(0,_parseUtils.extractParseAttributes)(a);});var delivered=data.orders.delivered.map(function(a){return(0,_parseUtils.extractParseAttributes)(a);});(0,_objectAssign2.default)(state.userData[data.recipientId],{orders:{ongoing:ongoing,delivered:delivered}});return _extends({},state);}case types.CONSUMER_UPDATED:{return _extends({},state);}case types.CONSUMER_NOT_FOUND:{return _extends({},state);}case types.CONSUMER_ORDERS_LOADED:{var orders=data.orders.map(function(a){return(0,_parseUtils.extractParseAttributes)(a);});(0,_objectAssign2.default)(state.userData[data.recipientId],{orders:orders});return _extends({},state);}case types.USER_CREDITCARDS_LOADED:{var creditCards=data.creditCards.map(function(a){return(0,_parseUtils.extractParseAttributes)(a);});(0,_objectAssign2.default)(state.userData[data.recipientId],{creditCards:creditCards});return _extends({},state);}case types.SET_CUSTOMER_POINT_SALE:{var pointSale=(0,_parseUtils.extractParseAttributes)(data.pointSale);(0,_objectAssign2.default)(state.userData[data.recipientId],{pointSale:pointSale});return _extends({},state);}case types.SET_ORDER:{var order=(0,_parseUtils.extractParseAttributes)(data.order);(0,_objectAssign2.default)(state.userData[data.recipientId],{order:order});return _extends({},state);}case types.SET_USER:{var _user=(0,_parseUtils.extractParseAttributes)(data.user);(0,_objectAssign2.default)(state.userData[data.recipientId],{user:_user});return _extends({},state);}case types.SET_CONSUMER:{var _consumer=(0,_parseUtils.extractParseAttributes)(data.consumer);(0,_objectAssign2.default)(state.userData[data.recipientId],{consumer:_consumer});return _extends({},state);}case types.SET_CUSTOMER:{var _customer=(0,_parseUtils.extractParseAttributes)(data.customer);(0,_objectAssign2.default)(state.userData[data.recipientId],{customer:_customer});return _extends({},state);}case types.SET_ORDER_STATE:{var _orderState=(0,_parseUtils.extractParseAttributes)(data.orderState);(0,_objectAssign2.default)(state.userData[data.recipientId],{orderState:_orderState});return _extends({},state);}default:return state;}};(0,_localStore.createLocalStore)(reducer);bot.app.get('/login',function(req,res){res.sendFile(_path2.default.join(__dirname+'/views/login.html'));});bot.app.post('/registerUser',function(req,res){var data=req.body;signUp(data.psid,data.uid,data.accessToken).then(function(user){sendMenu(data.psid);});res.status(200).end();});bot.app.get('/creditCard',function(req,res){console.log('creditCard');res.sendFile(_path2.default.join(__dirname+'/views/cardForm.html'));});bot.app.post('/registerCreditCard',function(req,res){console.log('registerCreditCard');var data=req.body;var consumerID=data['consumerID'];new Parse.Query(_ParseModels.Consumer).get(consumerID).then(function(consumer){if(consumer){new Parse.Query(_ParseModels.User).get(consumer.get('user').id).then(function(user){var username=user.get('username');var recipientId=consumer.get('conversationId');Parse.User.logIn(username,username,{success:function success(userData){addCreditCard(recipientId,userData.getSessionToken(),data);},error:function error(user,_error){console.log('error');console.log(_error);}});});res.sendFile(_path2.default.join(__dirname+'/views/cardRegistered.html'));}},function(object,error){console.log(error);});});bot.app.post('/creditCardRegistered',function(req,res){console.log('creditCardRegistered');var data=req.body;var userBuffer=bot.buffer[data.recipientId];if(typeof userBuffer!='undefined'){if(userBuffer.creditCardPayload=='SendCreditCards'){sendRegisteredCreditCards(data.recipientId);delete userBuffer.creditCardPayload;}else{sendCreditCards(data.recipientId);}}else{sendCreditCards(data.recipientId);}});bot.app.post('/changeOrderState',function(req,res){var data=req.body;new Parse.Query(_ParseModels.Consumer).get(data['consumerID']).then(function(consumer){if(consumer){new Parse.Query(_ParseModels.User).get(consumer.get('user').id).then(function(user){var username=user.get('username');var recipientId=consumer.get('conversationId');new Parse.Query(_ParseModels.OrderState).get(data['stateID']).then(function(orderState){store.dispatch(Actions.setOrderState(recipientId,orderState)).then(function(){sendOrderState(recipientId);});}).fail(function(error){console.log('Error code: '+error.message);});});}},function(object,error){console.log(error);});res.json({result:'OK'});});function signUp(recipientId,facebookId,conversationToken){return _ParseModels.User.createUser(store,recipientId,facebookId,conversationToken).then(function(){var userObject=(0,_localStore.getData)(recipientId,'user');var user=userObject.rawParseObject;return user.createConsumer(store,recipientId,conversationToken).then(function(consumer){return new _promise2.default(function(resolve,reject){resolve(userObject);});});});}function login(username,password){return Parse.User.logIn(username,password,{success:function success(user){//let val = JSON.stringify({sessionToken: user.getSessionToken()});\n//console.log(val);\nreturn user;},error:function error(user,_error2){console.log('Failed to create new object, with error code: '+_error2.message);}});}function authentication(recipientId,senderId){return getCustomer(recipientId).then(function(customer){return getUser(recipientId).then(function(user){if(typeof user=='undefined'){//sendSignUp(recipientId)\nreturn _ParseModels.User.createUser(store,recipientId,recipientId,COMMERCES[senderId].PAGE_ACCESS_TOKEN).then(function(){var userObject=(0,_localStore.getData)(recipientId,'user');var user=userObject.rawParseObject;return user.createConsumer(store,recipientId,COMMERCES[senderId].PAGE_ACCESS_TOKEN).then(function(consumer){return new _promise2.default(function(resolve,reject){resolve(userObject);});});});}else{return getConsumer(recipientId,user.rawParseObject).then(function(consumer){return new _promise2.default(function(resolve,reject){resolve(user);});/*Parse.Promise.as().then(() => {\n                        return user;\n                    });*/});}//return login(user.username, user.username).then(()=>{\n//});\n});});}function getCustomer(recipientId){var customer=(0,_localStore.getData)(recipientId,'customer');if(typeof customer=='undefined'){return _ParseModels.Customer.loadInStore(store,recipientId,BUSINESS_ID).then(function(){return(0,_localStore.getData)(recipientId,'customer');});}else{return new _promise2.default(function(resolve,reject){resolve(customer);});}}function getUser(recipientId){var userObj=(0,_localStore.getData)(recipientId,'user');if(typeof userObj=='undefined'){return _ParseModels.User.loadInStore(store,recipientId).then(function(){return(0,_localStore.getData)(recipientId,'user');});}else{return new _promise2.default(function(resolve,reject){resolve(userObj);});}}function getConsumer(recipientId,user){var consumerObj=(0,_localStore.getData)(recipientId,'consumer');if(typeof consumerObj=='undefined'){return _ParseModels.Consumer.loadInStore(store,recipientId,user).then(function(){consumerObj=(0,_localStore.getData)(recipientId,'consumer');if(typeof consumerObj!='undefined'){return new _promise2.default(function(resolve,reject){resolve(consumerObj);});}else{console.log('create consumer');/*return createConsumer(recipientId, user).then( () => {\n                    return getData(recipientId, 'consumer');\n                });*/}});}else{return new _promise2.default(function(resolve,reject){resolve(consumerObj);});}}function sendSignUp(recipientId,senderId){var image_url=SERVER_URL+\"assets/images/love.jpg\";return bot.sendTypingOn(recipientId,senderId).then(function(){return bot.sendTypingOff(recipientId,senderId).then(function(){return bot.sendGenericMessage(recipientId,senderId,[{\"title\":\"Hola, soy un Bot\",\"subtitle\":\"Soy tu asistente virtual. Quieres registrarte en nuestro sistema?\",\"image_url\":image_url,\"buttons\":[{\"type\":\"web_url\",\"url\":SERVER_URL+\"login?psid=\"+recipientId,\"title\":\"Registrarme\",\"webview_height_ratio\":\"full\",\"messenger_extensions\":true}]}]);});});};function sendMenu(recipientId,senderId){return bot.sendTypingOn(recipientId,senderId).then(function(){authentication(recipientId,senderId).then(function(){var customer=(0,_localStore.getData)(recipientId,'customer');var user=(0,_localStore.getData)(recipientId,'user');var image_url=customer.image.url;return bot.sendTypingOff(recipientId,senderId).then(function(){return bot.sendGenericMessage(recipientId,senderId,[{\"title\":\"Hola \"+user.first_name+\", Bienvenido a \"+customer.name,\"subtitle\":\"Aqu puedes pedir un domicilio, escribe o selecciona alguna de las opciones:\",\"image_url\":image_url,\"buttons\":[{\"type\":\"postback\",\"title\":\"Pedir domicilio\",\"payload\":\"SendAddressesWithTitle\"},{\"type\":\"postback\",\"title\":\"Servicio al cliente\",\"payload\":\"CustomerService\"}]}]);});});});}function sendAddressesWithTitle(recipientId,senderId){return bot.sendTypingOn(recipientId,senderId).then(function(){return bot.sendTypingOff(recipientId,senderId).then(function(){return bot.sendTextMessage(recipientId,senderId,\"A cual direccin vas hacer tu pedido?\\n\\nPuedes escoger entre agregar una nueva direccin o seleccionar una de tus direcciones guardadas\").then(function(){sendAddresses(recipientId,senderId);});});});}function sendAddresses(recipientId,senderId){return bot.sendTypingOn(recipientId,senderId).then(function(){authentication(recipientId,senderId).then(function(){var consumer=(0,_localStore.getData)(recipientId,'consumer');_ParseModels.ConsumerAddress.loadInStore(store,recipientId,consumer).then(function(){var addresses=(0,_localStore.getData)(recipientId,'addresses');var elements=[];elements.push({\"title\":\"Nueva direccin\",\"subtitle\":\"Puedes agregar una nueva direccin\",\"image_url\":SERVER_URL+\"assets/images/addAddress.jpg\",\"buttons\":[{\"type\":\"postback\",\"title\":\"Nueva direccin\",\"payload\":\"NewAddress\"}]});var _iteratorNormalCompletion=true;var _didIteratorError=false;var _iteratorError=undefined;try{for(var _iterator=addresses[Symbol.iterator](),_step;!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=true){var address=_step.value;if(elements.length<bot.limit){elements.push({\"title\":address.name,\"subtitle\":address.address+\", \"+address.description+\", \"+address.city+\", \"+address.state,\"image_url\":GOOGLE_MAPS_URL+\"?center=\"+address.location.lat+\",\"+address.location.lng+\"&zoom=16&size=400x400&markers=color:red%7C\"+address.location.lat+\",\"+address.location.lng+\"&key=\"+GOOGLE_MAPS_KEY,\"buttons\":[{\"type\":\"postback\",\"title\":\"Seleccionar\",\"payload\":\"SetAddress-\"+address.objectId},{\"type\":\"postback\",\"title\":\"Modificar\",\"payload\":\"EditAddress-\"+address.objectId},{\"type\":\"postback\",\"title\":\"Quitar\",\"payload\":\"RemoveAddress-\"+address.objectId}]});}}}catch(err){_didIteratorError=true;_iteratorError=err;}finally{try{if(!_iteratorNormalCompletion&&_iterator.return){_iterator.return();}}finally{if(_didIteratorError){throw _iteratorError;}}}return bot.sendTypingOff(recipientId,senderId).then(function(){return bot.sendGenericMessage(recipientId,senderId,elements);});});});});}function sendCreditCards(recipientId,senderId){return bot.sendTypingOn(recipientId,senderId).then(function(){authentication(recipientId,senderId).then(function(){var state=store.getState();var user=(0,_localStore.getData)(recipientId,'user');var creditCardsImages=state['creditCardImages'];_ParseModels.CreditCard.loadInStore(store,recipientId,user).then(function(){var creditCards=(0,_localStore.getData)(recipientId,'creditCards');var userBuffer=bot.buffer[recipientId];var creditCardImage=void 0;var elements=[];if(typeof userBuffer!='undefined'&&userBuffer.hasOwnProperty('creditCardPayload')){delete userBuffer.creditCardPayload;}elements.push({\"title\":\"Registro de tarjeta\",\"subtitle\":\"Puedes agregar una tarjeta\",\"image_url\":SERVER_URL+\"assets/images/creditCards.jpg\",\"buttons\":[{\"type\":\"postback\",\"title\":\"Nueva tarjeta\",\"payload\":\"RegisterCreditCard\"}]});var _iteratorNormalCompletion2=true;var _didIteratorError2=false;var _iteratorError2=undefined;try{for(var _iterator2=creditCards[Symbol.iterator](),_step2;!(_iteratorNormalCompletion2=(_step2=_iterator2.next()).done);_iteratorNormalCompletion2=true){var creditCard=_step2.value;if(elements.length<bot.limit){creditCardImage=creditCardsImages.hasOwnProperty(creditCard.type)?creditCardsImages[creditCard.type]:creditCardsImages['DEFAULT'];elements.push({\"title\":creditCard.type+' '+creditCard.lastFour,\"subtitle\":creditCard.cardHolderName,\"image_url\":SERVER_URL+creditCardImage,\"buttons\":[{\"type\":\"postback\",\"title\":\"Quitar\",\"payload\":\"RemoveCreditCard-\"+creditCard.objectId}]});}}}catch(err){_didIteratorError2=true;_iteratorError2=err;}finally{try{if(!_iteratorNormalCompletion2&&_iterator2.return){_iterator2.return();}}finally{if(_didIteratorError2){throw _iteratorError2;}}}return bot.sendTypingOff(recipientId,senderId).then(function(){return bot.sendGenericMessage(recipientId,senderId,elements);});});});});}function newAddress(recipientId,senderId){return bot.sendTypingOn(recipientId,senderId).then(function(){return bot.sendTypingOff(recipientId,senderId).then(function(){bot.setDataBuffer(recipientId,'addressPayload','NewAddress');writeAddress(recipientId,senderId);});});}function writeAddress(recipientId,senderId){bot.setListener(recipientId,'address','text',addressCheck);bot.setListener(recipientId,'location','attachment',setLocationCheck);return bot.sendQuickReplyMessage(recipientId,senderId,\"Puedes escribir o compartir tu ubicacin actual?\\n\\nEjemplo: Calle 67 #52-20, Medelln.\\n\\nNo olvides escribir la ciudad al final de la direccin.\",[{\"content_type\":\"location\",\"title\":\"Enviar ubicacin\"}]);}function sendNullMapMessage(recipientId,senderId){return bot.sendTypingOn(recipientId,senderId).then(function(){return bot.sendTypingOff(recipientId,senderId).then(function(){return bot.sendTextMessage(recipientId,senderId,\"La direccin no ha sido encontrada en Google Maps, por favor intenta de nuevo\");});});}function sendMap(recipientId,senderId){return bot.sendTypingOn(recipientId,senderId).then(function(){var userBuffer=bot.buffer[recipientId];return bot.sendTypingOff(recipientId,senderId).then(function(){return bot.sendImageMessage(recipientId,senderId,GOOGLE_MAPS_URL+\"?center=\"+userBuffer.location.lat+\",\"+userBuffer.location.lng+\"&zoom=16&size=400x400&markers=color:red%7C\"+userBuffer.location.lat+\",\"+userBuffer.location.lng+\"&key=\"+GOOGLE_MAPS_KEY).then(function(){sendMapConfirmation(recipientId,senderId);});});});}function sendMapConfirmation(recipientId,senderId){return bot.sendTypingOff(recipientId,senderId).then(function(){return bot.sendQuickReplyMessage(recipientId,senderId,\"Es correcta?\",[{\"content_type\":\"text\",\"title\":\"Si\",\"payload\":\"SetAddressComplement\"},{\"content_type\":\"text\",\"title\":\"No\",\"payload\":\"NewAddress\"}]);});}function addressCheck(recipientId,senderId){console.log(recipientId+' '+senderId);var userBuffer=bot.buffer[recipientId];_geocoder2.default.geocode(userBuffer.address,function(error,data){if(!error&&data.status=='OK'){setAddressComponetsInBuffer(recipientId,senderId,data.results[0]);}else{console.log('Geocode not found');console.log(error);sendNullMapMessage(recipientId,senderId).then(function(){newAddress(recipientId);});}});}function setAddressComponetsInBuffer(recipientId,senderId,data){return bot.sendTypingOn(recipientId,senderId).then(function(){var userBuffer=bot.buffer[recipientId];userBuffer.address=data.formatted_address;userBuffer.location=data.geometry.location;var _iteratorNormalCompletion3=true;var _didIteratorError3=false;var _iteratorError3=undefined;try{for(var _iterator3=data.address_components[Symbol.iterator](),_step3;!(_iteratorNormalCompletion3=(_step3=_iterator3.next()).done);_iteratorNormalCompletion3=true){var component=_step3.value;if(component.types.includes('route')){userBuffer.route=component.long_name;}else if(component.types.includes('street_number')){userBuffer.street_number=component.short_name;}else if(component.types.includes('locality')){userBuffer.locality=component.short_name;}else if(component.types.includes('administrative_area_level_1')){userBuffer.state=component.short_name;}else if(component.types.includes('administrative_area_level_2')){userBuffer.administrative_area=component.short_name;}else if(component.types.includes('country')){userBuffer.country=component.long_name;userBuffer.country_code=component.short_name;}else if(component.types.includes('postal_code')){userBuffer.postal_code=component.short_name;}}}catch(err){_didIteratorError3=true;_iteratorError3=err;}finally{try{if(!_iteratorNormalCompletion3&&_iterator3.return){_iterator3.return();}}finally{if(_didIteratorError3){throw _iteratorError3;}}}return bot.sendTypingOff(recipientId,senderId).then(function(){return bot.sendTextMessage(recipientId,senderId,\"Encontr esta direccin en Google Maps:\\n\\n\"+userBuffer.address).then(function(){sendMap(recipientId,senderId);});});});}function setAddressComplement(recipientId,senderId){return bot.sendTypingOn(recipientId,senderId).then(function(){bot.setListener(recipientId,'complement','text',confirmAddress);return bot.sendTypingOff(recipientId,senderId).then(function(){return bot.sendTextMessage(recipientId,senderId,\"Por favor escribe el complemento de tu direccin actual.\\n\\nEjemplo: Apto 303, edificio el palmar.\\n\\nNo olvides colocar el nombre del edificio o del barrio\");});});}function confirmAddress(recipientId,senderId){var userBuffer=bot.buffer[recipientId];var addressPayload=userBuffer['addressPayload'];if(addressPayload=='NewAddress'){return bot.sendTypingOn(recipientId,senderId).then(function(){bot.setListener(recipientId,'address_name','text',saveAddress);return bot.sendTypingOff(recipientId,senderId).then(function(){return bot.sendTextMessage(recipientId,senderId,\"Por favor coloca un nombre a esta direccin para guardarla. \\n\\nEjemplo: casa, apartamento o oficina\");});});}else if(addressPayload.startsWith('EditAddress')){return bot.sendTypingOn(recipientId,senderId).then(function(){var data=addressPayload.split('-');var location=new Parse.GeoPoint({latitude:parseFloat(userBuffer.location.lat),longitude:parseFloat(userBuffer.location.lng)});new Parse.Query(_ParseModels.ConsumerAddress).get(data[1]).then(function(consumerAddress){consumerAddress.set('address',userBuffer.route+\" # \"+userBuffer.street_number);consumerAddress.set('location',location);consumerAddress.set('country',userBuffer.country);consumerAddress.set('countryCode',userBuffer.country_code);consumerAddress.set('postalCode',userBuffer.postal_code);consumerAddress.set('state',userBuffer.state);consumerAddress.set('description',userBuffer.complement);consumerAddress.save(undefined,{success:function success(address){delete userBuffer.address;delete userBuffer.location;delete userBuffer.complement;return bot.sendTypingOff(recipientId,senderId).then(function(){return bot.sendTextMessage(recipientId,senderId,\"La direccin ha sido actualizada.\").then(function(){setAddress(recipientId,senderId,address.id);});});},error:function error(user,_error3){console.log('Failed to create new object, with error code: '+_error3.message);}});});});}}function saveAddress(recipientId,senderId){return bot.sendTypingOn(recipientId,senderId).then(function(){var consumer=(0,_localStore.getData)(recipientId,'consumer');var userBuffer=bot.buffer[recipientId];var location=new Parse.GeoPoint({latitude:parseFloat(userBuffer.location.lat),longitude:parseFloat(userBuffer.location.lng)});var consumerAddress=new _ParseModels.ConsumerAddress();consumerAddress.set('name',userBuffer.address_name);consumerAddress.set('address',userBuffer.route+\" # \"+userBuffer.street_number);consumerAddress.set('consumer',{__type:\"Pointer\",className:\"Consumer\",objectId:consumer.objectId});consumerAddress.set('location',location);consumerAddress.set('city',userBuffer.locality);consumerAddress.set('country',userBuffer.country);consumerAddress.set('countryCode',userBuffer.country_code);consumerAddress.set('postalCode',userBuffer.postal_code);consumerAddress.set('state',userBuffer.state);consumerAddress.set('description',userBuffer.complement);consumerAddress.save(undefined,{success:function success(result){delete userBuffer.address;delete userBuffer.location;delete userBuffer.complement;delete userBuffer['address_name'];return bot.sendTypingOff(recipientId,senderId).then(function(){return bot.sendTextMessage(recipientId,senderId,\"La direccin ha sido almacenada.\").then(function(){setAddress(recipientId,senderId,result.id);});});},error:function error(user,_error4){console.log('Failed to create new object, with error code: '+_error4.message);}});});}function setEmail(recipientId,senderId){bot.setListener(recipientId,'email','text',setEmailCheck);return bot.sendTypingOff(recipientId,senderId).then(function(){return bot.sendTextMessage(recipientId,senderId,\"Por favor escribe tu email:\");});}function setEmailCheck(recipientId,senderId,value){var userBuffer=bot.buffer[recipientId];var consumer=(0,_localStore.getData)(recipientId,'consumer').rawParseObject;consumer.setEmail(userBuffer.email);consumer.saveInStore(store,recipientId).then(function(){delete userBuffer.email;checkOrder(recipientId);});}function setTelephone(recipientId,senderId){bot.setListener(recipientId,'telephone','text',setTelephoneCheck);return bot.sendTypingOff(recipientId,senderId).then(function(){return bot.sendTextMessage(recipientId,senderId,\"Por favor escribe tu nmero telefnico:\");});}function setTelephoneCheck(recipientId,senderId){var userBuffer=bot.buffer[recipientId];var consumer=(0,_localStore.getData)(recipientId,'consumer').rawParseObject;consumer.setPhone(userBuffer.telephone);consumer.saveInStore(store,recipientId).then(function(){delete userBuffer.telephone;checkOrder(recipientId);});}function setLocationCheck(recipientId,senderId){var userBuffer=bot.buffer[recipientId];_geocoder2.default.reverseGeocode(userBuffer.location.lat,userBuffer.location.lng,function(error,data){if(!error&&data.status=='OK'){setAddressComponetsInBuffer(recipientId,data.results[0]);}else{console.log('Geocode not found');console.log(error);sendNullMapMessage(recipientId).then(function(){newAddress(recipientId);});}});}function setAddress(recipientId,senderId,id){return bot.sendTypingOn(recipientId,senderId).then(function(){store.dispatch(Actions.setAddress(recipientId,id)).then(function(){var address=(0,_localStore.getData)(recipientId,'address');Parse.Cloud.run('getProducts',{businessId:BUSINESS_ID,lat:address.location.lat,lng:address.location.lng}).then(function(result){var pointSale=result.pointSale;store.dispatch(Actions.setCustomerPointSale(recipientId,pointSale.id)).then(function(){return bot.sendTypingOff(recipientId,senderId).then(function(){return bot.sendTextMessage(recipientId,senderId,\"Perfecto, ya seleccion tu direccin para este pedido\").then(function(){sendCategories(recipientId,senderId,0);});});});},function(error){if(error.code=='141'){return bot.sendTypingOff(recipientId,senderId).then(function(){return bot.sendTextMessage(recipientId,senderId,\"La direccin seleccionada no est dentro de la cobertura de nuestras sedes, por favor intenta con otra direccin\").then(function(){sendAddressesWithTitle(recipientId);});});}else{console.log('error');console.log(error);}});});});}function editAddress(recipientId,senderId,id){return bot.sendTypingOn(recipientId,senderId).then(function(){return bot.sendTypingOff(recipientId,senderId).then(function(){bot.setDataBuffer(recipientId,'addressPayload','EditAddress-'+id);writeAddress(recipientId);});});}function removeAddress(recipientId,senderId,id){return bot.sendTypingOn(recipientId,senderId).then(function(){new Parse.Query(_ParseModels.ConsumerAddress).get(id).then(function(consumerAddress){consumerAddress.destroy().then(function(){return bot.sendTypingOff(recipientId,senderId).then(function(){return bot.sendTextMessage(recipientId,senderId,\"La direccin ha sido eliminada.\").then(function(){sendAddresses(recipientId);});});});});});}function removeCreditCard(recipientId,senderId,id){return bot.sendTypingOn(recipientId,senderId).then(function(){new Parse.Query(_ParseModels.CreditCard).get(id).then(function(creditCard){creditCard.destroy().then(function(){return bot.sendTypingOff(recipientId,senderId).then(function(){return bot.sendTextMessage(recipientId,senderId,\"La tarjeta de credito ha sido eliminada.\").then(function(){sendCreditCards(recipientId);});});});});});}function sendCategories(recipientId,senderId,index){return bot.sendTypingOn(recipientId,senderId).then(function(){authentication(recipientId,senderId).then(function(){Parse.Cloud.run('getProducts',{businessId:BUSINESS_ID}).then(function(result){if(result.pointSaleIsOpen){if(typeof index=='undefined')index=0;else if(typeof index=='string')index=parseInt(index);if(index==0){bot.sendTypingOff(recipientId,senderId).then(function(){bot.sendTextMessage(recipientId,senderId,\"A continuacin te presentamos las categoras de productos disponibles.\");});}sendCategoriesDetail(recipientId,senderId,result.categories,index);}else{sendScheduleRestriction(recipientId,result.pointSaleSchedules);}},function(error){console.log('error');console.log(error);});});});}function splitCategories(recipientId,categories,index){var customer=(0,_localStore.getData)(recipientId,'customer');var image_url=void 0;var idx=0;var elements=[];categories.forEach(function(item){if(item&&item.get('name')){if(idx>=index*bot.limit&&idx<(index+1)*bot.limit){var image=item.get('image');image_url=typeof image!='undefined'?image.url():customer.image.url;elements.push({title:item.get('name'),image_url:image_url,buttons:[{type:\"postback\",title:'Ver categora',payload:\"SendProducts-\"+item.id+\"-0\"}]});}idx=idx+1;}});return elements;}function sendCategoriesDetail(recipientId,senderId,categories,index){var elements=splitCategories(recipientId,categories,index);var idx=Object.keys(categories).length;var buttons=[];var catIni=(index+1)*bot.limit;var catFin=idx>catIni+bot.limit?catIni+bot.limit:idx;if(idx>(index+1)*bot.limit){buttons.push({type:\"postback\",title:\"Categoras \"+(catIni+1)+\"-\"+catFin,payload:\"SendCategories-\"+(index+1)});elements.push({title:\"Ver ms categorias \",subtitle:\"Categoras disponibles\",buttons:buttons});}return bot.sendTypingOff(recipientId,senderId).then(function(){return bot.sendGenericMessage(recipientId,senderId,elements);});}function sendProducts(recipientId,senderId,categoryId,proIdx){return bot.sendTypingOn(recipientId,senderId).then(function(){proIdx=parseInt(proIdx);if(proIdx==0){new Parse.Query(_ParseModels.Category).get(categoryId).then(function(category){return bot.sendTypingOff(recipientId,senderId).then(function(){return bot.sendTextMessage(recipientId,senderId,\"Selecciona \"+category.get('name')+\":\");});},function(object,error){console.log(error);});}Parse.Cloud.run('getProducts',{businessId:BUSINESS_ID,category:categoryId}).then(function(result){if(result.hasOwnProperty('categories')){sendCategoriesDetail(recipientId,senderId,result.categories,0);}else{if(result.products.length==0){bot.sendTypingOff(recipientId,senderId).then(function(){bot.sendQuickReplyMessage(recipientId,senderId,\"No existen productos en esta categora\",[{\"content_type\":\"text\",\"title\":\"Seguir pidiendo\",\"payload\":\"SendContinueOrder\"},{\"content_type\":\"text\",\"title\":\"Ver carrito\",\"payload\":\"SendCart\"}]);});}else{sendProductsDetail(recipientId,categoryId,result.products,proIdx);}}},function(error){console.log('error');console.log(error);});});}function splitProducts(recipientId,products,proIdx){var customer=(0,_localStore.getData)(recipientId,'customer');var image_url=void 0;var idx=0;var elements=[];products.forEach(function(product){if(product&&product.get('name')){if(idx>=proIdx*bot.limit&&idx<(proIdx+1)*bot.limit){var image=product.get('image');image_url=typeof image!='undefined'?image.url():customer.image.url;elements.push({title:product.get('name')+\": $\"+product.get('priceDefault'),subtitle:product.get('description'),image_url:image_url,buttons:[{type:\"postback\",title:\"Agregar\",payload:\"AddProduct-\"+product.id},{type:\"postback\",title:'Ver descripcin',payload:\"SendProductDescription-\"+product.id}]});}idx=idx+1;}});return elements;}function sendProductsDetail(recipientId,senderId,categoryId,products,index){var elements=splitProducts(recipientId,products,index);var idx=Object.keys(products).length;var buttons=[];var catIni=(index+1)*bot.limit;var catFin=idx>catIni+bot.limit?catIni+bot.limit:idx;if(idx>(index+1)*bot.limit){buttons.push({type:\"postback\",title:\"Productos \"+(catIni+1)+\"-\"+catFin,payload:\"SendProducts-\"+categoryId+\"-\"+(index+1)});elements.push({title:\"Ver ms productos \",subtitle:\"Productos disponibles\",buttons:buttons});}return bot.sendTypingOff(recipientId,senderId).then(function(){return bot.sendGenericMessage(recipientId,senderId,elements);});}function createCart(recipientId,senderId){var userData=(0,_localStore.getData)(recipientId);Object.assign(userData,{'cart':{items:new Map()}});return userData.cart;}function addProduct(recipientId,senderId,productId){var cart=(0,_localStore.getData)(recipientId,'cart');if(typeof cart=='undefined'){cart=createCart(recipientId);}var items=cart.items;new Parse.Query(_ParseModels.Product).get(productId).then(function(product){var productObject=(0,_parseUtils.extractParseAttributes)(product);var item=items.get(productId);var promises=[];if(typeof item=='undefined'){items.set(productId,{quantity:1,price:productObject.priceDefault});item=items.get(productId);}else{item.quantity+=1;}if(typeof item.modifiers=='undefined'){item.modifiers=[];}if(typeof productObject.modifiers!='undefined'){productObject.modifiers.forEach(function(obj,index,array){promises.push(new Parse.Query(_ParseModels.Modifier).get(obj.objectId).then(function(modifier){return(0,_parseUtils.extractParseAttributes)(modifier);}));});}Parse.Promise.when(promises).then(function(modifiers){var undefinedModifiers=checkModifiers(recipientId,productId,modifiers);console.log(undefinedModifiers);//checkModifiersComplete(recipientId, productId, modifiers).then(result =>{\n//    console.log('result: '+result);\n//});\nif(undefinedModifiers.length>0){//Show multiples modifiers\npromises=[];undefinedModifiers[0].items.forEach(function(modifierItem){promises.push(new Parse.Query(_ParseModels.ModifierItem).get(modifierItem.objectId).then(function(modifierItem){return(0,_parseUtils.extractParseAttributes)(modifierItem);}));});Parse.Promise.when(promises).then(function(modifierItems){sendModifierMenu(recipientId,productId,undefinedModifiers[0],modifierItems);});}else{saveCart(recipientId);sendAddProductNenu(recipientId,productId);}});},function(object,error){console.log(error);});}function sendAddProductNenu(recipientId,senderId,productId){return new Parse.Query(_ParseModels.Product).get(productId).then(function(product){return bot.sendTypingOff(recipientId,senderId).then(function(){return bot.sendQuickReplyMessage(recipientId,senderId,\"El producto \"+product.get('name')+\" ha sido agregado.\\n\\nDeseas seguir pidiendo o ver tu carrito?\",[{\"content_type\":\"text\",\"title\":\"Seguir pidiendo\",\"payload\":\"SendContinueOrder\"},{\"content_type\":\"text\",\"title\":\"Ver carrito\",\"payload\":\"SendCart\"}]);});},function(object,error){console.log(error);});}function sendContinueOrder(recipientId,senderId){return bot.sendTypingOff(recipientId,senderId).then(function(){bot.sendTextMessage(recipientId,senderId,\"Puedes escribir el nombre de un producto, ej: Ensalada mediterranea, o seleccionarlo en el siguiente men:\").then(function(){sendCategories(recipientId,senderId,0);});});}function sendModifierMenu(recipientId,senderId,productId,modifier,items){var quick_replies=[];items.forEach(function(item){if(quick_replies.length<=bot.limit){quick_replies.push({\"content_type\":\"text\",\"title\":item.name,\"payload\":\"AddModifier-\"+productId+\"-\"+modifier.objectId+\"-\"+item.objectId});}});return bot.sendTypingOff(recipientId,senderId).then(function(){return bot.sendQuickReplyMessage(recipientId,senderId,\"Escoge \"+modifier.name+\":\",quick_replies);});}function addModifier(recipientId,senderId,productId,modifierId,itemId){var cart=(0,_localStore.getData)(recipientId,'cart');var items=cart.items;var item=items.get(productId);var orderItemModifier=new _ParseModels.OrderItemModifier();orderItemModifier.set('modifier',{__type:\"Pointer\",className:\"Modifier\",objectId:modifierId});orderItemModifier.set('modifierItem',{__type:\"Pointer\",className:\"ModifierItem\",objectId:itemId});//orderItemModifier.set('price', itemId.price)\norderItemModifier.save(undefined,{success:function success(result){item.modifiers.push({__type:\"Pointer\",className:\"OrderItemModifier\",objectId:result.id});saveCart(recipientId);sendAddProductNenu(recipientId,productId);},error:function error(user,_error5){console.log('Failed to create new object, with error code: '+_error5.message);}});}function checkModifiers(recipientId,senderId,productId,modifiers){var cart=(0,_localStore.getData)(recipientId,'cart');var items=cart.items;var item=items.get(productId);var exist=false;var result=[];modifiers.forEach(function(modifier){exist=false;item.modifiers.forEach(function(itemModifier){console.log(itemModifier.objectId);//exist true\n});if(!exist){result.push(modifier);}});return result;}function checkModifiersComplete(recipientId,senderId,productId,modifiers){var cart=(0,_localStore.getData)(recipientId,'cart');var items=cart.items;var item=items.get(productId);var promises=[];console.log(modifiers);console.log(modifiers.length);console.log(cart.items);console.log(item);console.log(item.modifiers.length);if(modifiers.length!=item.modifiers.length){promises=[];modifiers.forEach(function(modifier){modifier.items.forEach(function(modifierItem){promises.push(new Parse.Query(_ParseModels.ModifierItem).get(modifierItem.objectId).then(function(modifierItem){return(0,_parseUtils.extractParseAttributes)(modifierItem);}));});return Parse.Promise.when(promises).then(function(elements){sendModifierMenu(recipientId,productId,modifier,elements);return true;});});}}function removeProduct(recipientId,senderId,productId){var cart=(0,_localStore.getData)(recipientId,'cart');if(cart==undefined){cart=createCart(recipientId);}var items=cart.items;var item=items.get(productId);new Parse.Query(_ParseModels.OrderItem).get(item.id,{success:function success(orderItem){orderItem.destroy({});items.delete(productId);var itemsPointers=[];var _iteratorNormalCompletion4=true;var _didIteratorError4=false;var _iteratorError4=undefined;try{for(var _iterator4=items[Symbol.iterator](),_step4;!(_iteratorNormalCompletion4=(_step4=_iterator4.next()).done);_iteratorNormalCompletion4=true){var _step4$value=_slicedToArray(_step4.value,2),key=_step4$value[0],value=_step4$value[1];itemsPointers.push({\"__type\":\"Pointer\",\"className\":\"OrderItem\",\"objectId\":value.id});}}catch(err){_didIteratorError4=true;_iteratorError4=err;}finally{try{if(!_iteratorNormalCompletion4&&_iterator4.return){_iterator4.return();}}finally{if(_didIteratorError4){throw _iteratorError4;}}}cart.itemsPointers=itemsPointers;if(items.size==0){sendCart(recipientId);}else{sendCartDetails(recipientId);}},error:function error(orderItem,_error6){console.log('error');console.log(_error6);}});}function increaseOneProduct(recipientId,senderId,productId){var cart=(0,_localStore.getData)(recipientId,'cart');if(cart==undefined){cart=createCart(recipientId);}var items=cart.items;var item=items.get(productId);item.quantity++;new Parse.Query(_ParseModels.OrderItem).get(item.id,{success:function success(orderItem){orderItem.set('amount',item.quantity);orderItem.save();sendCartDetails(recipientId);},error:function error(orderItem,_error7){console.log('error');console.log(_error7);}});}function decreaseOneProduct(recipientId,senderId,productId){var cart=(0,_localStore.getData)(recipientId,'cart');if(cart==undefined){cart=createCart(recipientId);}var items=cart.items;var item=items.get(productId);item.quantity--;if(item.quantity>0){new Parse.Query(_ParseModels.OrderItem).get(item.id,{success:function success(orderItem){orderItem.set('amount',item.quantity);orderItem.save();sendCartDetails(recipientId);},error:function error(orderItem,_error8){console.log('error');console.log(_error8);}});}else{removeProduct(recipientId,productId);}}function sendProductDescription(recipientId,senderId,productId){var product=new _ParseModels.Product();new Parse.Query(product).get(productId).then(function(product){return bot.sendTypingOff(recipientId,senderId).then(function(){return bot.sendQuickReplyMessage(recipientId,senderId,product.get('name')+\": \"+product.get('description'),[{\"content_type\":\"text\",\"title\":\"Agregar\",\"payload\":\"AddProduct-\"+productId},{\"content_type\":\"text\",\"title\":\"Seguir pidiendo\",\"payload\":\"SendContinueOrder\"},{\"content_type\":\"text\",\"title\":\"Ver carrito\",\"payload\":\"SendCart\"}]);});},function(object,error){console.log(error);});}function saveCart(recipientId,senderId){var consumerCart=new _ParseModels.Cart();var consumer=(0,_localStore.getData)(recipientId,'consumer');var address=(0,_localStore.getData)(recipientId,'address');var cart=(0,_localStore.getData)(recipientId,'cart');var paymentMethod=(0,_localStore.getData)(recipientId,'paymentMethod');var items=[];var item=void 0;var _iteratorNormalCompletion5=true;var _didIteratorError5=false;var _iteratorError5=undefined;try{for(var _iterator5=cart.items[Symbol.iterator](),_step5;!(_iteratorNormalCompletion5=(_step5=_iterator5.next()).done);_iteratorNormalCompletion5=true){var _step5$value=_slicedToArray(_step5.value,2),id=_step5$value[0],properties=_step5$value[1];item=new _ParseModels.OrderItem();if(properties.hasOwnProperty('id')){item.set('id',properties.id);}item.set('product',{__type:\"Pointer\",className:\"Product\",objectId:id});item.set('price',properties.price);item.set('amount',properties.quantity);item.set('modifiers',properties.modifiers);item.set('modifiersGroups',[]);items.push(item);}}catch(err){_didIteratorError5=true;_iteratorError5=err;}finally{try{if(!_iteratorNormalCompletion5&&_iterator5.return){_iterator5.return();}}finally{if(_didIteratorError5){throw _iteratorError5;}}}Parse.Object.saveAll(items,{success:function success(result){var itemsPointers=[];var _iteratorNormalCompletion6=true;var _didIteratorError6=false;var _iteratorError6=undefined;try{for(var _iterator6=result[Symbol.iterator](),_step6;!(_iteratorNormalCompletion6=(_step6=_iterator6.next()).done);_iteratorNormalCompletion6=true){var _item=_step6.value;var itemId=_item.get('product').objectId;cart.items.get(itemId).id=_item.id;itemsPointers.push({\"__type\":\"Pointer\",\"className\":\"OrderItem\",\"objectId\":_item.id});}}catch(err){_didIteratorError6=true;_iteratorError6=err;}finally{try{if(!_iteratorNormalCompletion6&&_iterator6.return){_iterator6.return();}}finally{if(_didIteratorError6){throw _iteratorError6;}}}if(cart.hasOwnProperty('id')){consumerCart.set('id',cart.id);}if(typeof paymentMethod!='undefined'){consumerCart.set('paymentMethod',paymentMethod.method);}consumerCart.set('consumerAddress',{__type:\"Pointer\",className:\"ConsumerAddress\",objectId:address.objectId});consumerCart.set('consumer',{__type:\"Pointer\",className:\"Consumer\",objectId:consumer.objectId});consumerCart.set('items',itemsPointers);consumerCart.save(undefined,{success:function success(result){cart['id']=result.id;cart['rawParseObject']=result;cart['itemsPointers']=itemsPointers;},error:function error(user,_error9){console.log('Failed to create new object, with error code: '+_error9.message);}});},error:function error(user,_error10){console.log('Failed to create new object, with error code: '+_error10.message);}});}function saveOrder(recipientId,senderId){getOrderState(0).then(function(state){var order=new _ParseModels.Order();var consumer=(0,_localStore.getData)(recipientId,'consumer');var customer=(0,_localStore.getData)(recipientId,'customer');var cart=(0,_localStore.getData)(recipientId,'cart');var address=(0,_localStore.getData)(recipientId,'address');var paymentMethod=(0,_localStore.getData)(recipientId,'paymentMethod');var pointSale=(0,_localStore.getData)(recipientId,'pointSale');var total=0;cart.items.forEach(function(value,key){total+=value.quantity*value.price;});order.set('consumer',{__type:'Pointer',className:'Consumer',objectId:consumer.objectId});order.set('consumerAddress',{__type:'Pointer',className:'ConsumerAddress',objectId:address.objectId});order.set('pointSale',{__type:'Pointer',className:'CustomerPointSale',objectId:pointSale.objectId});order.set('state',{__type:'Pointer',className:'OrderState',objectId:state.objectId});order.set('items',cart.itemsPointers);order.set('deliveryCost',pointSale.deliveryCost);order.set('total',total);order.set('paymentMethod',paymentMethod.method);order.set('name',consumer.name);order.set('email',consumer.email);order.set('phone',consumer.phone);order.set('platform','Bot');order.save(undefined,{success:function success(order){store.dispatch(Actions.setOrder(recipientId,order)).then(function(){clearCart(recipientId);});},error:function error(user,_error11){console.log('Failed to create new object, with error code: '+_error11.message);console.log(_error11);}});});}function sendPurchaseOptions(recipientId,senderId){return bot.sendTypingOn(recipientId,senderId).then(function(){return bot.sendTypingOff(recipientId,senderId).then(function(){return bot.sendQuickReplyMessage(recipientId,senderId,\"Tenemos las siguientes opciones disponibles:\",[{\"content_type\":\"text\",\"title\":\"Ver categorias\",\"payload\":\"SendCategories-0\"},{\"content_type\":\"text\",\"title\":\"Ver carrito\",\"payload\":\"SendCart\"}]);});});}function sendEmptyCartOptions(recipientId,senderId){return bot.sendTypingOn(recipientId,senderId).then(function(){return bot.sendTypingOff(recipientId,senderId).then(function(){return bot.sendQuickReplyMessage(recipientId,senderId,\"Tenemos las siguientes opciones disponibles:\",[{\"content_type\":\"text\",\"title\":\"Ver categorias\",\"payload\":\"SendCategories-0\"},{\"content_type\":\"text\",\"title\":\"Mis rdenes\",\"payload\":\"SendOrders\"}]);});});}function sendCart(recipientId,senderId){bot.sendTypingOn(recipientId,senderId).then(function(){authentication(recipientId,senderId).then(function(){var user=(0,_localStore.getData)(recipientId,'user');var customer=(0,_localStore.getData)(recipientId,'customer');var consumer=(0,_localStore.getData)(recipientId,'consumer');var cart=(0,_localStore.getData)(recipientId,'cart');var address=(0,_localStore.getData)(recipientId,'address');var customer_image_url=void 0;if(typeof customer!='undefined'){customer_image_url=customer.image.url;}if(cart==undefined){cart=createCart(recipientId);}var items=cart.items;var elements=[];var element={};var total=0;var orderLimit=items.size;var ind=0;var image=void 0;var image_url=void 0;if(orderLimit==0){bot.sendTypingOff(recipientId,senderId).then(function(){return bot.sendTextMessage(recipientId,senderId,\"Tu carrito de compras est vaco.\").then(function(){sendEmptyCartOptions(recipientId);});});}else{items.forEach(function(value,key){var product=new Parse.Query(_ParseModels.Product);product.get(key,{success:function success(item){image=item.get('image');image_url=customer_image_url;if(image){image_url=image.url();}element={};element['title']=item.get('name');element['subtitle']=item.get('description');element['quantity']=value.quantity;element['price']=parseInt(item.get('priceDefault'));element['currency']=\"COP\";element['image_url']=image_url;elements.push(element);total+=element['quantity']*element['price'];ind++;if(ind==orderLimit){sendCartReceipt(recipientId,cart.id,elements,total);}},error:function error(_error12){alert(\"Error: \"+_error12.code+\" \"+_error12.message);}});});}});});}function sendCartReceipt(recipientId,senderId,cartId,elements,total){var user=(0,_localStore.getData)(recipientId,'user');var consumer=(0,_localStore.getData)(recipientId,'consumer');var address=(0,_localStore.getData)(recipientId,'address');var pointSale=(0,_localStore.getData)(recipientId,'pointSale');var payment_method=(0,_localStore.getData)(recipientId,'payment_method');var addressData=undefined;if(typeof payment_method=='undefined'){payment_method={name:'Sin definir'};}if(typeof address!='undefined'){addressData={street_1:address.address?address.address:'Direccin no definida',street_2:address.description?address.description:'Sin complemento',city:address.city?address.city:'No definida',postal_code:address.postalCode?address.postalCode:'No definido',state:address.state?address.state:'No definido',country:address.countryCode?address.countryCode:'No definido'};}return bot.sendTypingOff(recipientId,senderId).then(function(){return bot.sendReceiptMessage(recipientId,{template_type:\"receipt\",recipient_name:user.first_name+\" \"+user.last_name,order_number:cartId,currency:\"COP\",payment_method:payment_method.name,timestamp:Math.trunc(Date.now()/1000).toString(),elements:elements,address:addressData,summary:{subtotal:total,shipping_cost:pointSale.deliveryCost,total_cost:total+pointSale.deliveryCost}},[{\"content_type\":\"text\",\"title\":\"Finalizar pedido\",\"payload\":\"CheckOrder\"},{\"content_type\":\"text\",\"title\":\"Seguir Pidiendo\",\"payload\":\"SendContinueOrder\"},{\"content_type\":\"text\",\"title\":\"Modificar carrito\",\"payload\":\"SendCartDetails\"},{\"content_type\":\"text\",\"title\":\"Borrar carrito\",\"payload\":\"ClearAndSendCart\"}]);});}function sendCartDetails(recipientId,senderId){return bot.sendTypingOn(recipientId,senderId).then(function(){var cart=(0,_localStore.getData)(recipientId,'cart');var customer=(0,_localStore.getData)(recipientId,'customer');var consumer=(0,_localStore.getData)(recipientId,'consumer');var image_url=customer.image.url;var items=cart.items;var promises=[];items.forEach(function(value,key){if(promises.length<=bot.limit){promises.push(new Parse.Query(_ParseModels.Product).get(key).then(function(product){var image=product.get('image');if(image){image_url=image.url();}return{\"title\":product.get('name')+\": $\"+value.price,\"subtitle\":\"Cantidad solicitada: \"+value.quantity,\"image_url\":image_url,\"buttons\":[{\"type\":\"postback\",\"title\":\"Quitar\",\"payload\":\"RemoveProduct-\"+key},{\"type\":\"postback\",\"title\":\"Aumentar 1\",\"payload\":\"IncreaseOneProduct-\"+key},{\"type\":\"postback\",\"title\":\"Disminuir 1\",\"payload\":\"DecreaseOneProduct-\"+key}]};}));}});return Parse.Promise.when(promises).then(function(elements){return bot.sendTypingOff(recipientId,senderId).then(function(){return bot.sendGenericMessage(recipientId,senderId,elements).then(function(){sendEditCartOptions(recipientId);});});});});}function sendEditCartOptions(recipientId,senderId){return bot.sendQuickReplyMessage(recipientId,senderId,\"Opciones del carrito:\",[{\"content_type\":\"text\",\"title\":\"Finalizar pedido\",\"payload\":\"CheckOrder\"},{\"content_type\":\"text\",\"title\":\"Seguir pidiendo\",\"payload\":\"SendContinueOrder\"}]);}function editCart(recipientId,senderId){var cart=(0,_localStore.getData)(recipientId,'cart');bot.sendTypingOn(recipientId,senderId);return bot.sendTypingOff(recipientId,senderId).then(function(){return bot.sendGenericMessage(recipientId,senderId,[{\"title\":\"Opciones\",\"image_url\":SERVER_URL+\"assets/thinking.jpg\",\"buttons\":[{\"type\":\"web_url\",\"url\":SERVER_URL+\"cart?\"+cart.id,\"title\":\"Remover producto\",\"webview_height_ratio\":\"full\",\"messenger_extensions\":true}]}]);});}function clearCart(recipientId,senderId){var cart=(0,_localStore.getData)(recipientId,'cart');if(typeof cart!='undefined'){(function(){var items=cart.items;cart.itemsPointers=[];items.forEach(function(value,key){items.delete(key);});})();}return new _promise2.default(function(resolve,reject){resolve();});}function clearAndSendCart(recipientId,senderId){clearCart(recipientId).then(function(){sendCart(recipientId);});}function checkOrder(recipientId,senderId){var cart=(0,_localStore.getData)(recipientId,'cart');var consumer=(0,_localStore.getData)(recipientId,'consumer');var pointSale=(0,_localStore.getData)(recipientId,'pointSale');var total=0;cart.items.forEach(function(value,key){total+=value.quantity*value.price;});if(pointSale.minOrderPrice&&pointSale.minOrderPrice>total){sendMinOrderPriceRestriction(recipientId);}else if(typeof consumer.phone=='undefined'||consumer.phone==''){setTelephone(recipientId);}else if(typeof consumer.email=='undefined'||consumer.email==''){setEmail(recipientId);}else{checkPayment(recipientId);}}function checkAddress(recipientId,senderId){}function checkPayment(recipientId,senderId){return bot.sendTypingOn(recipientId,senderId).then(function(){store.dispatch(Actions.loadPaymentMethods(recipientId)).then(function(){var paymentMethods=(0,_localStore.getData)(recipientId,'paymentMethods');var quick_replies=[];for(var i in paymentMethods){quick_replies.push({\"content_type\":\"text\",\"title\":paymentMethods[i].name.substring(0,20),\"payload\":\"Checkout-\"+paymentMethods[i].objectId});}return bot.sendTypingOff(recipientId,senderId).then(function(){return bot.sendQuickReplyMessage(recipientId,senderId,\"Como vas a pagar tu pedido? (Tu pedido se cobra cuando lo recibes)\",quick_replies);});});});}function checkout(recipientId,senderId,id){bot.sendTypingOn(recipientId,senderId);store.dispatch(Actions.setPaymentMethod(recipientId,id)).then(function(){var state=store.getState();var paymentTypes=state['paymentTypes'];var paymentMethod=(0,_localStore.getData)(recipientId,'paymentMethod');var paymentFunction=paymentTypes[paymentMethod.method.objectId];paymentFunction(recipientId);});}function sendMinOrderPriceRestriction(recipientId,senderId){var pointSale=(0,_localStore.getData)(recipientId,'pointSale');return bot.sendTypingOff(recipientId,senderId).then(function(){return bot.sendTextMessage(recipientId,senderId,\"El valor minimo de una orden con domicilio es \"+pointSale.minOrderPrice+\", \\npor favor modifica tu pedido para cumplir este requisito\").then(function(){sendPurchaseOptions(recipientId);});});}function sendScheduleRestriction(recipientId,senderId,pointSaleSchedules){var pointSale=(0,_localStore.getData)(recipientId,'pointSale');var days=['Domingo','Lunes','Martes','Miercoles','Jueves','Viernes','Sabado','Domingo'];var text='En este momento nuestros puntos de venta estan cerrados, \\npor favor solicita tu domicilio en los siguientes horarios:\\n\\n';var _iteratorNormalCompletion7=true;var _didIteratorError7=false;var _iteratorError7=undefined;try{for(var _iterator7=pointSaleSchedules[Symbol.iterator](),_step7;!(_iteratorNormalCompletion7=(_step7=_iterator7.next()).done);_iteratorNormalCompletion7=true){var pointSaleSchedule=_step7.value;var daysActive=pointSaleSchedule.get('daysActive');var allDay=pointSaleSchedule.get('allDay');for(var dayID in daysActive){if(daysActive.length-1!=dayID){text+=days[daysActive[dayID]-1]+\", \";}else{text+=\"y \"+days[daysActive[dayID]-1]+\" \";}}if(allDay){text+='las 24 horas\\n';}else{text+=\"desde las \"+pointSaleSchedule.get('hourStart')+\" \";text+=\"hasta las \"+pointSaleSchedule.get('hourEnd');}text+=\"\\n\";}}catch(err){_didIteratorError7=true;_iteratorError7=err;}finally{try{if(!_iteratorNormalCompletion7&&_iterator7.return){_iterator7.return();}}finally{if(_didIteratorError7){throw _iteratorError7;}}}return bot.sendTypingOff(recipientId,senderId).then(function(){return bot.sendTextMessage(recipientId,senderId,text).then(function(){sendMenu(recipientId);});});}function sendCash(recipientId,senderId){return bot.sendTypingOn(recipientId,senderId).then(function(){var paymentMethod=(0,_localStore.getData)(recipientId,'paymentMethod');saveCart(recipientId);return bot.sendTypingOff(recipientId,senderId).then(function(){return bot.sendTextMessage(recipientId,senderId,\"Se ha registrado el pago con \"+paymentMethod.name).then(function(){orderConfirmation(recipientId);});});});}function registerCreditCard(recipientId,senderId){bot.sendTypingOn(recipientId,senderId);authentication(recipientId,senderId).then(function(){var consumer=(0,_localStore.getData)(recipientId,'consumer');return bot.sendTypingOff(recipientId,senderId).then(function(){return bot.sendGenericMessage(recipientId,senderId,[{\"title\":\"Registro de tarjeta de credito y finalizacin de tu pedido.\\n\\nEstas de acuerdo?\",\"image_url\":SERVER_URL+\"assets/images/creditCards.jpg\",\"subtitle\":\"Por razones de seguridad te redireccionaremos a una pgina web segura.\",\"buttons\":[{\"type\":\"web_url\",\"title\":\"Si\",\"url\":SERVER_URL+\"creditCard?id=\"+consumer.objectId,\"webview_height_ratio\":\"full\",\"messenger_extensions\":true},{\"type\":\"postback\",\"title\":\"No\",\"payload\":\"CancelRegisterCreditCard\"}]}]);});});}function registerCreditCardAndPay(recipientId,senderId){bot.setDataBuffer(recipientId,'creditCardPayload','SendCreditCards');registerCreditCard(recipientId);}function cancelRegisterCreditCard(recipientId,senderId){bot.sendTypingOn(recipientId,senderId).then(function(){var userBuffer=bot.buffer[recipientId];return bot.sendTypingOff(recipientId,senderId).then(function(){return bot.sendTextMessage(recipientId,senderId,\"Si no ingresas los datos de tu tarjeta en nuestro sitio seguro, no podras comprar con tarjeta online\").then(function(){if(typeof userBuffer!='undefined'&&userBuffer.hasOwnProperty('creditCardPayload')){checkPayment(recipientId);}else{sendAccount(recipientId);}});});});}function sendRegisteredCreditCards(recipientId,senderId){bot.sendTypingOn(recipientId,senderId).then(function(){var user=(0,_localStore.getData)(recipientId,'user');var consumer=(0,_localStore.getData)(recipientId,'consumer');_ParseModels.CreditCard.loadInStore(store,recipientId,user).then(function(){var creditCards=(0,_localStore.getData)(recipientId,'creditCards');if(creditCards.length==0){return bot.sendTypingOff(recipientId,senderId).then(function(){return bot.sendQuickReplyMessage(recipientId,senderId,\"Aun no tienes tarjetas registradas, deseas registrar una tarjeta?\",[{\"content_type\":\"text\",\"title\":\"Si\",\"payload\":\"RegisterCreditCardAndPay\"},{\"content_type\":\"text\",\"title\":\"No\",\"payload\":\"CheckPayment\"}]);});}else{var _ret2=function(){var creditCards=(0,_localStore.getData)(recipientId,'creditCards');var quick_replies=[];quick_replies.push({\"content_type\":\"text\",\"title\":\"Agregar tarjeta\",\"payload\":\"RegisterCreditCardAndPay\"});var _iteratorNormalCompletion8=true;var _didIteratorError8=false;var _iteratorError8=undefined;try{for(var _iterator8=creditCards[Symbol.iterator](),_step8;!(_iteratorNormalCompletion8=(_step8=_iterator8.next()).done);_iteratorNormalCompletion8=true){var card=_step8.value;if(quick_replies.length<bot.limit){quick_replies.push({\"content_type\":\"text\",\"title\":card.type+\" \"+card.lastFour,\"payload\":\"PayWithCreditCard-\"+card.lastFour});}}}catch(err){_didIteratorError8=true;_iteratorError8=err;}finally{try{if(!_iteratorNormalCompletion8&&_iterator8.return){_iterator8.return();}}finally{if(_didIteratorError8){throw _iteratorError8;}}}return{v:bot.sendTypingOff(recipientId,senderId).then(function(){return bot.sendQuickReplyMessage(recipientId,senderId,\"Con cual tarjeta quieres pagar?\",quick_replies);})};}();if((typeof _ret2==='undefined'?'undefined':_typeof(_ret2))===\"object\")return _ret2.v;}});});}function payWithCreditCard(recipientId,senderId,creditCardId){bot.sendTypingOn(recipientId,senderId);orderConfirmation(recipientId);}function orderConfirmation(recipientId,senderId){return bot.sendTypingOn(recipientId,senderId).then(function(){saveOrder(recipientId);getOrderState(0).then(function(state){return bot.sendTypingOff(recipientId,senderId).then(function(){return bot.sendTextMessage(recipientId,senderId,state.messagePush+\"\\n\\nEn un momento te estaremos dando informacin en tiempo real sobre tu pedido\");});});});}function orderState(recipientId,senderId){bot.sendTypingOn(recipientId,senderId);orderSent(recipientId);}function orderSent(recipientId,senderId){return bot.sendTypingOn(recipientId,senderId).then(function(){return bot.sendTypingOff(recipientId,senderId).then(function(){return bot.sendTextMessage(recipientId,senderId,\"Buenas noticias, Tu pedido ha sido Enviado. \\n\\nHaz click en el mapa para vel tu pedido\").then(function(){sendserviceRating(recipientId);});});});}function sendOrderState(recipientId,senderId){return bot.sendTypingOn(recipientId,senderId).then(function(){var orderState=(0,_localStore.getData)(recipientId,'orderState');var pointSale=(0,_localStore.getData)(recipientId,'pointSale');return bot.sendTypingOff(recipientId,senderId).then(function(){if(orderState.order==1){return bot.sendTextMessage(recipientId,senderId,\"Tu pedido ha sido Aceptado. \\n\\nLo estan preparando en nuestra sede y te lo enviaremos en aproximadamente \"+pointSale.deliveryTime+\" minutos\");}else if(orderState.order==5){return bot.sendTextMessage(recipientId,senderId,orderState.messagePush).then(function(){sendserviceRating(recipientId);});}else if(orderState.order==6){return new _promise2.default(function(resolve,reject){resolve();});}else{return bot.sendTypingOff(recipientId,senderId).then(function(){return bot.sendTextMessage(recipientId,senderId,orderState.messagePush);});}});});}function sendserviceRating(recipientId,senderId){return bot.sendTypingOn(recipientId,senderId).then(function(){return bot.sendTypingOff(recipientId,senderId).then(function(){return bot.sendQuickReplyMessage(recipientId,senderId,\"Califica tu experiencia para ayudarnos a mejorar. \\n\\nDe 1 a 5 cuantas extrellas merece nuestro servicio?\",[{\"content_type\":\"text\",\"title\":\"5 (Excelente)\",\"payload\":\"SetScore-5\"},{\"content_type\":\"text\",\"title\":\"4 (Bien)\",\"payload\":\"SetScore-4\"},{\"content_type\":\"text\",\"title\":\"3 (Regular)\",\"payload\":\"SetScore-3\"},{\"content_type\":\"text\",\"title\":\"2 (Mal)\",\"payload\":\"SetScore-2\"},{\"content_type\":\"text\",\"title\":\"2 (Muy mal)\",\"payload\":\"SetScore-1\"}]);});});}function setScore(recipientId,senderId,score){var order=(0,_localStore.getData)(recipientId,'order');return bot.sendTypingOn(recipientId,senderId).then(function(){Parse.Cloud.run('rateOrder',{orderId:order.objectId,score:Number(score),comment:''}).then(function(result){return bot.sendTypingOff(recipientId,senderId).then(function(){thank(recipientId);});},function(error){console.log('error');console.log(error);});});}function thank(recipientId,senderId){return bot.sendTypingOn(recipientId,senderId).then(function(){return bot.sendTypingOff(recipientId,senderId).then(function(){return bot.sendTextMessage(recipientId,senderId,\"Gracias, esperamos tener el gusto de atenderle nuevamente\");});});}function searchProducts(recipientId,senderId,query,index){bot.sendTypingOn(recipientId,senderId);Parse.Cloud.run('search',{businessId:BUSINESS_ID,q:query}).then(function(result){if(result.length==0){renderSearchEmpty(recipientId);}else if(result.length==1&&result[0].type=='Category'){sendProducts(recipientId,senderId,result[0].id,0);}else{if(index==undefined)index=0;else if(typeof index=='string')index=parseInt(index);if(index==0){renderSearchInitial(recipientId);bot.sendTypingOn(recipientId,senderId);}splitSearchResult(recipientId,result,index).then(function(elements){var idx=Object.keys(result).length;var buttons=[];var catIni=(index+1)*bot.limit;var catFin=idx>catIni+bot.limit?catIni+bot.limit:idx;if(idx>(index+1)*bot.limit){buttons.push({type:\"postback\",title:\"Productos \"+(catIni+1)+\"-\"+catFin,payload:\"Search-\"+(index+1)});elements.push({title:\"Ver ms productos \",subtitle:\"Productos disponibles\",buttons:buttons});}return bot.sendTypingOff(recipientId,senderId).then(function(){return bot.sendGenericMessage(recipientId,senderId,elements);});});}},function(error){console.log('error');console.log(error);});}function renderSearchInitial(recipientId,senderId){return bot.sendTypingOff(recipientId,senderId).then(function(){return bot.sendTextMessage(recipientId,senderId,\"Se han encontrado los siguientes productos:\");});}function renderSearchEmpty(recipientId,senderId){return bot.sendTypingOff(recipientId,senderId).then(function(){return bot.sendTextMessage(recipientId,senderId,\"No se han encontrado productos que coincidan\");});}function splitSearchResult(recipientId,senderId,products,index){var customer=(0,_localStore.getData)(recipientId,'customer');var image_url=void 0;var idx=0;var elements=[];var promises=[];products.forEach(function(item){if(item&&item.name&&item.type=='Product'){if(idx>=index*bot.limit&&idx<(index+1)*bot.limit){promises.push(new Parse.Query(_ParseModels.Product).get(item.id).then(function(product){return(0,_parseUtils.extractParseAttributes)(product);}));idx=idx+1;}}});return Parse.Promise.when(promises).then(function(productObjects){productObjects.forEach(function(product){var image=product.image;image_url=typeof image!='undefined'?image.url:customer.image.url;elements.push({title:product.name+\": $\"+product.priceDefault,subtitle:product.description,image_url:image_url,buttons:[{type:\"postback\",title:'Agregar',payload:\"AddProduct-\"+product.objectId},{type:\"postback\",title:'Ver descripcin',payload:\"SendProductDescription-\"+product.objectId}]});});return elements;});//    subtitle: item.get('description'),\n}function sendHelp(recipientId,senderId){bot.sendTypingOn(recipientId,senderId);renderHelp(recipientId).then(function(){sendContactUs(recipientId);});}function renderHelp(recipientId,senderId){return bot.sendTypingOff(recipientId,senderId).then(function(){return bot.sendTextMessage(recipientId,senderId,\"InOut Bot.\\n\\nTe permite visualizar las opciones de productos, agregarlos al carrito y realizar tu compra por medio del chat de facebook.\\n\\nFuncionalidades disponibles: \\n\\n'Hola', para iniciar la conversacin\\n'Pedir Domicilio', si quieres realizar un domicilio\\n'Carrito', para ver el estado actual de tu carrito\");});}function sendContactUs(recipientId,senderId){return bot.sendTypingOn(recipientId,senderId).then(function(){return bot.sendTypingOff(recipientId,senderId).then(function(){return bot.sendTextMessage(recipientId,senderId,\" Para mayor informacin puedes contactarnos en:\\n\\n Web: http://www.inoutdelivery.com/\\n\\n Email: soporte@inoutdelivery.com\");});});}function sendOrders(recipientId,senderId){bot.sendTypingOn(recipientId,senderId);authentication(recipientId,senderId).then(function(){var consumer=(0,_localStore.getData)(recipientId,'consumer');Parse.Cloud.run('ordersBot',{businessId:BUSINESS_ID,consumerId:consumer.objectId}).then(function(orders){store.dispatch(Actions.setOrders(recipientId,orders)).then(function(){renderOrders(recipientId);});}).fail(function(error){console.log('error');console.log(error);});});}function renderOrders(recipientId,senderId){var customer=(0,_localStore.getData)(recipientId,'customer');var orders=(0,_localStore.getData)(recipientId,'orders');var elements=[];elements.push({\"title\":\"Nueva orden\",\"subtitle\":\"Puedes realizar una orden\",\"image_url\":SERVER_URL+\"assets/images/newOrden.jpg\",\"buttons\":[{\"type\":\"postback\",\"title\":\"Nueva orden\",\"payload\":\"NewOrder\"}]});var _iteratorNormalCompletion9=true;var _didIteratorError9=false;var _iteratorError9=undefined;try{for(var _iterator9=orders.ongoing[Symbol.iterator](),_step9;!(_iteratorNormalCompletion9=(_step9=_iterator9.next()).done);_iteratorNormalCompletion9=true){var order=_step9.value;if(elements.length<bot.limit){var datetime=_datetimeConverterNodejs2.default.dateString(order.createdAt);var image_url=customer.image.url;var title=order.orderNumber?'Orden: '+order.orderNumber:'Orden: '+(0,_dateformat2.default)(datetime,\"h:MM:ss TT dd/mm/yyyy\");elements.push({\"title\":title,\"subtitle\":'Estado: '+order.state.name+', Valor: $'+order.total,\"image_url\":image_url,\"buttons\":[{\"type\":\"postback\",\"title\":\"Ver orden\",\"payload\":\"SendOrder-\"+order.objectId},{\"type\":\"postback\",\"title\":\"Cancelar orden\",\"payload\":\"CancelOrder-\"+order.objectId}]});}}}catch(err){_didIteratorError9=true;_iteratorError9=err;}finally{try{if(!_iteratorNormalCompletion9&&_iterator9.return){_iterator9.return();}}finally{if(_didIteratorError9){throw _iteratorError9;}}}return bot.sendTypingOff(recipientId,senderId).then(function(){return bot.sendGenericMessage(recipientId,senderId,elements);});}function sendOrder(recipientId,senderId,id){bot.sendTypingOn(recipientId,senderId);authentication(recipientId,senderId).then(function(){var orders=(0,_localStore.getData)(recipientId,'orders');var customer=(0,_localStore.getData)(recipientId,'customer');var customer_image_url=customer.image.url;var currentOrder=void 0;var elements=[];var element=void 0;var image_url=void 0;var product=void 0;var _iteratorNormalCompletion10=true;var _didIteratorError10=false;var _iteratorError10=undefined;try{for(var _iterator10=orders.ongoing[Symbol.iterator](),_step10;!(_iteratorNormalCompletion10=(_step10=_iterator10.next()).done);_iteratorNormalCompletion10=true){var order=_step10.value;if(order.objectId==id){currentOrder=order;}}}catch(err){_didIteratorError10=true;_iteratorError10=err;}finally{try{if(!_iteratorNormalCompletion10&&_iterator10.return){_iterator10.return();}}finally{if(_didIteratorError10){throw _iteratorError10;}}}var _iteratorNormalCompletion11=true;var _didIteratorError11=false;var _iteratorError11=undefined;try{for(var _iterator11=currentOrder.items[Symbol.iterator](),_step11;!(_iteratorNormalCompletion11=(_step11=_iterator11.next()).done);_iteratorNormalCompletion11=true){var item=_step11.value;product=item.product;image_url=customer_image_url;if(product.image){image_url=product.image.url;}element={};element['title']=product.name;element['quantity']=item.amount;element['price']=item.price;element['currency']=\"COP\";element['image_url']=image_url;elements.push(element);}}catch(err){_didIteratorError11=true;_iteratorError11=err;}finally{try{if(!_iteratorNormalCompletion11&&_iterator11.return){_iterator11.return();}}finally{if(_didIteratorError11){throw _iteratorError11;}}}renderOrder(recipientId,currentOrder,elements);});}function renderOrder(recipientId,senderId,order,elements){var user=(0,_localStore.getData)(recipientId,'user');var consumer=(0,_localStore.getData)(recipientId,'consumer');var address=order.consumerAddress;var pointSale=order.pointSale;var payment_method=order.paymentMethod;var addressData=undefined;if(typeof payment_method=='undefined'){payment_method={name:'Sin definir'};}if(typeof address!='undefined'){addressData={street_1:address.address?address.address:'Direccin no definida',street_2:address.description?address.description:'Sin complemento',city:address.city?address.city:'No definida',postal_code:address.postalCode?address.postalCode:'No definido',state:address.state?address.state:'No definido',country:address.countryCode?address.countryCode:'No definido'};}return bot.sendTypingOff(recipientId,senderId).then(function(){return bot.sendReceiptMessage(recipientId,{template_type:\"receipt\",recipient_name:user.first_name+\" \"+user.last_name,order_number:order.objectId,currency:\"COP\",payment_method:payment_method.name,timestamp:Math.trunc(Date.now()/1000).toString(),elements:elements,address:addressData,summary:{subtotal:order.total,shipping_cost:pointSale.deliveryCost,total_cost:order.total+pointSale.deliveryCost}},[{\"content_type\":\"text\",\"title\":\"Nueva orden\",\"payload\":\"NewOrder\"},{\"content_type\":\"text\",\"title\":\"Ver rdenes\",\"payload\":\"SendOrders\"},{\"content_type\":\"text\",\"title\":\"Cancelar orden\",\"payload\":\"CancelOrder-\"+order.objectId}]);});}function newOrder(recipientId,senderId){clearCart(recipientId).then(function(){sendCart(recipientId);sendAddressesWithTitle(recipientId);});}function cancelOrder(recipientId,senderId,id){Parse.Cloud.run('changeStatusOrder',{status:\"canceledByUser\",orderId:id}).then(function(){renderCancelOrder(recipientId).then(function(){sendOrders(recipientId);});}).fail(function(error){console.log('error');console.log(error);});}function renderCancelOrder(recipientId,senderId){return bot.sendTypingOff(recipientId,senderId).then(function(){return bot.sendTextMessage(recipientId,senderId,\"La orden ha sido cancelada.\");});}function sendAccount(recipientId,senderId){bot.sendTypingOn(recipientId,senderId);authentication(recipientId,senderId).then(function(){renderAccount(recipientId);});}function renderAccount(recipientId,senderId){var user=(0,_localStore.getData)(recipientId,'user');var consumer=(0,_localStore.getData)(recipientId,'consumer');var elements=[{\"title\":'Ver direcciones',\"subtitle\":'Editar y eliminar direcciones',\"image_url\":SERVER_URL+\"assets/images/addresses.jpg\",\"buttons\":[{\"type\":\"postback\",\"title\":'Ver direcciones',\"payload\":\"SendAddresses\"}]},{\"title\":'Ver tarjetas de credito',\"subtitle\":'Editar y eliminar tarjetas de credito',\"image_url\":SERVER_URL+\"assets/images/creditCards.jpg\",\"buttons\":[{\"type\":\"postback\",\"title\":'Ver tarjetas',\"payload\":\"SendCreditCards\"}]}];return bot.sendTypingOff(recipientId,senderId).then(function(){return bot.sendGenericMessage(recipientId,senderId,elements);});}function sendYouAreWelcome(recipientId,senderId){return bot.sendTypingOn(recipientId,senderId).then(function(){return bot.sendTypingOff(recipientId,senderId).then(function(){return bot.sendTextMessage(recipientId,senderId,\"De nada, gracias por usar nuestros servicios\");});});}function addCreditCard(recipientId,senderId,token,data){console.log('addCreditCard');var expiration=data['expiry'].replace(/\\s+/g,\"\").split('/');return(0,_requestPromise2.default)({uri:PARSE_SERVER_URL+'/functions/addCreditCard',headers:{'Content-Type':'text/plain;charset=UTF-8','X-Parse-Application-Id':PARSE_APP_ID,'X-Parse-Session-Token':token},method:'POST',json:{\"number\":data['number'].replace(/\\s+/g,\"\"),\"holderName\":data['holderName'],\"verificationNumber\":data['cvc'],\"expirationMonth\":expiration[0],\"expirationYear\":expiration[1]}}).then(function(body){(0,_requestPromise2.default)({uri:SERVER_URL+'creditCardRegistered',method:'POST',json:{\"recipientId\":recipientId}});}).catch(function(error){console.log('error');console.log(error);});}function getOrderState(orderStateNumber){return new Parse.Query(_ParseModels.OrderState).equalTo('order',orderStateNumber).find().then(function(state){return(0,_parseUtils.extractParseAttributes)(state[0]);},function(object,error){console.log(error);});}module.exports={store:store,getData:_localStore.getData};store.dispatch({type:types.APP_LOADED});"]}