{"version":3,"sources":["../app.js"],"names":["_typeof","Symbol","iterator","obj","constructor","prototype","_slicedToArray","sliceIterator","arr","i","_arr","_n","_d","_e","undefined","_i","_s","next","done","push","value","length","err","Array","isArray","Object","TypeError","_extends","assign","target","arguments","source","key","hasOwnProperty","call","_bot","require","bot","_interopRequireWildcard","_actionTypes","types","_index","Actions","_parseUtils","_localStore","_ParseModels","_config","_config2","_interopRequireDefault","_requestPromise","_requestPromise2","_promise","_promise2","_objectAssign","_objectAssign2","_geocoder","_geocoder2","_path","_path2","_datetimeConverterNodejs","_datetimeConverterNodejs2","_dateformat","_dateformat2","__esModule","default","newObj","SERVER_URL","process","env","get","PARSE_APP_ID","PARSE_SERVER_URL","PARSE_CLIENT_KEY","FACEBOOK_APP_ID","GOOGLE_MAPS_URL","GOOGLE_MAPS_KEY","BUSINESS","rules","set","sendMenu","sendAddressesWithTitle","sendCart","sendOrders","sendAddresses","newAddress","sendAccount","sendCreditCards","registerCreditCard","sendHelp","sendYouAreWelcome","payloadRules","setAddressComplement","confirmAddress","setAddress","editAddress","removeAddress","sendCategories","sendProducts","addProduct","addModifier","removeProduct","increaseOneProduct","decreaseOneProduct","sendProductDescription","sendContinueOrder","searchProducts","sendCartDetails","editCart","clearCart","clearAndSendCart","sendPurchaseOptions","checkout","checkPayment","checkAddress","checkOrder","registerCreditCardAndPay","sendRegisteredCreditCards","cancelRegisterCreditCard","payWithCreditCard","sendOrder","newOrder","cancelOrder","removeCreditCard","setScore","defaultSearch","initialState","userData","paymentTypes","sendCash","creditCardImages","reducer","state","action","console","log","data","recipientId","type","APP_LOADED","app","CUSTOMER_LOADED","customer","extractParseAttributes","CONSUMER_LOADED","consumer","USER_LOADED","user","CONSUMER_ADDRESSES_LOADED","addresses","map","a","SET_CURRENT_ADDRESS","address","PAYMENT_METHODS_LOADED","paymentMethods","p","SET_PAYMENT_METHOD","paymentMethod","SET_ORDERS","ongoing","orders","delivered","CONSUMER_UPDATED","CONSUMER_NOT_FOUND","CONSUMER_ORDERS_LOADED","USER_CREDITCARDS_LOADED","creditCards","SET_CUSTOMER_POINT_SALE","pointSale","SET_ORDER","order","SET_USER","_user","SET_CONSUMER","_consumer","SET_CUSTOMER","_customer","SET_ORDER_STATE","_orderState","orderState","createLocalStore","req","res","sendFile","join","__dirname","post","body","signUp","psid","uid","accessToken","then","status","end","consumerID","Parse","Query","Consumer","User","id","username","logIn","success","addCreditCard","getSessionToken","error","_error","object","userBuffer","buffer","creditCardPayload","OrderState","store","dispatch","setOrderState","sendOrderState","fail","message","json","result","facebookId","conversationToken","createUser","userObject","getData","rawParseObject","createConsumer","resolve","reject","login","password","_error2","authentication","senderId","getCustomer","getUser","PAGE_ACCESS_TOKEN","getConsumer","Customer","loadInStore","BUSINESS_ID","userObj","consumerObj","sendSignUp","image_url","sendTypingOn","sendTypingOff","sendGenericMessage","image","url","first_name","name","sendTextMessage","ConsumerAddress","elements","_iteratorNormalCompletion","_didIteratorError","_iteratorError","_iterator","_step","limit","description","city","location","lat","lng","objectId","return","getState","creditCardsImages","CreditCard","creditCardImage","_iteratorNormalCompletion2","_didIteratorError2","_iteratorError2","_iterator2","_step2","creditCard","lastFour","cardHolderName","setDataBuffer","writeAddress","setListener","addressCheck","setLocationCheck","sendQuickReplyMessage","sendNullMapMessage","sendMap","sendImageMessage","sendMapConfirmation","geocode","setAddressComponetsInBuffer","results","formatted_address","geometry","_iteratorNormalCompletion3","_didIteratorError3","_iteratorError3","_iterator3","address_components","_step3","component","includes","route","long_name","street_number","short_name","locality","administrative_area","country","country_code","postal_code","addressPayload","saveAddress","startsWith","split","GeoPoint","latitude","parseFloat","longitude","consumerAddress","complement","save","_error3","address_name","__type","className","_error4","setEmail","setEmailCheck","email","saveInStore","setTelephone","setTelephoneCheck","setPhone","telephone","reverseGeocode","Cloud","run","businessId","setCustomerPointSale","code","destroy","index","pointSaleIsOpen","parseInt","sendCategoriesDetail","categories","sendScheduleRestriction","pointSaleSchedules","splitCategories","idx","forEach","item","title","buttons","payload","keys","catIni","catFin","subtitle","categoryId","proIdx","Category","category","getProducts","products","sendProductsDetail","splitProducts","product","createCart","items","Map","cart","productId","Product","productObject","promises","quantity","price","priceDefault","modifiers","array","Modifier","modifier","Promise","when","undefinedModifiers","checkModifiers","modifierItem","ModifierItem","modifierItems","sendModifierMenu","saveCart","sendAddProductNenu","quick_replies","modifierId","itemId","orderItemModifier","OrderItemModifier","_error5","exist","itemModifier","checkModifiersComplete","OrderItem","orderItem","delete","itemsPointers","_iteratorNormalCompletion4","_didIteratorError4","_iteratorError4","_iterator4","_step4","_step4$value","size","_error6","_error7","_error8","consumerCart","Cart","_iteratorNormalCompletion5","_didIteratorError5","_iteratorError5","_iterator5","_step5","_step5$value","properties","saveAll","_iteratorNormalCompletion6","_didIteratorError6","_iteratorError6","_iterator6","_step6","_item","method","_error9","_error10","saveOrder","getOrderState","Order","total","deliveryCost","phone","setOrder","_error11","sendEmptyCartOptions","customer_image_url","element","orderLimit","ind","sendCartReceipt","_error12","alert","cartId","payment_method","addressData","street_1","street_2","postalCode","countryCode","sendReceiptMessage","template_type","recipient_name","last_name","order_number","currency","timestamp","Math","trunc","Date","now","toString","summary","subtotal","shipping_cost","total_cost","sendEditCartOptions","minOrderPrice","sendMinOrderPriceRestriction","loadPaymentMethods","substring","setPaymentMethod","paymentFunction","days","text","_iteratorNormalCompletion7","_didIteratorError7","_iteratorError7","_iterator7","_step7","pointSaleSchedule","daysActive","allDay","dayID","orderConfirmation","_ret2","_iteratorNormalCompletion8","_didIteratorError8","_iteratorError8","_iterator8","_step8","card","v","creditCardId","messagePush","orderSent","sendserviceRating","deliveryTime","score","orderId","Number","comment","thank","query","q","renderSearchEmpty","renderSearchInitial","splitSearchResult","productObjects","renderHelp","sendContactUs","consumerId","setOrders","renderOrders","_iteratorNormalCompletion9","_didIteratorError9","_iteratorError9","_iterator9","_step9","datetime","dateString","createdAt","orderNumber","currentOrder","_iteratorNormalCompletion10","_didIteratorError10","_iteratorError10","_iterator10","_step10","_iteratorNormalCompletion11","_didIteratorError11","_iteratorError11","_iterator11","_step11","amount","renderOrder","renderCancelOrder","renderAccount","token","expiration","replace","uri","headers","catch","response","JSON","stringify","orderStateNumber","equalTo","find","exports"],"mappings":"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","file":"app.js","sourcesContent":["'use strict';var _typeof=typeof Symbol===\"function\"&&typeof Symbol.iterator===\"symbol\"?function(obj){return typeof obj;}:function(obj){return obj&&typeof Symbol===\"function\"&&obj.constructor===Symbol&&obj!==Symbol.prototype?\"symbol\":typeof obj;};var _slicedToArray=function(){function sliceIterator(arr,i){var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break;}}catch(err){_d=true;_e=err;}finally{try{if(!_n&&_i[\"return\"])_i[\"return\"]();}finally{if(_d)throw _e;}}return _arr;}return function(arr,i){if(Array.isArray(arr)){return arr;}else if(Symbol.iterator in Object(arr)){return sliceIterator(arr,i);}else{throw new TypeError(\"Invalid attempt to destructure non-iterable instance\");}};}();var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key];}}}return target;};var _bot=require('./bot');var bot=_interopRequireWildcard(_bot);var _actionTypes=require('./constants/actionTypes');var types=_interopRequireWildcard(_actionTypes);var _index=require('./actions/index');var Actions=_interopRequireWildcard(_index);var _parseUtils=require('./parseUtils');var _localStore=require('./localStore');var _ParseModels=require('./models/ParseModels');var _config=require('config');var _config2=_interopRequireDefault(_config);var _requestPromise=require('request-promise');var _requestPromise2=_interopRequireDefault(_requestPromise);var _promise=require('promise');var _promise2=_interopRequireDefault(_promise);var _objectAssign=require('object-assign');var _objectAssign2=_interopRequireDefault(_objectAssign);var _geocoder=require('geocoder');var _geocoder2=_interopRequireDefault(_geocoder);var _path=require('path');var _path2=_interopRequireDefault(_path);var _datetimeConverterNodejs=require('datetime-converter-nodejs');var _datetimeConverterNodejs2=_interopRequireDefault(_datetimeConverterNodejs);var _dateformat=require('dateformat');var _dateformat2=_interopRequireDefault(_dateformat);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj;}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key))newObj[key]=obj[key];}}newObj.default=obj;return newObj;}}var SERVER_URL=process.env.SERVER_URL?process.env.SERVER_URL:_config2.default.get('SERVER_URL');var PARSE_APP_ID=process.env.PARSE_APP_ID?process.env.PARSE_APP_ID:_config2.default.get('PARSE_APP_ID');var PARSE_SERVER_URL=process.env.PARSE_SERVER_URL?process.env.PARSE_SERVER_URL:_config2.default.get('PARSE_SERVER_URL');var PARSE_CLIENT_KEY=process.env.PARSE_CLIENT_KEY?process.env.PARSE_CLIENT_KEY:_config2.default.get('PARSE_CLIENT_KEY');var FACEBOOK_APP_ID=process.env.FACEBOOK_APP_ID?process.env.FACEBOOK_APP_ID:_config2.default.get('FACEBOOK_APP_ID');var GOOGLE_MAPS_URL=process.env.GOOGLE_MAPS_URL?process.env.GOOGLE_MAPS_URL:_config2.default.get('GOOGLE_MAPS_URL');var GOOGLE_MAPS_KEY=process.env.GOOGLE_MAPS_KEY?process.env.GOOGLE_MAPS_KEY:_config2.default.get('GOOGLE_MAPS_KEY');var BUSINESS=_config2.default.get('BUSINESS');bot.rules.set('hola',sendMenu);bot.rules.set('iniciar',sendMenu);bot.rules.set('empezar',sendMenu);bot.rules.set('comenzar',sendMenu);bot.rules.set('buenos dias',sendMenu);bot.rules.set('buenas tardes',sendMenu);bot.rules.set('menú',sendMenu);bot.rules.set('pedir domicilio',sendAddressesWithTitle);bot.rules.set('carrito',sendCart);bot.rules.set('cuenta',sendCart);bot.rules.set('mi orden',sendOrders);bot.rules.set('mis órdenes',sendOrders);bot.rules.set('mi dirección',sendAddresses);bot.rules.set('mis direcciones',sendAddresses);bot.rules.set('nueva dirección',newAddress);bot.rules.set('agregar dirección',newAddress);bot.rules.set('mi cuenta',sendAccount);bot.rules.set('mi tarjeta',sendCreditCards);bot.rules.set('mis tarjetas',sendCreditCards);bot.rules.set('nueva tarjeta',registerCreditCard);bot.rules.set('agregar tarjeta',registerCreditCard);bot.rules.set('ayuda',sendHelp);bot.rules.set('help',sendHelp);bot.rules.set('gracias',sendYouAreWelcome);bot.payloadRules.set('Greeting',sendMenu);bot.payloadRules.set('SendAddressesWithTitle',sendAddressesWithTitle);bot.payloadRules.set('SendAddresses',sendAddresses);bot.payloadRules.set('NewAddress',newAddress);bot.payloadRules.set('SetAddressComplement',setAddressComplement);bot.payloadRules.set('ConfirmAddress',confirmAddress);bot.payloadRules.set('SetAddress',setAddress);bot.payloadRules.set('EditAddress',editAddress);bot.payloadRules.set('RemoveAddress',removeAddress);bot.payloadRules.set('SendCategories',sendCategories);bot.payloadRules.set('SendProducts',sendProducts);bot.payloadRules.set('AddProduct',addProduct);bot.payloadRules.set('AddModifier',addModifier);bot.payloadRules.set('RemoveProduct',removeProduct);bot.payloadRules.set('IncreaseOneProduct',increaseOneProduct);bot.payloadRules.set('DecreaseOneProduct',decreaseOneProduct);bot.payloadRules.set('SendProductDescription',sendProductDescription);bot.payloadRules.set('SendContinueOrder',sendContinueOrder);bot.payloadRules.set('Search',searchProducts);bot.payloadRules.set('SendCart',sendCart);bot.payloadRules.set('SendCartDetails',sendCartDetails);bot.payloadRules.set('EditCart',editCart);bot.payloadRules.set('ClearCart',clearCart);bot.payloadRules.set('ClearAndSendCart',clearAndSendCart);bot.payloadRules.set('SendPurchaseOptions',sendPurchaseOptions);bot.payloadRules.set('Checkout',checkout);bot.payloadRules.set('CheckPayment',checkPayment);bot.payloadRules.set('CheckAddress',checkAddress);bot.payloadRules.set('CheckOrder',checkOrder);bot.payloadRules.set('RegisterCreditCard',registerCreditCard);bot.payloadRules.set('RegisterCreditCardAndPay',registerCreditCardAndPay);bot.payloadRules.set('SendRegisteredCreditCards',sendRegisteredCreditCards);bot.payloadRules.set('CancelRegisterCreditCard',cancelRegisterCreditCard);bot.payloadRules.set('PayWithCreditCard',payWithCreditCard);bot.payloadRules.set('SendOrders',sendOrders);bot.payloadRules.set('SendOrder',sendOrder);bot.payloadRules.set('NewOrder',newOrder);bot.payloadRules.set('CancelOrder',cancelOrder);bot.payloadRules.set('SendCreditCards',sendCreditCards);bot.payloadRules.set('RemoveCreditCard',removeCreditCard);bot.payloadRules.set('SetScore',setScore);bot.payloadRules.set('SendAccount',sendAccount);bot.payloadRules.set('SendHelp',sendHelp);bot.payloadRules.set('CustomerService',sendHelp);bot.defaultSearch=searchProducts;var initialState={userData:{},paymentTypes:{'Nn0joKC5VK':sendCash,'UdK0Ifc4IF':sendCash,'CHzoYrEtiY':sendRegisteredCreditCards},creditCardImages:{'VISA':'assets/images/visaCard.jpg','MASTERCARD':'assets/images/masterCard.jpg','AMERICAN':'assets/images/americanCard.jpg','DEFAULT':'assets/images/creditCards.jpg'}};var reducer=function reducer(){var state=arguments.length>0&&arguments[0]!==undefined?arguments[0]:initialState;var action=arguments[1];console.log('ACTION');console.log(action);var data=action.data;if(data&&data.hasOwnProperty('recipientId')){if(typeof state.userData[data.recipientId]=='undefined'){state.userData[data.recipientId]={};}}switch(action.type){case types.APP_LOADED:{console.log('Application is running on port',bot.app.get('port'));return _extends({},state);}case types.CUSTOMER_LOADED:{var customer=(0,_parseUtils.extractParseAttributes)(data.customer);(0,_objectAssign2.default)(state.userData[data.recipientId],{customer:customer});return _extends({},state);}case types.CONSUMER_LOADED:{var consumer=(0,_parseUtils.extractParseAttributes)(data.consumer);(0,_objectAssign2.default)(state.userData[data.recipientId],{consumer:consumer});return _extends({},state);}case types.USER_LOADED:{var user=(0,_parseUtils.extractParseAttributes)(data.user);(0,_objectAssign2.default)(state.userData[data.recipientId],{user:user});return _extends({},state);}case types.CONSUMER_ADDRESSES_LOADED:{var addresses=data.addresses.map(function(a){return(0,_parseUtils.extractParseAttributes)(a);});(0,_objectAssign2.default)(state.userData[data.recipientId],{addresses:addresses});return _extends({},state);}case types.SET_CURRENT_ADDRESS:{var address=(0,_parseUtils.extractParseAttributes)(data.address);(0,_objectAssign2.default)(state.userData[data.recipientId],{address:address});return _extends({},state);}case types.PAYMENT_METHODS_LOADED:{var paymentMethods=data.paymentMethods.map(function(p){return(0,_parseUtils.extractParseAttributes)(p);});(0,_objectAssign2.default)(state.userData[data.recipientId],{paymentMethods:paymentMethods});return _extends({},state);}case types.SET_PAYMENT_METHOD:{var paymentMethod=(0,_parseUtils.extractParseAttributes)(data.paymentMethod);(0,_objectAssign2.default)(state.userData[data.recipientId],{paymentMethod:paymentMethod});return _extends({},state);}case types.SET_ORDERS:{var ongoing=data.orders.ongoing.map(function(a){return(0,_parseUtils.extractParseAttributes)(a);});var delivered=data.orders.delivered.map(function(a){return(0,_parseUtils.extractParseAttributes)(a);});(0,_objectAssign2.default)(state.userData[data.recipientId],{orders:{ongoing:ongoing,delivered:delivered}});return _extends({},state);}case types.CONSUMER_UPDATED:{return _extends({},state);}case types.CONSUMER_NOT_FOUND:{return _extends({},state);}case types.CONSUMER_ORDERS_LOADED:{var orders=data.orders.map(function(a){return(0,_parseUtils.extractParseAttributes)(a);});(0,_objectAssign2.default)(state.userData[data.recipientId],{orders:orders});return _extends({},state);}case types.USER_CREDITCARDS_LOADED:{var creditCards=data.creditCards.map(function(a){return(0,_parseUtils.extractParseAttributes)(a);});(0,_objectAssign2.default)(state.userData[data.recipientId],{creditCards:creditCards});return _extends({},state);}case types.SET_CUSTOMER_POINT_SALE:{var pointSale=(0,_parseUtils.extractParseAttributes)(data.pointSale);(0,_objectAssign2.default)(state.userData[data.recipientId],{pointSale:pointSale});return _extends({},state);}case types.SET_ORDER:{var order=(0,_parseUtils.extractParseAttributes)(data.order);(0,_objectAssign2.default)(state.userData[data.recipientId],{order:order});return _extends({},state);}case types.SET_USER:{var _user=(0,_parseUtils.extractParseAttributes)(data.user);(0,_objectAssign2.default)(state.userData[data.recipientId],{user:_user});return _extends({},state);}case types.SET_CONSUMER:{var _consumer=(0,_parseUtils.extractParseAttributes)(data.consumer);(0,_objectAssign2.default)(state.userData[data.recipientId],{consumer:_consumer});return _extends({},state);}case types.SET_CUSTOMER:{var _customer=(0,_parseUtils.extractParseAttributes)(data.customer);(0,_objectAssign2.default)(state.userData[data.recipientId],{customer:_customer});return _extends({},state);}case types.SET_ORDER_STATE:{var _orderState=(0,_parseUtils.extractParseAttributes)(data.orderState);(0,_objectAssign2.default)(state.userData[data.recipientId],{orderState:_orderState});return _extends({},state);}default:return state;}};(0,_localStore.createLocalStore)(reducer);bot.app.get('/login',function(req,res){res.sendFile(_path2.default.join(__dirname+'/views/login.html'));});bot.app.post('/registerUser',function(req,res){var data=req.body;signUp(data.psid,data.uid,data.accessToken).then(function(user){sendMenu(data.psid);});res.status(200).end();});bot.app.get('/creditCard',function(req,res){res.sendFile(_path2.default.join(__dirname+'/views/cardForm.html'));});bot.app.post('/registerCreditCard',function(req,res){var data=req.body;var consumerID=data['consumerID'];new Parse.Query(_ParseModels.Consumer).get(consumerID).then(function(consumer){if(consumer){new Parse.Query(_ParseModels.User).get(consumer.get('user').id).then(function(user){var username=user.get('username');var recipientId=consumer.get('conversationId');Parse.User.logIn(username,username,{success:function success(userData){addCreditCard(recipientId,userData.getSessionToken(),data);},error:function error(user,_error){console.log('error');console.log(_error);}});});res.sendFile(_path2.default.join(__dirname+'/views/cardRegistered.html'));}},function(object,error){console.log(error);});});bot.app.post('/creditCardRegistered',function(req,res){console.log('creditCardRegistered');var data=req.body;var userBuffer=bot.buffer[data.recipientId];if(typeof userBuffer!='undefined'){if(userBuffer.creditCardPayload=='SendCreditCards'){sendRegisteredCreditCards(data.recipientId,1329140110447050);delete userBuffer.creditCardPayload;}else{sendCreditCards(data.recipientId,1329140110447050);}}else{sendCreditCards(data.recipientId,1329140110447050);}});bot.app.post('/changeOrderState',function(req,res){var data=req.body;new Parse.Query(_ParseModels.Consumer).get(data['consumerID']).then(function(consumer){if(consumer){new Parse.Query(_ParseModels.User).get(consumer.get('user').id).then(function(user){var username=user.get('username');var recipientId=consumer.get('conversationId');new Parse.Query(_ParseModels.OrderState).get(data['stateID']).then(function(orderState){store.dispatch(Actions.setOrderState(recipientId,orderState)).then(function(){sendOrderState(recipientId);});}).fail(function(error){console.log('Error code: '+error.message);});});}},function(object,error){console.log(error);});res.json({result:'OK'});});function signUp(recipientId,facebookId,conversationToken){return _ParseModels.User.createUser(store,recipientId,facebookId,conversationToken).then(function(){var userObject=(0,_localStore.getData)(recipientId,'user');var user=userObject.rawParseObject;return user.createConsumer(store,recipientId,conversationToken).then(function(consumer){return new _promise2.default(function(resolve,reject){resolve(userObject);});});});}function login(username,password){return Parse.User.logIn(username,password,{success:function success(user){//let val = JSON.stringify({sessionToken: user.getSessionToken()});\n//console.log(val);\nreturn user;},error:function error(user,_error2){console.log('Failed to create new object, with error code: '+_error2.message);}});}function authentication(recipientId,senderId){return getCustomer(recipientId,senderId).then(function(customer){return getUser(recipientId).then(function(user){if(typeof user=='undefined'){//sendSignUp(recipientId)\nreturn _ParseModels.User.createUser(store,recipientId,recipientId,BUSINESS[senderId].PAGE_ACCESS_TOKEN).then(function(){var userObject=(0,_localStore.getData)(recipientId,'user');var user=userObject.rawParseObject;return user.createConsumer(store,recipientId,BUSINESS[senderId].PAGE_ACCESS_TOKEN).then(function(consumer){return new _promise2.default(function(resolve,reject){resolve(userObject);});});});}else{return getConsumer(recipientId,user.rawParseObject).then(function(consumer){return new _promise2.default(function(resolve,reject){resolve(user);});/*Parse.Promise.as().then(() => {\n                        return user;\n                    });*/});}//return login(user.username, user.username).then(()=>{\n//});\n});});}function getCustomer(recipientId,senderId){var customer=(0,_localStore.getData)(recipientId,'customer');if(typeof customer=='undefined'){return _ParseModels.Customer.loadInStore(store,recipientId,BUSINESS[senderId].BUSINESS_ID).then(function(){return(0,_localStore.getData)(recipientId,'customer');});}else{return new _promise2.default(function(resolve,reject){resolve(customer);});}}function getUser(recipientId){var userObj=(0,_localStore.getData)(recipientId,'user');if(typeof userObj=='undefined'){return _ParseModels.User.loadInStore(store,recipientId).then(function(){return(0,_localStore.getData)(recipientId,'user');});}else{return new _promise2.default(function(resolve,reject){resolve(userObj);});}}function getConsumer(recipientId,user){var consumerObj=(0,_localStore.getData)(recipientId,'consumer');if(typeof consumerObj=='undefined'){return _ParseModels.Consumer.loadInStore(store,recipientId,user).then(function(){consumerObj=(0,_localStore.getData)(recipientId,'consumer');if(typeof consumerObj!='undefined'){return new _promise2.default(function(resolve,reject){resolve(consumerObj);});}else{console.log('create consumer');/*return createConsumer(recipientId, user).then( () => {\n                    return getData(recipientId, 'consumer');\n                });*/}});}else{return new _promise2.default(function(resolve,reject){resolve(consumerObj);});}}function sendSignUp(recipientId,senderId){var image_url=SERVER_URL+\"assets/images/love.jpg\";return bot.sendTypingOn(recipientId,senderId).then(function(){return bot.sendTypingOff(recipientId,senderId).then(function(){return bot.sendGenericMessage(recipientId,senderId,[{\"title\":\"Hola, soy un Bot\",\"subtitle\":\"Soy tu asistente virtual. Quieres registrarte en nuestro sistema?\",\"image_url\":image_url,\"buttons\":[{\"type\":\"web_url\",\"url\":SERVER_URL+\"login?psid=\"+recipientId,\"title\":\"Registrarme\",\"webview_height_ratio\":\"full\",\"messenger_extensions\":true}]}]);});});};function sendMenu(recipientId,senderId){return bot.sendTypingOn(recipientId,senderId).then(function(){authentication(recipientId,senderId).then(function(){var customer=(0,_localStore.getData)(recipientId,'customer');var user=(0,_localStore.getData)(recipientId,'user');var image_url=customer.image.url;return bot.sendTypingOff(recipientId,senderId).then(function(){return bot.sendGenericMessage(recipientId,senderId,[{\"title\":\"Hola \"+user.first_name+\", Bienvenido a \"+customer.name,\"subtitle\":\"Aquí puedes pedir un domicilio, escribe o selecciona alguna de las opciones:\",\"image_url\":image_url,\"buttons\":[{\"type\":\"postback\",\"title\":\"Pedir domicilio\",\"payload\":\"SendAddressesWithTitle\"},{\"type\":\"postback\",\"title\":\"Servicio al cliente\",\"payload\":\"CustomerService\"}]}]);});});});}function sendAddressesWithTitle(recipientId,senderId){return bot.sendTypingOn(recipientId,senderId).then(function(){return bot.sendTypingOff(recipientId,senderId).then(function(){return bot.sendTextMessage(recipientId,senderId,\"A cual dirección vas hacer tu pedido?\\n\\nPuedes escoger entre agregar una nueva dirección o seleccionar una de tus direcciones guardadas\").then(function(){sendAddresses(recipientId,senderId);});});});}function sendAddresses(recipientId,senderId){return bot.sendTypingOn(recipientId,senderId).then(function(){authentication(recipientId,senderId).then(function(){var consumer=(0,_localStore.getData)(recipientId,'consumer');_ParseModels.ConsumerAddress.loadInStore(store,recipientId,consumer).then(function(){var addresses=(0,_localStore.getData)(recipientId,'addresses');var elements=[];elements.push({\"title\":\"Nueva dirección\",\"subtitle\":\"Puedes agregar una nueva dirección\",\"image_url\":SERVER_URL+\"assets/images/addAddress.jpg\",\"buttons\":[{\"type\":\"postback\",\"title\":\"Nueva dirección\",\"payload\":\"NewAddress\"}]});var _iteratorNormalCompletion=true;var _didIteratorError=false;var _iteratorError=undefined;try{for(var _iterator=addresses[Symbol.iterator](),_step;!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=true){var address=_step.value;if(elements.length<bot.limit){elements.push({\"title\":address.name,\"subtitle\":address.address+\", \"+address.description+\", \"+address.city+\", \"+address.state,\"image_url\":GOOGLE_MAPS_URL+\"?center=\"+address.location.lat+\",\"+address.location.lng+\"&zoom=16&size=400x400&markers=color:red%7C\"+address.location.lat+\",\"+address.location.lng+\"&key=\"+GOOGLE_MAPS_KEY,\"buttons\":[{\"type\":\"postback\",\"title\":\"Seleccionar\",\"payload\":\"SetAddress-\"+address.objectId},{\"type\":\"postback\",\"title\":\"Modificar\",\"payload\":\"EditAddress-\"+address.objectId},{\"type\":\"postback\",\"title\":\"Quitar\",\"payload\":\"RemoveAddress-\"+address.objectId}]});}}}catch(err){_didIteratorError=true;_iteratorError=err;}finally{try{if(!_iteratorNormalCompletion&&_iterator.return){_iterator.return();}}finally{if(_didIteratorError){throw _iteratorError;}}}return bot.sendTypingOff(recipientId,senderId).then(function(){return bot.sendGenericMessage(recipientId,senderId,elements);});});});});}function sendCreditCards(recipientId,senderId){return bot.sendTypingOn(recipientId,senderId).then(function(){authentication(recipientId,senderId).then(function(){var state=store.getState();var user=(0,_localStore.getData)(recipientId,'user');var creditCardsImages=state['creditCardImages'];_ParseModels.CreditCard.loadInStore(store,recipientId,user).then(function(){var creditCards=(0,_localStore.getData)(recipientId,'creditCards');var userBuffer=bot.buffer[recipientId];var creditCardImage=void 0;var elements=[];if(typeof userBuffer!='undefined'&&userBuffer.hasOwnProperty('creditCardPayload')){delete userBuffer.creditCardPayload;}elements.push({\"title\":\"Registro de tarjeta\",\"subtitle\":\"Puedes agregar una tarjeta\",\"image_url\":SERVER_URL+\"assets/images/creditCards.jpg\",\"buttons\":[{\"type\":\"postback\",\"title\":\"Nueva tarjeta\",\"payload\":\"RegisterCreditCard\"}]});var _iteratorNormalCompletion2=true;var _didIteratorError2=false;var _iteratorError2=undefined;try{for(var _iterator2=creditCards[Symbol.iterator](),_step2;!(_iteratorNormalCompletion2=(_step2=_iterator2.next()).done);_iteratorNormalCompletion2=true){var creditCard=_step2.value;if(elements.length<bot.limit){creditCardImage=creditCardsImages.hasOwnProperty(creditCard.type)?creditCardsImages[creditCard.type]:creditCardsImages['DEFAULT'];elements.push({\"title\":creditCard.type+' '+creditCard.lastFour,\"subtitle\":creditCard.cardHolderName,\"image_url\":SERVER_URL+creditCardImage,\"buttons\":[{\"type\":\"postback\",\"title\":\"Quitar\",\"payload\":\"RemoveCreditCard-\"+creditCard.objectId}]});}}}catch(err){_didIteratorError2=true;_iteratorError2=err;}finally{try{if(!_iteratorNormalCompletion2&&_iterator2.return){_iterator2.return();}}finally{if(_didIteratorError2){throw _iteratorError2;}}}return bot.sendTypingOff(recipientId,senderId).then(function(){return bot.sendGenericMessage(recipientId,senderId,elements);});});});});}function newAddress(recipientId,senderId){return bot.sendTypingOn(recipientId,senderId).then(function(){return bot.sendTypingOff(recipientId,senderId).then(function(){bot.setDataBuffer(recipientId,'addressPayload','NewAddress');writeAddress(recipientId,senderId);});});}function writeAddress(recipientId,senderId){bot.setListener(recipientId,'address','text',addressCheck);bot.setListener(recipientId,'location','attachment',setLocationCheck);return bot.sendQuickReplyMessage(recipientId,senderId,\"Puedes escribir o compartir tu ubicación actual?\\n\\nEjemplo: Calle 67 #52-20, Medellín.\\n\\nNo olvides escribir la ciudad al final de la dirección.\",[{\"content_type\":\"location\",\"title\":\"Enviar ubicación\"}]);}function sendNullMapMessage(recipientId,senderId){return bot.sendTypingOn(recipientId,senderId).then(function(){return bot.sendTypingOff(recipientId,senderId).then(function(){return bot.sendTextMessage(recipientId,senderId,\"La dirección no ha sido encontrada en Google Maps, por favor intenta de nuevo\");});});}function sendMap(recipientId,senderId){return bot.sendTypingOn(recipientId,senderId).then(function(){var userBuffer=bot.buffer[recipientId];return bot.sendTypingOff(recipientId,senderId).then(function(){return bot.sendImageMessage(recipientId,senderId,GOOGLE_MAPS_URL+\"?center=\"+userBuffer.location.lat+\",\"+userBuffer.location.lng+\"&zoom=16&size=400x400&markers=color:red%7C\"+userBuffer.location.lat+\",\"+userBuffer.location.lng+\"&key=\"+GOOGLE_MAPS_KEY).then(function(){sendMapConfirmation(recipientId,senderId);});});});}function sendMapConfirmation(recipientId,senderId){return bot.sendTypingOff(recipientId,senderId).then(function(){return bot.sendQuickReplyMessage(recipientId,senderId,\"Es correcta?\",[{\"content_type\":\"text\",\"title\":\"Si\",\"payload\":\"SetAddressComplement\"},{\"content_type\":\"text\",\"title\":\"No\",\"payload\":\"NewAddress\"}]);});}function addressCheck(recipientId,senderId){var userBuffer=bot.buffer[recipientId];_geocoder2.default.geocode(userBuffer.address,function(error,data){if(!error&&data.status=='OK'){setAddressComponetsInBuffer(recipientId,senderId,data.results[0]);}else{console.log('Geocode not found');console.log(error);sendNullMapMessage(recipientId,senderId).then(function(){newAddress(recipientId,senderId);});}});}function setAddressComponetsInBuffer(recipientId,senderId,data){return bot.sendTypingOn(recipientId,senderId).then(function(){var userBuffer=bot.buffer[recipientId];userBuffer.address=data.formatted_address;userBuffer.location=data.geometry.location;var _iteratorNormalCompletion3=true;var _didIteratorError3=false;var _iteratorError3=undefined;try{for(var _iterator3=data.address_components[Symbol.iterator](),_step3;!(_iteratorNormalCompletion3=(_step3=_iterator3.next()).done);_iteratorNormalCompletion3=true){var component=_step3.value;if(component.types.includes('route')){userBuffer.route=component.long_name;}else if(component.types.includes('street_number')){userBuffer.street_number=component.short_name;}else if(component.types.includes('locality')){userBuffer.locality=component.short_name;}else if(component.types.includes('administrative_area_level_1')){userBuffer.state=component.short_name;}else if(component.types.includes('administrative_area_level_2')){userBuffer.administrative_area=component.short_name;}else if(component.types.includes('country')){userBuffer.country=component.long_name;userBuffer.country_code=component.short_name;}else if(component.types.includes('postal_code')){userBuffer.postal_code=component.short_name;}}}catch(err){_didIteratorError3=true;_iteratorError3=err;}finally{try{if(!_iteratorNormalCompletion3&&_iterator3.return){_iterator3.return();}}finally{if(_didIteratorError3){throw _iteratorError3;}}}return bot.sendTypingOff(recipientId,senderId).then(function(){return bot.sendTextMessage(recipientId,senderId,\"Encontré esta dirección en Google Maps:\\n\\n\"+userBuffer.address).then(function(){sendMap(recipientId,senderId);});});});}function setAddressComplement(recipientId,senderId){return bot.sendTypingOn(recipientId,senderId).then(function(){bot.setListener(recipientId,'complement','text',confirmAddress);return bot.sendTypingOff(recipientId,senderId).then(function(){return bot.sendTextMessage(recipientId,senderId,\"Por favor escribe el complemento de tu dirección actual.\\n\\nEjemplo: Apto 303, edificio el palmar.\\n\\nNo olvides colocar el nombre del edificio o del barrio\");});});}function confirmAddress(recipientId,senderId){var userBuffer=bot.buffer[recipientId];var addressPayload=userBuffer['addressPayload'];if(addressPayload=='NewAddress'){return bot.sendTypingOn(recipientId,senderId).then(function(){bot.setListener(recipientId,'address_name','text',saveAddress);return bot.sendTypingOff(recipientId,senderId).then(function(){return bot.sendTextMessage(recipientId,senderId,\"Por favor coloca un nombre a esta dirección para guardarla. \\n\\nEjemplo: casa, apartamento o oficina\");});});}else if(addressPayload.startsWith('EditAddress')){return bot.sendTypingOn(recipientId,senderId).then(function(){var data=addressPayload.split('-');var location=new Parse.GeoPoint({latitude:parseFloat(userBuffer.location.lat),longitude:parseFloat(userBuffer.location.lng)});new Parse.Query(_ParseModels.ConsumerAddress).get(data[1]).then(function(consumerAddress){consumerAddress.set('address',userBuffer.route+\" # \"+userBuffer.street_number);consumerAddress.set('location',location);consumerAddress.set('country',userBuffer.country);consumerAddress.set('countryCode',userBuffer.country_code);consumerAddress.set('postalCode',userBuffer.postal_code);consumerAddress.set('state',userBuffer.state);consumerAddress.set('description',userBuffer.complement);consumerAddress.save(undefined,{success:function success(address){delete userBuffer.address;delete userBuffer.location;delete userBuffer.complement;return bot.sendTypingOff(recipientId,senderId).then(function(){return bot.sendTextMessage(recipientId,senderId,\"La dirección ha sido actualizada.\").then(function(){setAddress(recipientId,senderId,address.id);});});},error:function error(user,_error3){console.log('Failed to create new object, with error code: '+_error3.message);}});});});}}function saveAddress(recipientId,senderId){return bot.sendTypingOn(recipientId,senderId).then(function(){var consumer=(0,_localStore.getData)(recipientId,'consumer');var userBuffer=bot.buffer[recipientId];var location=new Parse.GeoPoint({latitude:parseFloat(userBuffer.location.lat),longitude:parseFloat(userBuffer.location.lng)});var consumerAddress=new _ParseModels.ConsumerAddress();consumerAddress.set('name',userBuffer.address_name);consumerAddress.set('address',userBuffer.route+\" # \"+userBuffer.street_number);consumerAddress.set('consumer',{__type:\"Pointer\",className:\"Consumer\",objectId:consumer.objectId});consumerAddress.set('location',location);consumerAddress.set('city',userBuffer.locality);consumerAddress.set('country',userBuffer.country);consumerAddress.set('countryCode',userBuffer.country_code);consumerAddress.set('postalCode',userBuffer.postal_code);consumerAddress.set('state',userBuffer.state);consumerAddress.set('description',userBuffer.complement);consumerAddress.save(undefined,{success:function success(result){delete userBuffer.address;delete userBuffer.location;delete userBuffer.complement;delete userBuffer['address_name'];return bot.sendTypingOff(recipientId,senderId).then(function(){return bot.sendTextMessage(recipientId,senderId,\"La dirección ha sido almacenada.\").then(function(){setAddress(recipientId,senderId,result.id);});});},error:function error(user,_error4){console.log('Failed to create new object, with error code: '+_error4.message);}});});}function setEmail(recipientId,senderId){bot.setListener(recipientId,'email','text',setEmailCheck);return bot.sendTypingOff(recipientId,senderId).then(function(){return bot.sendTextMessage(recipientId,senderId,\"Por favor escribe tu email:\");});}function setEmailCheck(recipientId,senderId){var userBuffer=bot.buffer[recipientId];var consumer=(0,_localStore.getData)(recipientId,'consumer').rawParseObject;consumer.setEmail(userBuffer.email);consumer.saveInStore(store,recipientId).then(function(){delete userBuffer.email;checkOrder(recipientId,senderId);});}function setTelephone(recipientId,senderId){bot.setListener(recipientId,'telephone','text',setTelephoneCheck);return bot.sendTypingOff(recipientId,senderId).then(function(){return bot.sendTextMessage(recipientId,senderId,\"Por favor escribe tu número telefónico:\");});}function setTelephoneCheck(recipientId,senderId){var userBuffer=bot.buffer[recipientId];var consumer=(0,_localStore.getData)(recipientId,'consumer').rawParseObject;consumer.setPhone(userBuffer.telephone);consumer.saveInStore(store,recipientId).then(function(){delete userBuffer.telephone;checkOrder(recipientId,senderId);});}function setLocationCheck(recipientId,senderId){var userBuffer=bot.buffer[recipientId];_geocoder2.default.reverseGeocode(userBuffer.location.lat,userBuffer.location.lng,function(error,data){if(!error&&data.status=='OK'){setAddressComponetsInBuffer(recipientId,senderId,data.results[0]);}else{console.log('Geocode not found');console.log(error);sendNullMapMessage(recipientId,senderId).then(function(){newAddress(recipientId,senderId);});}});}function setAddress(recipientId,senderId,id){return bot.sendTypingOn(recipientId,senderId).then(function(){store.dispatch(Actions.setAddress(recipientId,id)).then(function(){var address=(0,_localStore.getData)(recipientId,'address');Parse.Cloud.run('getProducts',{businessId:BUSINESS[senderId].BUSINESS_ID,lat:address.location.lat,lng:address.location.lng}).then(function(result){var pointSale=result.pointSale;store.dispatch(Actions.setCustomerPointSale(recipientId,pointSale.id)).then(function(){return bot.sendTypingOff(recipientId,senderId).then(function(){return bot.sendTextMessage(recipientId,senderId,\"Perfecto, ya seleccioné tu dirección para este pedido\").then(function(){sendCategories(recipientId,senderId,0);});});});},function(error){if(error.code=='141'){return bot.sendTypingOff(recipientId,senderId).then(function(){return bot.sendTextMessage(recipientId,senderId,\"La dirección seleccionada no está dentro de la cobertura de nuestras sedes, por favor intenta con otra dirección\").then(function(){sendAddressesWithTitle(recipientId,senderId);});});}else{console.log('error');console.log(error);}});});});}function editAddress(recipientId,senderId,id){return bot.sendTypingOn(recipientId,senderId).then(function(){return bot.sendTypingOff(recipientId,senderId).then(function(){bot.setDataBuffer(recipientId,'addressPayload','EditAddress-'+id);writeAddress(recipientId,senderId);});});}function removeAddress(recipientId,senderId,id){return bot.sendTypingOn(recipientId,senderId).then(function(){new Parse.Query(_ParseModels.ConsumerAddress).get(id).then(function(consumerAddress){consumerAddress.destroy().then(function(){return bot.sendTypingOff(recipientId,senderId).then(function(){return bot.sendTextMessage(recipientId,senderId,\"La dirección ha sido eliminada.\").then(function(){sendAddresses(recipientId,senderId);});});});});});}function removeCreditCard(recipientId,senderId,id){return bot.sendTypingOn(recipientId,senderId).then(function(){new Parse.Query(_ParseModels.CreditCard).get(id).then(function(creditCard){creditCard.destroy().then(function(){return bot.sendTypingOff(recipientId,senderId).then(function(){return bot.sendTextMessage(recipientId,senderId,\"La tarjeta de credito ha sido eliminada.\").then(function(){sendCreditCards(recipientId,senderId);});});});});});}function sendCategories(recipientId,senderId,index){return bot.sendTypingOn(recipientId,senderId).then(function(){authentication(recipientId,senderId).then(function(){Parse.Cloud.run('getProducts',{businessId:BUSINESS[senderId].BUSINESS_ID}).then(function(result){if(result.pointSaleIsOpen){if(typeof index=='undefined')index=0;else if(typeof index=='string')index=parseInt(index);if(index==0){bot.sendTypingOff(recipientId,senderId).then(function(){bot.sendTextMessage(recipientId,senderId,\"A continuación te presentamos las categorías de productos disponibles.\").then(function(){sendCategoriesDetail(recipientId,senderId,result.categories,index);});});}else{bot.sendTypingOff(recipientId,senderId).then(function(){sendCategoriesDetail(recipientId,senderId,result.categories,index);});}}else{sendScheduleRestriction(recipientId,result.pointSaleSchedules);}},function(error){console.log('error');console.log(error);});});});}function splitCategories(recipientId,categories,index){var customer=(0,_localStore.getData)(recipientId,'customer');var image_url=void 0;var idx=0;var elements=[];categories.forEach(function(item){if(item&&item.get('name')){if(idx>=index*bot.limit&&idx<(index+1)*bot.limit){var image=item.get('image');image_url=typeof image!='undefined'?image.url():customer.image.url;elements.push({title:item.get('name'),image_url:image_url,buttons:[{type:\"postback\",title:'Ver categoría',payload:\"SendProducts-\"+item.id+\"-0\"}]});}idx=idx+1;}});return elements;}function sendCategoriesDetail(recipientId,senderId,categories,index){var elements=splitCategories(recipientId,categories,index);var idx=Object.keys(categories).length;var buttons=[];var catIni=(index+1)*bot.limit;var catFin=idx>catIni+bot.limit?catIni+bot.limit:idx;if(idx>(index+1)*bot.limit){buttons.push({type:\"postback\",title:\"Categorías \"+(catIni+1)+\"-\"+catFin,payload:\"SendCategories-\"+(index+1)});elements.push({title:\"Ver más categorias \",subtitle:\"Categorías disponibles\",buttons:buttons});}return bot.sendTypingOff(recipientId,senderId).then(function(){return bot.sendGenericMessage(recipientId,senderId,elements);});}function sendProducts(recipientId,senderId,categoryId,proIdx){return bot.sendTypingOn(recipientId,senderId).then(function(){proIdx=parseInt(proIdx);if(proIdx==0){new Parse.Query(_ParseModels.Category).get(categoryId).then(function(category){return bot.sendTypingOff(recipientId,senderId).then(function(){return bot.sendTextMessage(recipientId,senderId,\"Selecciona \"+category.get('name')+\":\").then(function(){getProducts(recipientId,senderId,categoryId,proIdx);});});},function(object,error){console.log(error);});}else{getProducts(recipientId,senderId,categoryId,proIdx);}});}function getProducts(recipientId,senderId,categoryId,proIdx){Parse.Cloud.run('getProducts',{businessId:BUSINESS[senderId].BUSINESS_ID,category:categoryId}).then(function(result){if(result.hasOwnProperty('categories')){sendCategoriesDetail(recipientId,senderId,result.categories,0);}else{if(result.products.length==0){bot.sendTypingOff(recipientId,senderId).then(function(){bot.sendQuickReplyMessage(recipientId,senderId,\"No existen productos en esta categoría\",[{\"content_type\":\"text\",\"title\":\"Seguir pidiendo\",\"payload\":\"SendContinueOrder\"},{\"content_type\":\"text\",\"title\":\"Ver carrito\",\"payload\":\"SendCart\"}]);});}else{sendProductsDetail(recipientId,senderId,categoryId,result.products,proIdx);}}},function(error){console.log('error');console.log(error);});}function splitProducts(recipientId,products,proIdx){var customer=(0,_localStore.getData)(recipientId,'customer');var image_url=void 0;var idx=0;var elements=[];products.forEach(function(product){if(product&&product.get('name')){if(idx>=proIdx*bot.limit&&idx<(proIdx+1)*bot.limit){var image=product.get('image');image_url=typeof image!='undefined'?image.url():customer.image.url;elements.push({title:product.get('name')+\": $\"+product.get('priceDefault'),subtitle:product.get('description'),image_url:image_url,buttons:[{type:\"postback\",title:\"Agregar\",payload:\"AddProduct-\"+product.id},{type:\"postback\",title:'Ver descripción',payload:\"SendProductDescription-\"+product.id}]});}idx=idx+1;}});return elements;}function sendProductsDetail(recipientId,senderId,categoryId,products,index){var elements=splitProducts(recipientId,products,index);var idx=Object.keys(products).length;var buttons=[];var catIni=(index+1)*bot.limit;var catFin=idx>catIni+bot.limit?catIni+bot.limit:idx;if(idx>(index+1)*bot.limit){buttons.push({type:\"postback\",title:\"Productos \"+(catIni+1)+\"-\"+catFin,payload:\"SendProducts-\"+categoryId+\"-\"+(index+1)});elements.push({title:\"Ver más productos \",subtitle:\"Productos disponibles\",buttons:buttons});}return bot.sendTypingOff(recipientId,senderId).then(function(){return bot.sendGenericMessage(recipientId,senderId,elements);});}function createCart(recipientId){var userData=(0,_localStore.getData)(recipientId);Object.assign(userData,{'cart':{items:new Map()}});return userData.cart;}function addProduct(recipientId,senderId,productId){var cart=(0,_localStore.getData)(recipientId,'cart');if(typeof cart=='undefined'){cart=createCart(recipientId);}var items=cart.items;new Parse.Query(_ParseModels.Product).get(productId).then(function(product){var productObject=(0,_parseUtils.extractParseAttributes)(product);var item=items.get(productId);var promises=[];if(typeof item=='undefined'){items.set(productId,{quantity:1,price:productObject.priceDefault});item=items.get(productId);}else{item.quantity+=1;}if(typeof item.modifiers=='undefined'){item.modifiers=[];}if(typeof productObject.modifiers!='undefined'){productObject.modifiers.forEach(function(obj,index,array){promises.push(new Parse.Query(_ParseModels.Modifier).get(obj.objectId).then(function(modifier){return(0,_parseUtils.extractParseAttributes)(modifier);}));});}Parse.Promise.when(promises).then(function(modifiers){var undefinedModifiers=checkModifiers(recipientId,productId,modifiers);//checkModifiersComplete(recipientId, productId, modifiers).then(result =>{\n//    console.log('result: '+result);\n//});\nif(undefinedModifiers.length>0){//Show multiples modifiers\npromises=[];undefinedModifiers[0].items.forEach(function(modifierItem){promises.push(new Parse.Query(_ParseModels.ModifierItem).get(modifierItem.objectId).then(function(modifierItem){return(0,_parseUtils.extractParseAttributes)(modifierItem);}));});Parse.Promise.when(promises).then(function(modifierItems){sendModifierMenu(recipientId,senderId,productId,undefinedModifiers[0],modifierItems);});}else{saveCart(recipientId);sendAddProductNenu(recipientId,senderId,productId);}});},function(object,error){console.log(error);});}function sendAddProductNenu(recipientId,senderId,productId){return new Parse.Query(_ParseModels.Product).get(productId).then(function(product){return bot.sendTypingOff(recipientId,senderId).then(function(){return bot.sendQuickReplyMessage(recipientId,senderId,\"El producto \"+product.get('name')+\" ha sido agregado.\\n\\nDeseas seguir pidiendo o ver tu carrito?\",[{\"content_type\":\"text\",\"title\":\"Seguir pidiendo\",\"payload\":\"SendContinueOrder\"},{\"content_type\":\"text\",\"title\":\"Ver carrito\",\"payload\":\"SendCart\"}]);});},function(object,error){console.log(error);});}function sendContinueOrder(recipientId,senderId){return bot.sendTypingOff(recipientId,senderId).then(function(){bot.sendTextMessage(recipientId,senderId,\"Puedes escribir el nombre de un producto, ej: Ensalada mediterranea, o seleccionarlo en el siguiente menú:\").then(function(){sendCategories(recipientId,senderId,0);});});}function sendModifierMenu(recipientId,senderId,productId,modifier,items){var quick_replies=[];items.forEach(function(item){if(quick_replies.length<=bot.limit){quick_replies.push({\"content_type\":\"text\",\"title\":item.name,\"payload\":\"AddModifier-\"+productId+\"-\"+modifier.objectId+\"-\"+item.objectId});}});return bot.sendTypingOff(recipientId,senderId).then(function(){return bot.sendQuickReplyMessage(recipientId,senderId,\"Escoge \"+modifier.name+\":\",quick_replies);});}function addModifier(recipientId,senderId,productId,modifierId,itemId){var cart=(0,_localStore.getData)(recipientId,'cart');var items=cart.items;var item=items.get(productId);var orderItemModifier=new _ParseModels.OrderItemModifier();orderItemModifier.set('modifier',{__type:\"Pointer\",className:\"Modifier\",objectId:modifierId});orderItemModifier.set('modifierItem',{__type:\"Pointer\",className:\"ModifierItem\",objectId:itemId});//orderItemModifier.set('price', itemId.price)\norderItemModifier.save(undefined,{success:function success(result){item.modifiers.push({__type:\"Pointer\",className:\"OrderItemModifier\",objectId:result.id});saveCart(recipientId);sendAddProductNenu(recipientId,productId);},error:function error(user,_error5){console.log('Failed to create new object, with error code: '+_error5.message);}});}function checkModifiers(recipientId,productId,modifiers){var cart=(0,_localStore.getData)(recipientId,'cart');var items=cart.items;var item=items.get(productId);var exist=false;var result=[];modifiers.forEach(function(modifier){exist=false;item.modifiers.forEach(function(itemModifier){console.log(itemModifier.objectId);//exist true\n});if(!exist){result.push(modifier);}});return result;}function checkModifiersComplete(recipientId,senderId,productId,modifiers){var cart=(0,_localStore.getData)(recipientId,'cart');var items=cart.items;var item=items.get(productId);var promises=[];console.log(modifiers);console.log(modifiers.length);console.log(cart.items);console.log(item);console.log(item.modifiers.length);if(modifiers.length!=item.modifiers.length){promises=[];modifiers.forEach(function(modifier){modifier.items.forEach(function(modifierItem){promises.push(new Parse.Query(_ParseModels.ModifierItem).get(modifierItem.objectId).then(function(modifierItem){return(0,_parseUtils.extractParseAttributes)(modifierItem);}));});return Parse.Promise.when(promises).then(function(elements){sendModifierMenu(recipientId,productId,modifier,elements);return true;});});}}function removeProduct(recipientId,senderId,productId){var cart=(0,_localStore.getData)(recipientId,'cart');if(cart==undefined){cart=createCart(recipientId);}var items=cart.items;var item=items.get(productId);new Parse.Query(_ParseModels.OrderItem).get(item.id,{success:function success(orderItem){orderItem.destroy({});items.delete(productId);var itemsPointers=[];var _iteratorNormalCompletion4=true;var _didIteratorError4=false;var _iteratorError4=undefined;try{for(var _iterator4=items[Symbol.iterator](),_step4;!(_iteratorNormalCompletion4=(_step4=_iterator4.next()).done);_iteratorNormalCompletion4=true){var _step4$value=_slicedToArray(_step4.value,2),key=_step4$value[0],value=_step4$value[1];itemsPointers.push({\"__type\":\"Pointer\",\"className\":\"OrderItem\",\"objectId\":value.id});}}catch(err){_didIteratorError4=true;_iteratorError4=err;}finally{try{if(!_iteratorNormalCompletion4&&_iterator4.return){_iterator4.return();}}finally{if(_didIteratorError4){throw _iteratorError4;}}}cart.itemsPointers=itemsPointers;if(items.size==0){sendCart(recipientId,senderId);}else{sendCartDetails(recipientId,senderId);}},error:function error(orderItem,_error6){console.log('error');console.log(_error6);}});}function increaseOneProduct(recipientId,senderId,productId){var cart=(0,_localStore.getData)(recipientId,'cart');if(cart==undefined){cart=createCart(recipientId);}var items=cart.items;var item=items.get(productId);item.quantity++;new Parse.Query(_ParseModels.OrderItem).get(item.id,{success:function success(orderItem){orderItem.set('amount',item.quantity);orderItem.save();sendCartDetails(recipientId,senderId);},error:function error(orderItem,_error7){console.log('error');console.log(_error7);}});}function decreaseOneProduct(recipientId,senderId,productId){var cart=(0,_localStore.getData)(recipientId,'cart');if(cart==undefined){cart=createCart(recipientId);}var items=cart.items;var item=items.get(productId);item.quantity--;if(item.quantity>0){new Parse.Query(_ParseModels.OrderItem).get(item.id,{success:function success(orderItem){orderItem.set('amount',item.quantity);orderItem.save();sendCartDetails(recipientId,senderId);},error:function error(orderItem,_error8){console.log('error');console.log(_error8);}});}else{removeProduct(recipientId,productId);}}function sendProductDescription(recipientId,senderId,productId){var product=new _ParseModels.Product();new Parse.Query(product).get(productId).then(function(product){return bot.sendTypingOff(recipientId,senderId).then(function(){return bot.sendQuickReplyMessage(recipientId,senderId,product.get('name')+\": \"+product.get('description'),[{\"content_type\":\"text\",\"title\":\"Agregar\",\"payload\":\"AddProduct-\"+productId},{\"content_type\":\"text\",\"title\":\"Seguir pidiendo\",\"payload\":\"SendContinueOrder\"},{\"content_type\":\"text\",\"title\":\"Ver carrito\",\"payload\":\"SendCart\"}]);});},function(object,error){console.log(error);});}function saveCart(recipientId,senderId){var consumerCart=new _ParseModels.Cart();var consumer=(0,_localStore.getData)(recipientId,'consumer');var address=(0,_localStore.getData)(recipientId,'address');var cart=(0,_localStore.getData)(recipientId,'cart');var paymentMethod=(0,_localStore.getData)(recipientId,'paymentMethod');var items=[];var item=void 0;var _iteratorNormalCompletion5=true;var _didIteratorError5=false;var _iteratorError5=undefined;try{for(var _iterator5=cart.items[Symbol.iterator](),_step5;!(_iteratorNormalCompletion5=(_step5=_iterator5.next()).done);_iteratorNormalCompletion5=true){var _step5$value=_slicedToArray(_step5.value,2),id=_step5$value[0],properties=_step5$value[1];item=new _ParseModels.OrderItem();if(properties.hasOwnProperty('id')){item.set('id',properties.id);}item.set('product',{__type:\"Pointer\",className:\"Product\",objectId:id});item.set('price',properties.price);item.set('amount',properties.quantity);item.set('modifiers',properties.modifiers);item.set('modifiersGroups',[]);items.push(item);}}catch(err){_didIteratorError5=true;_iteratorError5=err;}finally{try{if(!_iteratorNormalCompletion5&&_iterator5.return){_iterator5.return();}}finally{if(_didIteratorError5){throw _iteratorError5;}}}Parse.Object.saveAll(items,{success:function success(result){var itemsPointers=[];var _iteratorNormalCompletion6=true;var _didIteratorError6=false;var _iteratorError6=undefined;try{for(var _iterator6=result[Symbol.iterator](),_step6;!(_iteratorNormalCompletion6=(_step6=_iterator6.next()).done);_iteratorNormalCompletion6=true){var _item=_step6.value;var itemId=_item.get('product').objectId;cart.items.get(itemId).id=_item.id;itemsPointers.push({\"__type\":\"Pointer\",\"className\":\"OrderItem\",\"objectId\":_item.id});}}catch(err){_didIteratorError6=true;_iteratorError6=err;}finally{try{if(!_iteratorNormalCompletion6&&_iterator6.return){_iterator6.return();}}finally{if(_didIteratorError6){throw _iteratorError6;}}}if(cart.hasOwnProperty('id')){consumerCart.set('id',cart.id);}if(typeof paymentMethod!='undefined'){consumerCart.set('paymentMethod',paymentMethod.method);}consumerCart.set('consumerAddress',{__type:\"Pointer\",className:\"ConsumerAddress\",objectId:address.objectId});consumerCart.set('consumer',{__type:\"Pointer\",className:\"Consumer\",objectId:consumer.objectId});consumerCart.set('items',itemsPointers);consumerCart.save(undefined,{success:function success(result){cart['id']=result.id;cart['rawParseObject']=result;cart['itemsPointers']=itemsPointers;},error:function error(user,_error9){console.log('Failed to create new object, with error code: '+_error9.message);}});},error:function error(user,_error10){console.log('Failed to create new object, with error code: '+_error10.message);}});}function saveOrder(recipientId,senderId){getOrderState(0).then(function(state){var order=new _ParseModels.Order();var consumer=(0,_localStore.getData)(recipientId,'consumer');var customer=(0,_localStore.getData)(recipientId,'customer');var cart=(0,_localStore.getData)(recipientId,'cart');var address=(0,_localStore.getData)(recipientId,'address');var paymentMethod=(0,_localStore.getData)(recipientId,'paymentMethod');var pointSale=(0,_localStore.getData)(recipientId,'pointSale');var total=0;cart.items.forEach(function(value,key){total+=value.quantity*value.price;});order.set('consumer',{__type:'Pointer',className:'Consumer',objectId:consumer.objectId});order.set('consumerAddress',{__type:'Pointer',className:'ConsumerAddress',objectId:address.objectId});order.set('pointSale',{__type:'Pointer',className:'CustomerPointSale',objectId:pointSale.objectId});order.set('state',{__type:'Pointer',className:'OrderState',objectId:state.objectId});order.set('items',cart.itemsPointers);order.set('deliveryCost',pointSale.deliveryCost);order.set('total',total);order.set('paymentMethod',paymentMethod.method);order.set('name',consumer.name);order.set('email',consumer.email);order.set('phone',consumer.phone);order.set('platform','Bot');order.save(undefined,{success:function success(order){store.dispatch(Actions.setOrder(recipientId,order)).then(function(){clearCart(recipientId);});},error:function error(user,_error11){console.log('Failed to create new object, with error code: '+_error11.message);console.log(_error11);}});});}function sendPurchaseOptions(recipientId,senderId){return bot.sendTypingOn(recipientId,senderId).then(function(){return bot.sendTypingOff(recipientId,senderId).then(function(){return bot.sendQuickReplyMessage(recipientId,senderId,\"Tenemos las siguientes opciones disponibles:\",[{\"content_type\":\"text\",\"title\":\"Ver categorias\",\"payload\":\"SendCategories-0\"},{\"content_type\":\"text\",\"title\":\"Ver carrito\",\"payload\":\"SendCart\"}]);});});}function sendEmptyCartOptions(recipientId,senderId){return bot.sendTypingOn(recipientId,senderId).then(function(){return bot.sendTypingOff(recipientId,senderId).then(function(){return bot.sendQuickReplyMessage(recipientId,senderId,\"Tenemos las siguientes opciones disponibles:\",[{\"content_type\":\"text\",\"title\":\"Ver categorias\",\"payload\":\"SendCategories-0\"},{\"content_type\":\"text\",\"title\":\"Mis órdenes\",\"payload\":\"SendOrders\"}]);});});}function sendCart(recipientId,senderId){bot.sendTypingOn(recipientId,senderId).then(function(){authentication(recipientId,senderId).then(function(){var user=(0,_localStore.getData)(recipientId,'user');var customer=(0,_localStore.getData)(recipientId,'customer');var cart=(0,_localStore.getData)(recipientId,'cart');var customer_image_url=void 0;if(typeof customer!='undefined'){customer_image_url=customer.image.url;}if(cart==undefined){cart=createCart(recipientId);}var items=cart.items;var elements=[];var element={};var total=0;var orderLimit=items.size;var ind=0;var image=void 0;var image_url=void 0;if(orderLimit==0){bot.sendTypingOff(recipientId,senderId).then(function(){return bot.sendTextMessage(recipientId,senderId,\"Tu carrito de compras está vacío.\").then(function(){sendEmptyCartOptions(recipientId,senderId);});});}else{items.forEach(function(value,key){var product=new Parse.Query(_ParseModels.Product);product.get(key,{success:function success(item){image=item.get('image');image_url=customer_image_url;if(image){image_url=image.url();}element={};element['title']=item.get('name');element['subtitle']=item.get('description');element['quantity']=value.quantity;element['price']=parseInt(item.get('priceDefault'));element['currency']=\"COP\";element['image_url']=image_url;elements.push(element);total+=element['quantity']*element['price'];ind++;if(ind==orderLimit){sendCartReceipt(recipientId,senderId,cart.id,elements,total);}},error:function error(_error12){alert(\"Error: \"+_error12.code+\" \"+_error12.message);}});});}});});}function sendCartReceipt(recipientId,senderId,cartId,elements,total){var user=(0,_localStore.getData)(recipientId,'user');var consumer=(0,_localStore.getData)(recipientId,'consumer');var address=(0,_localStore.getData)(recipientId,'address');var pointSale=(0,_localStore.getData)(recipientId,'pointSale');var payment_method=(0,_localStore.getData)(recipientId,'payment_method');var addressData=undefined;if(typeof pointSale=='undefined'){bot.sendTextMessage(recipientId,senderId,\"No has registrado una dirección correcta, por favor registrala para visualizar el carrito\").then(function(){sendAddresses(recipientId,senderId);});}else{if(typeof address!='undefined'){addressData={street_1:address.address?address.address:'Dirección no definida',street_2:address.description?address.description:'Sin complemento',city:address.city?address.city:'No definida',postal_code:address.postalCode?address.postalCode:'No definido',state:address.state?address.state:'No definido',country:address.countryCode?address.countryCode:'No definido'};}if(typeof payment_method=='undefined'){payment_method={name:'Sin definir'};}return bot.sendTypingOff(recipientId,senderId).then(function(){return bot.sendReceiptMessage(recipientId,senderId,{template_type:\"receipt\",recipient_name:user.first_name+\" \"+user.last_name,order_number:cartId,currency:\"COP\",payment_method:payment_method.name,timestamp:Math.trunc(Date.now()/1000).toString(),elements:elements,address:addressData,summary:{subtotal:total,shipping_cost:pointSale.deliveryCost,total_cost:total+pointSale.deliveryCost}},[{\"content_type\":\"text\",\"title\":\"Finalizar pedido\",\"payload\":\"CheckOrder\"},{\"content_type\":\"text\",\"title\":\"Seguir Pidiendo\",\"payload\":\"SendContinueOrder\"},{\"content_type\":\"text\",\"title\":\"Modificar carrito\",\"payload\":\"SendCartDetails\"},{\"content_type\":\"text\",\"title\":\"Borrar carrito\",\"payload\":\"ClearAndSendCart\"}]);});}}function sendCartDetails(recipientId,senderId){return bot.sendTypingOn(recipientId,senderId).then(function(){var cart=(0,_localStore.getData)(recipientId,'cart');var customer=(0,_localStore.getData)(recipientId,'customer');var consumer=(0,_localStore.getData)(recipientId,'consumer');var image_url=customer.image.url;var items=cart.items;var promises=[];items.forEach(function(value,key){if(promises.length<=bot.limit){promises.push(new Parse.Query(_ParseModels.Product).get(key).then(function(product){var image=product.get('image');if(image){image_url=image.url();}return{\"title\":product.get('name')+\": $\"+value.price,\"subtitle\":\"Cantidad solicitada: \"+value.quantity,\"image_url\":image_url,\"buttons\":[{\"type\":\"postback\",\"title\":\"Quitar\",\"payload\":\"RemoveProduct-\"+key},{\"type\":\"postback\",\"title\":\"Aumentar 1\",\"payload\":\"IncreaseOneProduct-\"+key},{\"type\":\"postback\",\"title\":\"Disminuir 1\",\"payload\":\"DecreaseOneProduct-\"+key}]};}));}});return Parse.Promise.when(promises).then(function(elements){return bot.sendTypingOff(recipientId,senderId).then(function(){return bot.sendGenericMessage(recipientId,senderId,elements).then(function(){sendEditCartOptions(recipientId,senderId);});});});});}function sendEditCartOptions(recipientId,senderId){return bot.sendQuickReplyMessage(recipientId,senderId,\"Opciones del carrito:\",[{\"content_type\":\"text\",\"title\":\"Finalizar pedido\",\"payload\":\"CheckOrder\"},{\"content_type\":\"text\",\"title\":\"Seguir pidiendo\",\"payload\":\"SendContinueOrder\"}]);}function editCart(recipientId,senderId){var cart=(0,_localStore.getData)(recipientId,'cart');bot.sendTypingOn(recipientId,senderId);return bot.sendTypingOff(recipientId,senderId).then(function(){return bot.sendGenericMessage(recipientId,senderId,[{\"title\":\"Opciones\",\"image_url\":SERVER_URL+\"assets/thinking.jpg\",\"buttons\":[{\"type\":\"web_url\",\"url\":SERVER_URL+\"cart?\"+cart.id,\"title\":\"Remover producto\",\"webview_height_ratio\":\"full\",\"messenger_extensions\":true}]}]);});}function clearCart(recipientId){var cart=(0,_localStore.getData)(recipientId,'cart');if(typeof cart!='undefined'){(function(){var items=cart.items;cart.itemsPointers=[];items.forEach(function(value,key){items.delete(key);});})();}return new _promise2.default(function(resolve,reject){resolve();});}function clearAndSendCart(recipientId,senderId){clearCart(recipientId).then(function(){sendCart(recipientId,senderId);});}function checkOrder(recipientId,senderId){var cart=(0,_localStore.getData)(recipientId,'cart');var consumer=(0,_localStore.getData)(recipientId,'consumer');var pointSale=(0,_localStore.getData)(recipientId,'pointSale');var total=0;if(typeof cart!='undefined'){cart.items.forEach(function(value,key){total+=value.quantity*value.price;});}else{cart=createCart(recipientId);}if(typeof pointSale=='undefined'){bot.sendTextMessage(recipientId,senderId,\"No has registrado una dirección correcta, por favor registrala para visualizar el carrito\").then(function(){sendAddresses(recipientId,senderId);});}else{if(pointSale.minOrderPrice&&pointSale.minOrderPrice>total){sendMinOrderPriceRestriction(recipientId,senderId);}else if(typeof consumer.phone=='undefined'||consumer.phone==''){setTelephone(recipientId,senderId);}else if(typeof consumer.email=='undefined'||consumer.email==''){setEmail(recipientId,senderId);}else{checkPayment(recipientId,senderId);}}}function checkAddress(recipientId,senderId){}function checkPayment(recipientId,senderId){return bot.sendTypingOn(recipientId,senderId).then(function(){store.dispatch(Actions.loadPaymentMethods(recipientId,senderId)).then(function(){var paymentMethods=(0,_localStore.getData)(recipientId,'paymentMethods');var quick_replies=[];for(var i in paymentMethods){quick_replies.push({\"content_type\":\"text\",\"title\":paymentMethods[i].name.substring(0,20),\"payload\":\"Checkout-\"+paymentMethods[i].objectId});}return bot.sendTypingOff(recipientId,senderId).then(function(){return bot.sendQuickReplyMessage(recipientId,senderId,\"Como vas a pagar tu pedido? (Tu pedido se cobra cuando lo recibes)\",quick_replies);});});});}function checkout(recipientId,senderId,id){return bot.sendTypingOn(recipientId,senderId).then(function(){store.dispatch(Actions.setPaymentMethod(recipientId,id)).then(function(){var state=store.getState();var paymentTypes=state['paymentTypes'];var paymentMethod=(0,_localStore.getData)(recipientId,'paymentMethod');var paymentFunction=paymentTypes[paymentMethod.method.objectId];paymentFunction(recipientId,senderId);});});}function sendMinOrderPriceRestriction(recipientId,senderId){var pointSale=(0,_localStore.getData)(recipientId,'pointSale');return bot.sendTypingOff(recipientId,senderId).then(function(){return bot.sendTextMessage(recipientId,senderId,\"El valor minimo de una orden con domicilio es \"+pointSale.minOrderPrice+\", \\npor favor modifica tu pedido para cumplir este requisito\").then(function(){sendPurchaseOptions(recipientId,senderId);});});}function sendScheduleRestriction(recipientId,senderId,pointSaleSchedules){var pointSale=(0,_localStore.getData)(recipientId,'pointSale');var days=['Domingo','Lunes','Martes','Miercoles','Jueves','Viernes','Sabado','Domingo'];var text='En este momento nuestros puntos de venta estan cerrados, \\npor favor solicita tu domicilio en los siguientes horarios:\\n\\n';var _iteratorNormalCompletion7=true;var _didIteratorError7=false;var _iteratorError7=undefined;try{for(var _iterator7=pointSaleSchedules[Symbol.iterator](),_step7;!(_iteratorNormalCompletion7=(_step7=_iterator7.next()).done);_iteratorNormalCompletion7=true){var pointSaleSchedule=_step7.value;var daysActive=pointSaleSchedule.get('daysActive');var allDay=pointSaleSchedule.get('allDay');for(var dayID in daysActive){if(daysActive.length-1!=dayID){text+=days[daysActive[dayID]-1]+\", \";}else{text+=\"y \"+days[daysActive[dayID]-1]+\" \";}}if(allDay){text+='las 24 horas\\n';}else{text+=\"desde las \"+pointSaleSchedule.get('hourStart')+\" \";text+=\"hasta las \"+pointSaleSchedule.get('hourEnd');}text+=\"\\n\";}}catch(err){_didIteratorError7=true;_iteratorError7=err;}finally{try{if(!_iteratorNormalCompletion7&&_iterator7.return){_iterator7.return();}}finally{if(_didIteratorError7){throw _iteratorError7;}}}return bot.sendTypingOff(recipientId,senderId).then(function(){return bot.sendTextMessage(recipientId,senderId,text).then(function(){sendMenu(recipientId);});});}function sendCash(recipientId,senderId){return bot.sendTypingOn(recipientId,senderId).then(function(){var paymentMethod=(0,_localStore.getData)(recipientId,'paymentMethod');saveCart(recipientId);return bot.sendTypingOff(recipientId,senderId).then(function(){return bot.sendTextMessage(recipientId,senderId,\"Se ha registrado el pago con \"+paymentMethod.name).then(function(){orderConfirmation(recipientId,senderId);});});});}function registerCreditCard(recipientId,senderId){bot.sendTypingOn(recipientId,senderId);authentication(recipientId,senderId).then(function(){var consumer=(0,_localStore.getData)(recipientId,'consumer');return bot.sendTypingOff(recipientId,senderId).then(function(){return bot.sendGenericMessage(recipientId,senderId,[{\"title\":\"Registro de tarjeta de credito y finalización de tu pedido.\\n\\nEstas de acuerdo?\",\"image_url\":SERVER_URL+\"assets/images/creditCards.jpg\",\"subtitle\":\"Por razones de seguridad te redireccionaremos a una página web segura.\",\"buttons\":[{\"type\":\"web_url\",\"title\":\"Si\",\"url\":SERVER_URL+\"creditCard?id=\"+consumer.objectId,\"webview_height_ratio\":\"full\",\"messenger_extensions\":true},{\"type\":\"postback\",\"title\":\"No\",\"payload\":\"CancelRegisterCreditCard\"}]}]);});});}function registerCreditCardAndPay(recipientId,senderId){bot.setDataBuffer(recipientId,'creditCardPayload','SendCreditCards');registerCreditCard(recipientId,senderId);}function cancelRegisterCreditCard(recipientId,senderId){bot.sendTypingOn(recipientId,senderId).then(function(){var userBuffer=bot.buffer[recipientId];return bot.sendTypingOff(recipientId,senderId).then(function(){return bot.sendTextMessage(recipientId,senderId,\"Si no ingresas los datos de tu tarjeta en nuestro sitio seguro, no podras comprar con tarjeta online\").then(function(){if(typeof userBuffer!='undefined'&&userBuffer.hasOwnProperty('creditCardPayload')){checkPayment(recipientId);}else{sendAccount(recipientId,senderId);}});});});}function sendRegisteredCreditCards(recipientId,senderId){bot.sendTypingOn(recipientId,senderId).then(function(){var user=(0,_localStore.getData)(recipientId,'user');var consumer=(0,_localStore.getData)(recipientId,'consumer');_ParseModels.CreditCard.loadInStore(store,recipientId,user).then(function(){var creditCards=(0,_localStore.getData)(recipientId,'creditCards');if(creditCards.length==0){return bot.sendTypingOff(recipientId,senderId).then(function(){return bot.sendQuickReplyMessage(recipientId,senderId,\"Aun no tienes tarjetas registradas, deseas registrar una tarjeta?\",[{\"content_type\":\"text\",\"title\":\"Si\",\"payload\":\"RegisterCreditCardAndPay\"},{\"content_type\":\"text\",\"title\":\"No\",\"payload\":\"CheckPayment\"}]);});}else{var _ret2=function(){var creditCards=(0,_localStore.getData)(recipientId,'creditCards');var quick_replies=[];quick_replies.push({\"content_type\":\"text\",\"title\":\"Agregar tarjeta\",\"payload\":\"RegisterCreditCardAndPay\"});var _iteratorNormalCompletion8=true;var _didIteratorError8=false;var _iteratorError8=undefined;try{for(var _iterator8=creditCards[Symbol.iterator](),_step8;!(_iteratorNormalCompletion8=(_step8=_iterator8.next()).done);_iteratorNormalCompletion8=true){var card=_step8.value;if(quick_replies.length<bot.limit){quick_replies.push({\"content_type\":\"text\",\"title\":card.type+\" \"+card.lastFour,\"payload\":\"PayWithCreditCard-\"+card.lastFour});}}}catch(err){_didIteratorError8=true;_iteratorError8=err;}finally{try{if(!_iteratorNormalCompletion8&&_iterator8.return){_iterator8.return();}}finally{if(_didIteratorError8){throw _iteratorError8;}}}return{v:bot.sendTypingOff(recipientId,senderId).then(function(){return bot.sendQuickReplyMessage(recipientId,senderId,\"Con cual tarjeta quieres pagar?\",quick_replies);})};}();if((typeof _ret2==='undefined'?'undefined':_typeof(_ret2))===\"object\")return _ret2.v;}});});}function payWithCreditCard(recipientId,senderId,creditCardId){return bot.sendTypingOn(recipientId,senderId).then(function(){orderConfirmation(recipientId,senderId);});}function orderConfirmation(recipientId,senderId){return bot.sendTypingOn(recipientId,senderId).then(function(){saveOrder(recipientId);getOrderState(0).then(function(state){return bot.sendTypingOff(recipientId,senderId).then(function(){return bot.sendTextMessage(recipientId,senderId,state.messagePush+\"\\n\\nEn un momento te estaremos dando información en tiempo real sobre tu pedido\");});});});}function orderState(recipientId,senderId){bot.sendTypingOn(recipientId,senderId);orderSent(recipientId);}function orderSent(recipientId,senderId){return bot.sendTypingOn(recipientId,senderId).then(function(){return bot.sendTypingOff(recipientId,senderId).then(function(){return bot.sendTextMessage(recipientId,senderId,\"Buenas noticias, Tu pedido ha sido Enviado. \\n\\nHaz click en el mapa para vel tu pedido\").then(function(){sendserviceRating(recipientId);});});});}function sendOrderState(recipientId,senderId){return bot.sendTypingOn(recipientId,senderId).then(function(){var orderState=(0,_localStore.getData)(recipientId,'orderState');var pointSale=(0,_localStore.getData)(recipientId,'pointSale');return bot.sendTypingOff(recipientId,senderId).then(function(){if(orderState.order==1){return bot.sendTextMessage(recipientId,senderId,\"Tu pedido ha sido Aceptado. \\n\\nLo estan preparando en nuestra sede y te lo enviaremos en aproximadamente \"+pointSale.deliveryTime+\" minutos\");}else if(orderState.order==5){return bot.sendTextMessage(recipientId,senderId,orderState.messagePush).then(function(){sendserviceRating(recipientId);});}else if(orderState.order==6){return new _promise2.default(function(resolve,reject){resolve();});}else{return bot.sendTypingOff(recipientId,senderId).then(function(){return bot.sendTextMessage(recipientId,senderId,orderState.messagePush);});}});});}function sendserviceRating(recipientId,senderId){return bot.sendTypingOn(recipientId,senderId).then(function(){return bot.sendTypingOff(recipientId,senderId).then(function(){return bot.sendQuickReplyMessage(recipientId,senderId,\"Califica tu experiencia para ayudarnos a mejorar. \\n\\nDe 1 a 5 cuantas extrellas merece nuestro servicio?\",[{\"content_type\":\"text\",\"title\":\"5 (Excelente)\",\"payload\":\"SetScore-5\"},{\"content_type\":\"text\",\"title\":\"4 (Bien)\",\"payload\":\"SetScore-4\"},{\"content_type\":\"text\",\"title\":\"3 (Regular)\",\"payload\":\"SetScore-3\"},{\"content_type\":\"text\",\"title\":\"2 (Mal)\",\"payload\":\"SetScore-2\"},{\"content_type\":\"text\",\"title\":\"2 (Muy mal)\",\"payload\":\"SetScore-1\"}]);});});}function setScore(recipientId,senderId,score){var order=(0,_localStore.getData)(recipientId,'order');return bot.sendTypingOn(recipientId,senderId).then(function(){Parse.Cloud.run('rateOrder',{orderId:order.objectId,score:Number(score),comment:''}).then(function(result){return bot.sendTypingOff(recipientId,senderId).then(function(){thank(recipientId,senderId);});},function(error){console.log('error');console.log(error);});});}function thank(recipientId,senderId){return bot.sendTypingOn(recipientId,senderId).then(function(){return bot.sendTypingOff(recipientId,senderId).then(function(){return bot.sendTextMessage(recipientId,senderId,\"Gracias, esperamos tener el gusto de atenderle nuevamente\");});});}function searchProducts(recipientId,senderId,query,index){return bot.sendTypingOn(recipientId,senderId).then(function(){Parse.Cloud.run('search',{businessId:BUSINESS[senderId].BUSINESS_ID,q:query}).then(function(result){if(result.length==0){renderSearchEmpty(recipientId,senderId);}else if(result.length==1&&result[0].type=='Category'){sendProducts(recipientId,senderId,result[0].id,0);}else{if(index==undefined)index=0;else if(typeof index=='string')index=parseInt(index);if(index==0){renderSearchInitial(recipientId,senderId);}splitSearchResult(recipientId,result,index).then(function(elements){var idx=Object.keys(result).length;var buttons=[];var catIni=(index+1)*bot.limit;var catFin=idx>catIni+bot.limit?catIni+bot.limit:idx;if(idx>(index+1)*bot.limit){buttons.push({type:\"postback\",title:\"Productos \"+(catIni+1)+\"-\"+catFin,payload:\"Search-\"+(index+1)});elements.push({title:\"Ver más productos \",subtitle:\"Productos disponibles\",buttons:buttons});}return bot.sendTypingOff(recipientId,senderId).then(function(){return bot.sendGenericMessage(recipientId,senderId,elements);});});}},function(error){console.log('error');console.log(error);});});}function renderSearchInitial(recipientId,senderId){return bot.sendTypingOff(recipientId,senderId).then(function(){return bot.sendTextMessage(recipientId,senderId,\"Se han encontrado los siguientes productos:\");});}function renderSearchEmpty(recipientId,senderId){return bot.sendTypingOff(recipientId,senderId).then(function(){return bot.sendTextMessage(recipientId,senderId,\"No se han encontrado productos que coincidan\");});}function splitSearchResult(recipientId,products,index){var customer=(0,_localStore.getData)(recipientId,'customer');var image_url=void 0;var idx=0;var elements=[];var promises=[];products.forEach(function(item){if(item&&item.name&&item.type=='Product'){if(idx>=index*bot.limit&&idx<(index+1)*bot.limit){promises.push(new Parse.Query(_ParseModels.Product).get(item.id).then(function(product){return(0,_parseUtils.extractParseAttributes)(product);}));idx=idx+1;}}});return Parse.Promise.when(promises).then(function(productObjects){productObjects.forEach(function(product){var image=product.image;image_url=typeof image!='undefined'?image.url:customer.image.url;elements.push({title:product.name+\": $\"+product.priceDefault,subtitle:product.description,image_url:image_url,buttons:[{type:\"postback\",title:'Agregar',payload:\"AddProduct-\"+product.objectId},{type:\"postback\",title:'Ver descripción',payload:\"SendProductDescription-\"+product.objectId}]});});return elements;});//    subtitle: item.get('description'),\n}function sendHelp(recipientId,senderId){bot.sendTypingOn(recipientId,senderId);renderHelp(recipientId,senderId).then(function(){sendContactUs(recipientId,senderId);});}function renderHelp(recipientId,senderId){return bot.sendTypingOff(recipientId,senderId).then(function(){return bot.sendTextMessage(recipientId,senderId,\"InOut Bot.\\n\\nTe permite visualizar las opciones de productos, agregarlos al carrito y realizar tu compra por medio del chat de facebook.\\n\\nFuncionalidades disponibles: \\n\\n'Hola', para iniciar la conversación\\n'Pedir Domicilio', si quieres realizar un domicilio\\n'Carrito', para ver el estado actual de tu carrito\");});}function sendContactUs(recipientId,senderId){return bot.sendTypingOn(recipientId,senderId).then(function(){return bot.sendTypingOff(recipientId,senderId).then(function(){return bot.sendTextMessage(recipientId,senderId,\" Para mayor información puedes contactarnos en:\\n\\n Web: http://www.inoutdelivery.com/\\n\\n Email: soporte@inoutdelivery.com\");});});}function sendOrders(recipientId,senderId){bot.sendTypingOn(recipientId,senderId).then(function(){authentication(recipientId,senderId).then(function(){var consumer=(0,_localStore.getData)(recipientId,'consumer');Parse.Cloud.run('ordersBot',{businessId:BUSINESS[senderId].BUSINESS_ID,consumerId:consumer.objectId}).then(function(orders){store.dispatch(Actions.setOrders(recipientId,orders)).then(function(){renderOrders(recipientId,senderId);});}).fail(function(error){console.log('error');console.log(error);});});});}function renderOrders(recipientId,senderId){var customer=(0,_localStore.getData)(recipientId,'customer');var orders=(0,_localStore.getData)(recipientId,'orders');var elements=[];elements.push({\"title\":\"Nueva orden\",\"subtitle\":\"Puedes realizar una orden\",\"image_url\":SERVER_URL+\"assets/images/newOrden.jpg\",\"buttons\":[{\"type\":\"postback\",\"title\":\"Nueva orden\",\"payload\":\"NewOrder\"}]});var _iteratorNormalCompletion9=true;var _didIteratorError9=false;var _iteratorError9=undefined;try{for(var _iterator9=orders.ongoing[Symbol.iterator](),_step9;!(_iteratorNormalCompletion9=(_step9=_iterator9.next()).done);_iteratorNormalCompletion9=true){var order=_step9.value;var pointSale=order.pointSale;if(elements.length<bot.limit){var datetime=_datetimeConverterNodejs2.default.dateString(order.createdAt);var image_url=customer.image.url;var title=order.orderNumber?'Orden: '+order.orderNumber:'Orden: '+(0,_dateformat2.default)(datetime,\"h:MM:ss TT dd/mm/yyyy\");elements.push({\"title\":title,\"subtitle\":'Estado: '+order.state.name+', Valor: $'+(order.total+pointSale.deliveryCost),\"image_url\":image_url,\"buttons\":[{\"type\":\"postback\",\"title\":\"Ver orden\",\"payload\":\"SendOrder-\"+order.objectId},{\"type\":\"postback\",\"title\":\"Cancelar orden\",\"payload\":\"CancelOrder-\"+order.objectId}]});}}}catch(err){_didIteratorError9=true;_iteratorError9=err;}finally{try{if(!_iteratorNormalCompletion9&&_iterator9.return){_iterator9.return();}}finally{if(_didIteratorError9){throw _iteratorError9;}}}return bot.sendTypingOff(recipientId,senderId).then(function(){return bot.sendGenericMessage(recipientId,senderId,elements);});}function sendOrder(recipientId,senderId,id){return bot.sendTypingOn(recipientId,senderId).then(function(){authentication(recipientId,senderId).then(function(){var orders=(0,_localStore.getData)(recipientId,'orders');var customer=(0,_localStore.getData)(recipientId,'customer');var customer_image_url=customer.image.url;var currentOrder=void 0;var elements=[];var element=void 0;var image_url=void 0;var product=void 0;var _iteratorNormalCompletion10=true;var _didIteratorError10=false;var _iteratorError10=undefined;try{for(var _iterator10=orders.ongoing[Symbol.iterator](),_step10;!(_iteratorNormalCompletion10=(_step10=_iterator10.next()).done);_iteratorNormalCompletion10=true){var order=_step10.value;if(order.objectId==id){currentOrder=order;}}}catch(err){_didIteratorError10=true;_iteratorError10=err;}finally{try{if(!_iteratorNormalCompletion10&&_iterator10.return){_iterator10.return();}}finally{if(_didIteratorError10){throw _iteratorError10;}}}var _iteratorNormalCompletion11=true;var _didIteratorError11=false;var _iteratorError11=undefined;try{for(var _iterator11=currentOrder.items[Symbol.iterator](),_step11;!(_iteratorNormalCompletion11=(_step11=_iterator11.next()).done);_iteratorNormalCompletion11=true){var item=_step11.value;product=item.product;image_url=customer_image_url;if(product.image){image_url=product.image.url;}element={};element['title']=product.name;element['quantity']=item.amount;element['price']=item.price;element['currency']=\"COP\";element['image_url']=image_url;elements.push(element);}}catch(err){_didIteratorError11=true;_iteratorError11=err;}finally{try{if(!_iteratorNormalCompletion11&&_iterator11.return){_iterator11.return();}}finally{if(_didIteratorError11){throw _iteratorError11;}}}renderOrder(recipientId,senderId,currentOrder,elements);});});}function renderOrder(recipientId,senderId,order,elements){var user=(0,_localStore.getData)(recipientId,'user');var consumer=(0,_localStore.getData)(recipientId,'consumer');var address=order.consumerAddress;var pointSale=order.pointSale;var payment_method=order.paymentMethod;var addressData=undefined;if(typeof payment_method=='undefined'){payment_method={name:'Sin definir'};}if(typeof address!='undefined'){addressData={street_1:address.address?address.address:'Dirección no definida',street_2:address.description?address.description:'Sin complemento',city:address.city?address.city:'No definida',postal_code:address.postalCode?address.postalCode:'No definido',state:address.state?address.state:'No definido',country:address.countryCode?address.countryCode:'No definido'};}return bot.sendTypingOff(recipientId,senderId).then(function(){return bot.sendReceiptMessage(recipientId,senderId,{template_type:\"receipt\",recipient_name:user.first_name+\" \"+user.last_name,order_number:order.objectId,currency:\"COP\",payment_method:payment_method.name,timestamp:Math.trunc(Date.now()/1000).toString(),elements:elements,address:addressData,summary:{subtotal:order.total,shipping_cost:pointSale.deliveryCost,total_cost:order.total+pointSale.deliveryCost}},[{\"content_type\":\"text\",\"title\":\"Nueva orden\",\"payload\":\"NewOrder\"},{\"content_type\":\"text\",\"title\":\"Ver órdenes\",\"payload\":\"SendOrders\"},{\"content_type\":\"text\",\"title\":\"Cancelar orden\",\"payload\":\"CancelOrder-\"+order.objectId}]);});}function newOrder(recipientId,senderId){clearCart(recipientId).then(function(){sendAddressesWithTitle(recipientId,senderId);});}function cancelOrder(recipientId,senderId,id){Parse.Cloud.run('changeStatusOrder',{status:\"canceledByUser\",orderId:id}).then(function(){renderCancelOrder(recipientId,senderId).then(function(){sendOrders(recipientId,senderId);});}).fail(function(error){console.log('error');console.log(error);});}function renderCancelOrder(recipientId,senderId){return bot.sendTypingOff(recipientId,senderId).then(function(){return bot.sendTextMessage(recipientId,senderId,\"La orden ha sido cancelada.\");});}function sendAccount(recipientId,senderId){return bot.sendTypingOn(recipientId,senderId).then(function(){authentication(recipientId,senderId).then(function(){renderAccount(recipientId,senderId);});});}function renderAccount(recipientId,senderId){var user=(0,_localStore.getData)(recipientId,'user');var consumer=(0,_localStore.getData)(recipientId,'consumer');var elements=[{\"title\":'Ver direcciones',\"subtitle\":'Editar y eliminar direcciones',\"image_url\":SERVER_URL+\"assets/images/addresses.jpg\",\"buttons\":[{\"type\":\"postback\",\"title\":'Ver direcciones',\"payload\":\"SendAddresses\"}]},{\"title\":'Ver tarjetas de credito',\"subtitle\":'Editar y eliminar tarjetas de credito',\"image_url\":SERVER_URL+\"assets/images/creditCards.jpg\",\"buttons\":[{\"type\":\"postback\",\"title\":'Ver tarjetas',\"payload\":\"SendCreditCards\"}]}];return bot.sendTypingOff(recipientId,senderId).then(function(){return bot.sendGenericMessage(recipientId,senderId,elements);});}function sendYouAreWelcome(recipientId,senderId){return bot.sendTypingOn(recipientId,senderId).then(function(){return bot.sendTypingOff(recipientId,senderId).then(function(){return bot.sendTextMessage(recipientId,senderId,\"De nada, gracias por usar nuestros servicios\");});});}function addCreditCard(recipientId,token,data){var expiration=data['expiry'].replace(/\\s+/g,\"\").split('/');return(0,_requestPromise2.default)({uri:PARSE_SERVER_URL+'/functions/addCreditCard',headers:{'Content-Type':'text/plain;charset=UTF-8','X-Parse-Application-Id':PARSE_APP_ID,'X-Parse-Session-Token':token},method:'POST',json:{\"number\":data['number'].replace(/\\s+/g,\"\"),\"holderName\":data['holderName'],\"verificationNumber\":data['cvc'],\"expirationMonth\":expiration[0],\"expirationYear\":expiration[1]}}).then(function(body){console.log('result');console.log(body);(0,_requestPromise2.default)({uri:SERVER_URL+'creditCardRegistered',method:'POST',json:{\"recipientId\":recipientId}});}).catch(function(error){console.log('error');console.log(error);var response=error.response;//console.log(JSON.stringify(error, null, 1));\nconsole.log(JSON.stringify(response.body,null,1));});}function getOrderState(orderStateNumber){return new Parse.Query(_ParseModels.OrderState).equalTo('order',orderStateNumber).find().then(function(state){return(0,_parseUtils.extractParseAttributes)(state[0]);},function(object,error){console.log(error);});}module.exports={store:store,getData:_localStore.getData};store.dispatch({type:types.APP_LOADED});"]}